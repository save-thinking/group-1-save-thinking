{"version":3,"file":"output.js","mappings":"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,gBAAiBX,EAAQwI,0CAI1DE,GAqRIC,EA/QU,MACrB,MAAMC,EAAQxB,SAASC,cAAc,MAAO,CAC1CtD,GAAI,mBACJ,kBAAmB,cACnB8E,KAAM,SACN,cAAc,IAwQhB,OAtQAD,EAAMP,UAAUS,IAAI,QACpBF,EAAMP,UAAUS,IAAI,UACpBF,EAAMN,UAAY,wgXAoQXM,GAEkBG,GAKdC,EAA6B1G,IACxC,MAAM8F,EAAahB,SAASC,cAAc,OA4B1C,OA3BAe,EAAWC,UAAY,eACvBD,EAAWE,UAAY,mHAIjBhG,EAAON,oBAAoBxB,0HAK3B8B,EAAON,oBAAoB9B,6DAEeoC,EAAOgB,6HAGKhB,EAAOiG,6DAE7DjG,EAAOP,eAAe7B,4EAIxB+H,EAA2B3F,EAAO7B,gBAElC,yBAA4B6B,EAAOX,OAAQW,EAAOkG,gEAI/CJ,GAMIa,EAAS,CACpB,+DACA,8DACA,6DACA,+DACA,8DACA,gEACA,6DACA,+DACA,gEACA,8DACA,gEACA,8DACA,gEACA,8DACA,6DACA,+DACA,8DACA,+DACA,0DACA,8DACA,8DACA,4DACA,+DACA,gEACA,6DACA,8DACA,+DACA,+DACA,gEACA,+DACA,8DACA,+DACA,gEACA,gEACA,+DACA,8DACA,+DACA,6DACA,+DACA,8DACA,8DACA,gEACA,+DACA,+DACA,6DACA,+DACA,gEACA,6DACA,8DACA,8DACA,gEACA,+DACA,gEACA,8DACA,8DACA,4DACA,8DACA,6DACA,+DACA,+DACA,+DACA,gEACA,8DACA,gEACA,8DACA,8DACA,8DACA,8DACA,+DACA,gEACA,8DACA,8DACA,8DACA,gEACA,+DACA,8DACA,8DACA,8DACA,8DACA,6DACA,+DACA,+DACA,8DACA,8DACA,8DACA,gEACA,gEACA,gEACA,+DACA,+DACA,6DACA,8DACA,6DACA,4DACA,+DACA,+DACA,+DACA,gEACA,+DACA,oQCzdF,MAAMC,EAAiB9B,SAAS+B,cAAc,eACxCC,EAAkBhC,SAAS+B,cAAc,sBACzCE,EAAmBjC,SAAS+B,cAAc,oBAC1CG,EAA2BlC,SAAS+B,cACxC,6BAEII,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","sources":["webpack://group-1-save-thinking/./src/js/domain/account.js","webpack://group-1-save-thinking/./src/js/domain/exceptions.js","webpack://group-1-save-thinking/./src/js/domain/record.js","webpack://group-1-save-thinking/./src/js/domain/summary.js","webpack://group-1-save-thinking/./src/js/storage/account.js","webpack://group-1-save-thinking/./src/js/storage/exceptions.js","webpack://group-1-save-thinking/./src/js/storage/idb.js","webpack://group-1-save-thinking/./src/js/storage/record.js","webpack://group-1-save-thinking/./src/js/storage/utils.js","webpack://group-1-save-thinking/./src/js/utils.js","webpack://group-1-save-thinking/./src/js/view/components.js","webpack://group-1-save-thinking/./src/js/view/dashboard.js","webpack://group-1-save-thinking/./src/js/view/records.js","webpack://group-1-save-thinking/./src/js/view/utility.js","webpack://group-1-save-thinking/./node_modules/chart.js/dist/chart.js","webpack://group-1-save-thinking/./node_modules/chart.js/dist/chunks/helpers.segment.js","webpack://group-1-save-thinking/./node_modules/dexie/dist/modern/dexie.mjs","webpack://group-1-save-thinking/webpack/bootstrap","webpack://group-1-save-thinking/webpack/runtime/define property getters","webpack://group-1-save-thinking/webpack/runtime/hasOwnProperty shorthand","webpack://group-1-save-thinking/webpack/runtime/make namespace object"],"sourcesContent":["/** Domain Service - Accounts\n @module domain/account\n */\n//  This processing js will act as an adapter between th view layer and storage layer of the app for new account creations.\n//  First, it checks that the information given from the View Layer is correct. If it is incorrect we throw a validation error.\n//  Second, if validation passes, we pass the new account information to the database where it saves this account and assigns it a database key.\n//  Third, if there was a problem storing the information, the database will throw a storing error. We will communicate this error to the user to reattempt the account creation.\n//  Fourth, if there were no validation/storage errors then the account must have been added correctly, so we pass this new account info, with its associated key, back to the view layer.\nimport * as accountStore from '../storage/account.js'\nimport { MissingFieldError, FormattingError } from './exceptions.js'\n\nconst FUND_EMOJI = {\n  'checking-account': '',\n  'savings-account': '',\n  'credit-card': '',\n  cash: ''\n}\n\n// /**\n//  * Our input is the data given from the New Account fields on the view layer. The input has the form:\n// const passedInfo = {\"name\":\"test account name\",\"account_type\":\"checking-account\",\"initial_balance\":\"12345\",\"currency\":\"USD\"}\n\n// First this function checks that the given JSON file has a valid amount, non-empty and a positive number.\n// If it doesn't, the validateNewAccount function will throw a Validation Error.\n// If it successfully validates, then we proceed to give the input to the storage layer.\n// If there is a problem in storage, then the addAccountInTable function will throw a Storage Error.\n// If we have no errors, then addAccountInTable() will return the newly added account with its key, in JSON format, which we then return.\n// */\n/**\n * An Account\n * @typedef {Object} Account\n * @property {string} id - Autogenerated ID\n * @property {date} created_at - Created Timestamp\n * @property {date} updated_at - Updated Timestamp\n * @property {string} source - Source of Account (USER)\n * @property {string} emoji - Account Emoji\n * @property {number} initial_balance - Initial Balance\n * @property {number} current_balance - Current Balance\n * @property {string} currency - Currency\n */\n/**\n * Validates input and calls Storage Service\n * @public\n * @function addAccount\n *\n * @param {Account} account\n * @returns {Account}\n */\n\nexport async function addAccount (account) {\n  validateNewAccount(account)\n  account.source = 'USER'\n  account.emoji = FUND_EMOJI[account.type]\n  account.initial_balance = Number(account.initial_balance)\n  account.current_balance = account.initial_balance\n  const result = await accountStore.storeAccount(account)\n  return result\n  // broadcast new record to all peers would be added here.\n}\n\n/**\n * Get all accounts\n * @function getAllUserAccounts\n * @returns {Array.Account}\n */\nexport async function getAllUserAccounts () {\n  const accounts = await accountStore\n    .getAccountMulti({ source: 'USER' })\n    .then((results) => results.toArray())\n  return accounts\n}\n\n/**\n * Get all accounts filtered using predicates\n * @function getAllAccounts\n * @param {Array.function} filter\n * @returns {Array.Account}\n */\nexport async function getAllAccounts (filter) {\n  const accounts = await accountStore\n    .getAccountMulti(filter)\n    .then((results) => results.toArray())\n  return accounts\n}\n\n/*\nWe assume here that the user is restricted from typing any non-number or decimal values into the initial balance field.\nThis is a hard lock out on the view layer. So the initial balance is always a string.\n */\n/**\n * Internal Method to validate input\n * @function validateNewAccount\n * @param {Account} account\n */\nfunction validateNewAccount (passedInfo) {\n  if (passedInfo.name === '') {\n    throw new MissingFieldError('Account Name')\n  }\n  if (passedInfo.initial_balance === '') {\n    throw new MissingFieldError('Initial Balance')\n  }\n  if (typeof passedInfo.name !== 'string') {\n    throw new FormattingError('Account Name')\n  }\n}\n","/** Domain Service - Exceptions\n @module domain/exceptions\n */\n/**\n * Validation Error\n * @class ValidationError\n */\nexport class ValidationError extends Error {\n  constructor (message) {\n    super(message)\n    this.name = 'ValidationError'\n  }\n}\n/**\n * MissingFieldError\n * @class MissingFieldError\n */\nexport class MissingFieldError extends ValidationError {\n  constructor (property) {\n    super('Missing: ' + property)\n    this.name = 'ValidationError'\n    this.property = property\n  }\n}\n/**\n * FormattingError\n * @class FormattingError\n */\nexport class FormattingError extends ValidationError {\n  constructor (property) {\n    super('Format Error: ' + property)\n    this.name = 'ValidationError'\n    this.property = property\n  }\n}\n\nexport class InvalidAmountError extends ValidationError {\n  constructor (property) {\n    super('Invalid Amount: ' + property)\n    this.name = 'InvalidAmountError'\n    this.property = property\n  }\n}\n","/** Domain Service - Records\n * This module will act as an adapter between th view layer and storage layer of the app for recoring transactions.\n @module domain/record\n */\n/*\nThis processing js will act as an adapter between th view layer and storage layer of the app for recoring transactions.\nFirst, it checks that the information given from the View Layer is correct. If it is incorrect we throw a validation error.\nSecond, if validation passes, we pass the new record information to the database where it saves this record, updating the account balances, and assigning the transaction a database key.\nThird, if there was a problem storing the information, the database will throw a storing error. We will communicate this error to the user to reattempt the record.\nFourth, if there were no validation/storage errors then the record must have been updated correctly, so we pass this new record, with its associated key, back to the view layer.\n*/\n\nimport * as recordStore from '../storage/record.js'\nimport * as accountStore from '../storage/account.js'\nimport { donwloadCSV } from '../utils.js'\nimport { InvalidAmountError } from './exceptions.js'\n\n/*\nOur input is the data given from the New Record fields on the view layer. The input has the form:\nconst passedInfo = {\"record_type\":\"Expense\",\"record_source_account\":\"Given Source Account\",\"record_destination_account\":\"Given Destination Account\",\"amount\":\"123456\",\"currency\":\"USD/Euro/else\",\"record_note\":\"Sample Note.\",\"record_created_time\":\"2018-07-22\",\"record_tag\":\"Sample Tag\"}\n\nFirst this function checks that the given JSON file has a valid amount, non-empty and a positive number.\nIf it doesn't, the validateNewRecord function will throw a Validation Error.\nIf it successfully validates, then we proceed to give the input to the storage layer.\nIf there is a problem in storage, then the addRecordInTable function will throw a Storage Error.\nIf we have no errors, then addRecordInTable() will return the newly added record with its database key in JSON format, which we then return.\n*/\n/**\n * Validates input and calls Storage Service\n * @public\n * @function addRecord\n *\n * @param {Record} record\n * @returns {Record}\n */\nexport async function addRecord (passedInfo) {\n  passedInfo.amount = Number(passedInfo.amount).toFixed(2)\n  validateNewRecord(passedInfo)\n  const result = await recordStore.storeRecord(passedInfo)\n  result.source_account = await accountStore.getAccount(result.source_account)\n  result.destination_account = await accountStore.getAccount(\n    result.destination_account\n  )\n  return result\n  // broadcast new record to all peers would be added here.\n}\n\n/**\n * Get all records\n * @function getAllRecords\n * @returns {Array.Record}\n */\nexport async function getAllRecords () {\n  let records = await recordStore.getAllRecords()\n  records = await records.toArray()\n  return Promise.all(\n    records.map(async (record) => {\n      record.source_account = await accountStore.getAccount(\n        record.source_account\n      )\n      record.destination_account = await accountStore.getAccount(\n        record.destination_account\n      )\n      return record\n    })\n  )\n}\n\nexport async function exportRecords () {\n  let records = await recordStore.getAllRecords()\n  records = await records.toArray()\n  records = await Promise.all(\n    records.map(async (record) => {\n      record.source_account = await accountStore.getAccount(\n        record.source_account\n      )\n      record.source_account = record.source_account.name\n      record.destination_account = await accountStore.getAccount(\n        record.destination_account\n      )\n      record.destination_account = record.destination_account.name\n      return record\n    })\n  )\n  donwloadCSV(records, 'records.csv')\n}\n\n/*\nWe assume here that the user is restricted from typing any non-number or decimal values into the record amount field.\nThis is a hard lock out on the view layer. So the initial balance is always a string.\n*/\n/**\n * Internal Method to validate input\n * @function validateNewAccount\n * @param {Account} account\n */\nfunction validateNewRecord (passedInfo) {\n  if (passedInfo.amount < 0) {\n    throw new InvalidAmountError('Record Amount')\n  }\n}\n\n/**\n * A Record\n * @typedef {Object} Record\n * @property {string} id - Autogenerated ID\n * @property {date} created_at - Created Timestamp\n * @property {date} updated_at - Updated Timestamp\n * @property {Account} source_account - Source Account\n * @property {Account} destination_account - Destincation Account\n * @property {string} emoji - Account Emoji\n * @property {number} amount - Record Amount\n * @property {string} currency - Currency\n */\n","import * as recordStore from '../storage/record.js'\nimport * as accountStore from '../storage/account.js'\nimport * as recordService from './record.js'\n\nexport async function getCashFlow () {\n  let records = await recordStore.getAllRecords()\n  records = await records.toArray()\n  let accounts = await accountStore.getAccountMulti({ source: 'USER' })\n  accounts = await accounts.toArray()\n  return {\n    balance: accounts\n      .map((acc) => Number(acc.current_balance))\n      .reduce((a, b) => a + b),\n    expense: records\n      .filter((r) => r.type === 'expense')\n      .map((r) => Number(r.amount))\n      .reduce((a, b) => a + b, 0),\n    income: records\n      .filter((r) => r.type === 'income')\n      .map((r) => Number(r.amount))\n      .reduce((a, b) => a + b, 0)\n  }\n}\n\nexport async function getLatestRecords () {\n  let records = await recordService.getAllRecords()\n  records = records.map((record) =>\n    Object.assign({}, record, { created_at: Date.parse(record.created_at) })\n  )\n  records.sort((a, b) => (a.created_at > b.created_at ? 1 : -1))\n  records = records.slice(0, 5)\n  return records.map((record) =>\n    Object.assign({}, record, {\n      created_at: new Date(record.created_at).toDateString()\n    })\n  )\n}\n\nexport async function getExpenseByCategories () {\n  let records = await recordService.getAllRecords()\n  records = records\n    .filter((record) => record.type === 'expense')\n    .map((record) =>\n      Object.assign({}, record, { amount: Number(record.amount) })\n    )\n  const result = {}\n  records.forEach((record) => {\n    if (!result[record.destination_account.name]) {\n      result[record.destination_account.name] = record.amount\n    } else {\n      result[record.destination_account.name] += record.amount\n    }\n  })\n  return result\n}\n","/** Storage Service - Accounts\n @module storage/account\n */\nimport { db } from './idb.js'\nimport { StorageError } from './exceptions.js'\nimport { uuidv4 } from './utils.js'\n\n/**\n * Generates ID and saves to DB\n * @public\n * @function storeAccount\n *\n * @param {Account} account\n * @returns {Account}\n */\nexport async function storeAccount (account) {\n  account.id = uuidv4()\n  await db\n    .transaction('rw', db.accounts, async () => {\n      db.accounts.add(account)\n    })\n    .catch((e) => {\n      throw new StorageError(`Failed to store account ${e.stack}`)\n    })\n  return account\n}\n\n/**\n * Updates Account\n * @public\n * @function updateAccount\n * @param {string} id\n * @param {Account} account\n * @returns {Account}\n */\nexport async function updateAccount (id, account) {\n  await db\n    .transaction('rw', db.accounts, async () => {\n      const updated = await db.accounts.update(id, account)\n      if (!updated) {\n        throw new StorageError(`Could not find Account ${id}`)\n      }\n    })\n    .catch((e) => {\n      throw new StorageError(`Failed to update account ${e.stack}`)\n    })\n  return account\n}\n\n/**\n * Get Account\n * @public\n * @function getAccount\n * @param {string} id\n * @returns {Account}\n */\nexport async function getAccount (id) {\n  return db\n    .transaction('r', db.accounts, async () => db.accounts.get(id))\n    .catch((e) => {\n      throw new StorageError(`Could not get Account - ${e.stack}`)\n    })\n}\n/**\n * Get all Accounts\n * @public\n * @function getAllAccounts\n * @returns {Array.Account}\n */\nexport async function getAllAccounts () {\n  return db\n    .transaction('r', db.accounts, async () => {\n      return db.accounts\n    })\n    .catch((e) => {\n      throw new StorageError(`Could not get Accounts - ${e.stack}`)\n    })\n}\n/**\n * Get all Accounts given filter predicates\n * @public\n * @param {Array.Function} filters\n * @function getAccountMulti\n * @returns {Array.Account}\n */\nexport async function getAccountMulti (filters = {}) {\n  return db\n    .transaction('r', db.accounts, async () => {\n      return db.accounts.where(filters)\n    })\n    .catch((e) => {\n      throw new StorageError(`Could not get Accounts - ${e.stack}`)\n    })\n}\n/* All Seeded Accounts are pre-existing categories for Income/Expenses.\n   Each will have the following fields\n   - name\n   - fund_source => SEED\n   - fund_type\n   - initial_balance\n   - Emoji\n   Expense Categories\n*/\nconst EXPENSE = {\n  Food: '',\n  Groceries: '',\n  Alcohol: '',\n  Shopping: '',\n  Entertainment: '',\n  Learning: '',\n  Transport: '',\n  Events: '',\n  Investments: '',\n  Housing: ''\n}\n\nconst INCOME = {\n  Salary: '',\n  Interest: '',\n  Refunds: ''\n}\n\ndb.on('populate', (tx) => {\n  // Use provided transaction to populate database with initial data\n  Object.entries(EXPENSE)\n    .map(([name, emoji]) => {\n      return {\n        name,\n        emoji,\n        source: 'SEED',\n        type: 'expense',\n        initial_balance: 0.0,\n        current_balance: 0.0\n      }\n    })\n    .forEach((e) => storeAccount(e))\n  Object.entries(INCOME)\n    .map(([name, emoji]) => {\n      return {\n        name,\n        emoji,\n        source: 'SEED',\n        type: 'income',\n        initial_balance: 0.0,\n        current_balance: 0.0\n      }\n    })\n    .forEach((e) => {\n      storeAccount(e)\n    })\n})\n","/** Storage Service - Exceptions\n @module storage/exceptions\n */\n/**\n * Storage Error\n * @class StorageError\n */\nexport class StorageError extends Error {\n  constructor (message) {\n    super(message)\n    this.name = 'StorageError'\n    this.message = message\n  }\n}\n","/** Storage Service - IDB\n * Schema Definitions\n @module storage/idb\n */\nimport { StorageError } from './exceptions.js'\nimport { Dexie } from 'dexie'\n\nexport const db = new Dexie('sync-save')\ndb.version(1).stores({\n  accounts:\n    'id, name, source, type, initial_balance, current_balance, currency, created_at, updated_at',\n  records:\n    'id, source_account, destination_acount, amount, currency, type, note, tag, created_at, updated_at'\n})\ndb.open().catch((e) => {\n  throw new StorageError(`Failed to Open DB ${e.stack}`)\n})\n","/** Storage Service - Records\n @module storage/record\n */\nimport { db } from './idb.js'\nimport { StorageError } from './exceptions.js'\nimport { uuidv4 } from './utils.js'\n\n/**\n * Generates ID and saves to DB\n * @public\n * @function storeRecord\n *\n * @param {Record} record\n * @returns {Record}\n */\nexport async function storeRecord (record) {\n  record.id = uuidv4()\n  await db\n    .transaction('rw', db.records, db.accounts, async () => {\n      db.records.add(record)\n      const srcAccount = await db.accounts.get(record.source_account)\n      const destAccount = await db.accounts.get(record.destination_account)\n      await db.accounts.update(srcAccount.id, {\n        current_balance:\n          Number(srcAccount.current_balance) - Number(record.amount)\n      })\n      await db.accounts.update(destAccount.id, {\n        current_balance:\n          Number(destAccount.current_balance) + Number(record.amount)\n      })\n    })\n    .catch((e) => {\n      throw new StorageError(`Failed to store record ${e.stack}`)\n    })\n  return record\n}\n\n/**\n * Updates Record\n * @public\n * @function updateRecord\n * @param {string} id\n * @param {Record} record\n * @returns {Record}\n */\nexport async function updateRecord (id, record) {\n  await db\n    .transaction('rw', db.records, db.accounts, async () => {\n      const prev = await db.records.get(id)\n      let srcAccount = await db.accounts.get(prev.source_account)\n      let destAccount = await db.accounts.get(prev.destination_account)\n      // Undoing last record's balance\n      await db.accounts.update(srcAccount.id, {\n        current_balance: srcAccount.current_balance + prev.amount\n      })\n      await db.accounts.update(destAccount.id, {\n        current_balance: destAccount.current_balance - prev.amount\n      })\n      const updated = await db.records.update(id, record)\n      if (!updated) {\n        throw new StorageError(`Could not find Record ${id}`)\n      }\n      srcAccount = await db.accounts.get(record.source_account)\n      destAccount = await db.accounts.get(record.destination_account)\n      // Updating edited record's balance\n      await db.accounts.update(srcAccount.id, {\n        current_balance: srcAccount.current_balance + record.amount\n      })\n      await db.accounts.update(destAccount.id, {\n        current_balance: destAccount.current_balance - record.amount\n      })\n    })\n    .catch((e) => {\n      throw new StorageError(`Failed to update record ${e.stack}`)\n    })\n  return record\n}\n\n/**\n * Get Record\n * @public\n * @function getRecord\n * @param {string} id\n * @returns {Record}\n */\nexport async function getRecord (id) {\n  return db\n    .transaction('r', db.records, async () => db.records.get(id))\n    .catch((e) => {\n      throw new StorageError(`Could not get Record - ${e.stack}`)\n    })\n}\n\n/**\n * Get all Records\n * @public\n * @function getAllRecords\n * @returns {Array.Record}\n */\nexport async function getAllRecords () {\n  return db\n    .transaction('r', db.records, async () => {\n      return db.records\n    })\n    .catch((e) => {\n      throw new StorageError(`Could not get Records - ${e.stack}`)\n    })\n}\n/**\n * Get all Records given filter predicates\n * @public\n * @param {Array.Function} filters\n * @function getRecordsMulti\n * @returns {Array.Record}\n */\nexport async function getRecordsMulti (filters = {}) {\n  return db\n    .transaction('r', db.records, async () => {\n      return db.records.where(filters)\n    })\n    .catch((e) => {\n      throw new StorageError(`Could not get Records - ${e.stack}`)\n    })\n}\n","// https://stackoverflow.com/questions/105034/how-do-i-create-a-guid-uuid\nexport function uuidv4 () {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n    (\n      c ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n    ).toString(16)\n  )\n}\n","export function donwloadCSV (data, filename) {\n  const formatRow = (values) =>\n    values.map((v) => `\"${v.replace('\"', '\\\\\"')}\"`).join(',') + '\\n'\n  const download = (csvData) => {\n    const anchor = document.createElement('a')\n    anchor.setAttribute('download', filename)\n    const blob = new Blob([csvData], { type: 'text/csv' })\n    const url = URL.createObjectURL(blob)\n    anchor.setAttribute('href', url)\n    anchor.click()\n    URL.revokeObjectURL(url)\n  }\n  const headers = formatRow(Object.keys(data[0]))\n  const body = data.map((object) => formatRow(Object.values(object))).join('')\n  const csvData = [headers, body].join('')\n  download(csvData)\n}\n","/** View Service - Components\n @module view/components\n */\nimport * as util from './utility.js'\nconst RECORD_AMOUNT_COLOR_LOOKUP = {\n  expense: 'red',\n  income: 'green',\n  transfer: 'slate'\n}\n/**\n * @description recordCardComponent make an element on the Records Table\n */\nexport const recordCardComponent = (record) => {\n  const recordCard = document.createElement('div')\n  recordCard.classList = 'py-3 sm:py-4'\n  recordCard.innerHTML = `\n<div class=\"flex items-center space-x-4\">\n  <div class=\"flex\">\n    <div class=\"text-2xl rounded-full\">${record.destination_account.emoji}</div>\n  </div>\n  <div class=\"flex-1 min-w-0\">\n    <p class=\"text-sm font-medium text-gray-900 truncate\">${\n      record.destination_account.name\n    }</p>\n    <p class=\"text-sm text-gray-500 truncate\">${record.created_at}</p>\n  </div>\n  <div class=\"flex-1 min-w-0\">\n    <p class=\"text-sm font-medium text-gray-900 truncate\">\n      ${record.note}\n    </p>\n    <p class=\"text-sm text-gray-500 truncate\">${record.source_account.name}</p>\n  </div>\n  <div class=\"inline-flex items-center text-base text-${\n    RECORD_AMOUNT_COLOR_LOOKUP[record.type]\n  }-600\">\n   ${util.getBalanceWithCurrency(record.amount, record.currency)}\n  </div>\n</div>`\n  return recordCard\n}\n\n/**\n * @description accountCardComponent make an element on the Accounts Table\n */\nexport const accountCardComponent = (account) => {\n  const accountCard = document.createElement('div')\n  accountCard.classList =\n    'container p-4 m-2 h-full items-stretch max-w-xs bg-white rounded-lg border shadow-md sm:p-8 hover:bg-slate-50'\n  accountCard.innerHTML = `<div class='sm:py-4'>\n  <div class='flex items-center space-x-4'>\n    <div class='flex'>\n      <div class='text-2xl rounded-full'>${account.emoji}</div>\n    </div>\n    <div class='flex-1 min-w-0'>\n      <p class='text-sm font-medium text-gray-900 truncate'>\n      ${account.name}\n      </p>\n      <p class='text-xs text-gray-500 truncate'>${util.getAccountType(\n        account.type\n      )}</p>\n    </div>\n    <div class=\"inline-flex items-center text-base ${\n      account.current_balance > 0 ? 'text-green-600' : 'text-red-600'\n    }\">\n    ${util.getBalanceWithCurrency(account.current_balance, account.currency)}\n    </div>\n  </div>\n</div>`\n  return accountCard\n}\n\n/**\n * @description getRecordModal - Modal to add new Records\n */\nconst getRecordModal = () => {\n  const modal = document.createElement('div', {\n    id: 'add-record-modal',\n    'aria-labelledby': 'modal-title',\n    role: 'dialog',\n    'aria-modal': true\n  })\n  modal.classList.add('z-10')\n  modal.classList.add('hidden')\n  modal.innerHTML = `      <!--\n    Background backdrop, show/hide based on modal state.\n\n    Entering: \"ease-out duration-300\"\n      From: \"opacity-0\"\n      To: \"opacity-100\"\n    Leaving: \"ease-in duration-200\"\n      From: \"opacity-100\"\n      To: \"opacity-0\"\n  -->\n<div\n  class=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\n></div>\n\n<div class=\"fixed inset-0 z-10 overflow-y-auto\">\n  <div\n    class=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\"\n  >\n    <div\n      class=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg\"\n    >\n      <div class=\"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4\">\n        <div class=\"sm:flex sm:items-start\">\n          <div class=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n            <form id=\"add-record-form\"class=\"w-full max-w-xl mt-2\">\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full md:w-1/3 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"type\"\n                  >\n                    Record Type\n                  </label>\n                  <div class=\"relative\">\n                    <select\n                      name=\"type\"\n                      class=\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                      id=\"grid-record-type\"\n                    >\n                      <option value=\"expense\">Expense</option>\n                      <option value=\"income\">Income</option>\n                      <option value=\"transfer\">Transfer</option>\n                    </select>\n                    <div\n                      class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\"\n                    >\n                      <svg\n                        class=\"fill-current h-4 w-4\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path\n                          d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"source_account\"\n                  >\n                    Source\n                  </label>\n                  <div class=\"relative\">\n                    <select\n                      name=\"source_account\"\n                      class=\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                      id=\"grid-source-account\"\n                    >\n                    </select>\n                    <div\n                      class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\"\n                    >\n                      <svg\n                        class=\"fill-current h-4 w-4\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path\n                          d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                  <!-- <p class=\"text-red-500 text-xs italic\">\n                      Please fill out this field.\n                    </p> -->\n                </div>\n\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"destination_account\"\n                  >\n                    Destination\n                  </label>\n                  <div class=\"relative\">\n                    <select\n                      name=\"destination_account\"\n                      class=\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                      id=\"grid-destination-account\"\n                    >\n                    </select>\n                    <div\n                      class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\"\n                    >\n                      <svg\n                        class=\"fill-current h-4 w-4\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path\n                          d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                  <!-- <p class=\"text-red-500 text-xs italic\">\n                        Please fill out this field.\n                      </p> -->\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"amount\"\n                  >\n                    Amount\n                  </label>\n                  <input\n                    name=\"amount\"\n                    class=\"appearance-none w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"grid-amount\"\n                    type=\"number\"\n                    min=\"0.01\"\n                    placeholder=\"00.00\"\n                  />\n                  <!-- <p class=\"text-red-500 text-xs italic\">\n                      Please fill out this field.\n                    </p> -->\n                </div>\n\n                <div class=\"w-full md:w-1/2 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"currency\"\n                  >\n                    Currency\n                  </label>\n                  <div class=\"relative\">\n                    <select\n                      name=\"currency\"\n                      class=\"block appearance-none w-full bg-gray-200 border border-gray-200 text-gray-700 py-3 px-4 pr-8 rounded leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                      id=\"grid-currency\"\n                    >\n                      <option>USD</option>\n                      <option>EUR</option>\n                      <option>INR</option>\n                    </select>\n                    <div\n                      class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\"\n                    >\n                      <svg\n                        class=\"fill-current h-4 w-4\"\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        viewBox=\"0 0 20 20\"\n                      >\n                        <path\n                          d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                  <!-- <p class=\"text-red-500 text-xs italic\">\n                        Please fill out this field.\n                      </p> -->\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-6\">\n                <div class=\"w-full px-3\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"note\"\n                  >\n                    Note\n                  </label>\n                  <input\n                    name=\"note\"\n                    class=\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"grid-note\"\n                    type=\"text\"\n                    placeholder=\"Enter Note Here\"\n                  />\n                  <!-- <p class=\"text-gray-600 text-xs italic\">\n                      Make it as long and as crazy as you'd like\n                    </p> -->\n                </div>\n              </div>\n              <div class=\"flex flex-wrap -mx-3 mb-2\">\n                <div class=\"w-full md:w-1/3 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"created_at\"\n                  >\n                    Date\n                  </label>\n                  <input\n                    name=\"created_at\"\n                    class=\"inline-block appearance-none w-full block bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"grid-created-time\"\n                    type=\"date\"\n                    value=\"2018-07-22\"\n                  />\n                </div>\n                <div class=\"w-full md:w-1/3 px-3 mb-6 md:mb-0\">\n                  <label\n                    class=\"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2\"\n                    for=\"tag\"\n                  >\n                    Tag\n                  </label>\n                  <input\n                    class=\"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500\"\n                    id=\"grid-tag\"\n                    type=\"text\"\n                    name=\"tag\"\n                    placeholder=\"None\"\n                  />\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\"\n      >\n        <button\n          id=\"record-modal-add-btn\"\n          type=\"button\"\n          class=\"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm\"\n        >\n          Add Record\n        </button>\n        <button\n          id=\"record-modal-cancel-btn\"\n          type=\"button\"\n          class=\"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</div>`\n  return modal\n}\nexport const recordModal = getRecordModal()\n\n/**\n * @description latestRecordCardComponent make an element on the Latest Record Card in Summary Dashboard\n */\nexport const latestRecordCardComponent = (record) => {\n  const recordCard = document.createElement('div')\n  recordCard.classList = 'py-2 sm:py-2'\n  recordCard.innerHTML = `\n  <div class=\"flex items-center space-x-4\">\n    <div class=\"flex\">\n      <div class=\"text-2xl rounded-full\">${\n        record.destination_account.emoji\n      }</div>\n    </div>\n    <div class=\"flex-1 min-w-0\">\n      <p class=\"text-sm font-medium text-gray-900 truncate\">${\n        record.destination_account.name\n      }</p>\n      <p class=\"text-sm text-gray-500 truncate\">${record.created_at}</p>\n    </div>\n    <div class=\"flex-1 min-w-0\">\n      <p class=\"text-sm font-medium text-gray-900 truncate\">${record.note}</p>\n      <p class=\"text-sm text-gray-500 truncate\">${\n        record.source_account.name\n      }</p>\n    </div>\n    <div class=\"inline-flex items-center text-base ${\n      RECORD_AMOUNT_COLOR_LOOKUP[record.type]\n    }\">\n    ${util.getBalanceWithCurrency(record.amount, record.currency)}\n    </div>\n  </div>\n  <div class=\"border\"></div>`\n  return recordCard\n}\n\n/**\n * @description COLORS is a static list of rgb values to be used for the Donut Chart\n */\nexport const COLORS = [\n  'rgb(121.74837569474411,38.39383324261537,34.762951235384875)',\n  'rgb(89.34391778659672,221.11386370934287,83.80322070172976)',\n  'rgb(90.13410697263176,128.9879563545594,8.659730061680358)',\n  'rgb(40.46489902529536,166.02748620373018,207.22909615685577)',\n  'rgb(207.1949977875534,10.64918824332574,152.55920736007337)',\n  'rgb(129.48006073465012,153.28151031774289,61.878255351398074)',\n  'rgb(32.85360032218314,122.51553055243754,94.1538714749005)',\n  'rgb(129.76545817730656,213.77877954574942,92.41946256705575)',\n  'rgb(155.30058713796058,126.53563361640089,111.36793656753561)',\n  'rgb(99.18399392261469,190.28496428082497,28.20551419493594)',\n  'rgb(204.96651710750868,118.84195640151206,229.39832239372933)',\n  'rgb(167.5638713841562,82.61985163800374,101.88808571007954)',\n  'rgb(230.24262080049726,214.95870128784577,103.26336049111417)',\n  'rgb(64.04258242114248,161.5288011152077,248.15666164862668)',\n  'rgb(8.99826129435327,173.5288868835995,116.25506051994064)',\n  'rgb(5.056126438531351,139.66734201679887,233.64196589924416)',\n  'rgb(224.48893015059366,59.51153078601351,87.75955921033201)',\n  'rgb(111.88235400722674,100.66791618395813,252.4802459860829)',\n  'rgb(189.8105506595473,199.369177731275,85.595214383465)',\n  'rgb(59.61760466326731,141.02891227595023,129.8852142040551)',\n  'rgb(226.96498039315802,48.09488018103852,95.43621239858882)',\n  'rgb(41.6182023331149,30.586399417825536,44.3308854198603)',\n  'rgb(35.59342175572935,235.24236395096844,108.02873948139509)',\n  'rgb(115.85705854090209,174.70695586541038,238.34325042004397)',\n  'rgb(122.74810360316303,176.1988903849821,177.056286528306)',\n  'rgb(33.55594246988832,249.81274382024566,2.411315586391747)',\n  'rgb(137.78511935440395,168.36830057143234,49.99242989110041)',\n  'rgb(134.81327334254263,53.11891528411287,36.544693722162044)',\n  'rgb(155.38185627209427,213.63385138487487,101.78955120302255)',\n  'rgb(244.1318618175824,117.78175988212406,114.35547005531791)',\n  'rgb(164.55949141374555,54.21095784942562,32.13991265429992)',\n  'rgb(194.49176819060216,254.8616604489981,2.0995923617388454)',\n  'rgb(155.06348991675972,108.29111743811626,225.76254745001847)',\n  'rgb(186.03340299294473,151.06332027247893,215.40217154021389)',\n  'rgb(247.5617840706842,210.01214521385637,31.873972824017912)',\n  'rgb(86.93473265427279,223.7763354137093,127.72078998443736)',\n  'rgb(225.48812392260436,223.6328810911946,144.56669538277225)',\n  'rgb(5.159498584445258,75.2561739244758,212.08019658185853)',\n  'rgb(53.485980650028665,179.04433519445294,58.51885830896353)',\n  'rgb(183.99026745802297,79.12533695671522,51.33651501503685)',\n  'rgb(16.15048389315785,103.34750094786486,234.3956090258432)',\n  'rgb(48.149427537882325,174.32946092691037,230.86386145318005)',\n  'rgb(70.77819594463021,146.62386319232772,16.442802370734263)',\n  'rgb(181.25228106245896,139.13224538215044,67.98143707681676)',\n  'rgb(166.8984262603308,73.14673366473292,50.81153822126647)',\n  'rgb(209.98936809010485,136.4171003960032,135.33772899202668)',\n  'rgb(123.46745746283295,109.42520801958644,182.33746057896713)',\n  'rgb(83.92030743953325,58.48730822473716,77.44556368331966)',\n  'rgb(234.7010822272529,221.8443918367341,27.629356551282335)',\n  'rgb(70.56621150379502,201.34935923730544,71.05259392653007)',\n  'rgb(223.11130013728925,0.9351631106432423,184.74333251501474)',\n  'rgb(124.79040396008033,248.09170435535728,196.3748687733188)',\n  'rgb(213.96125722603682,190.72057210723446,22.378716742860316)',\n  'rgb(89.96360628161086,144.1109716510909,136.16190148021965)',\n  'rgb(76.80404242164498,150.4985037349475,105.33489871007434)',\n  'rgb(152.11022755096,172.28042586209335,131.2647381798548)',\n  'rgb(44.825586937969845,206.4800807443154,102.0642109777543)',\n  'rgb(227.7319428096076,75.3506494361709,13.708832518782971)',\n  'rgb(129.5161039363412,100.66696213176375,155.15939942758303)',\n  'rgb(249.99700655643625,134.51682201753974,62.06286817578143)',\n  'rgb(231.00007346455237,254.43517251331906,167.3571462453067)',\n  'rgb(170.14517219589257,241.08073709599188,133.31581178431983)',\n  'rgb(250.46661676006582,162.3547958719078,194.8864839744709)',\n  'rgb(169.60264650958837,175.09301690738755,60.848573608657176)',\n  'rgb(166.93698687848794,178.866786965062,230.83250496121823)',\n  'rgb(176.6247944344221,62.17245866293612,187.17130513837498)',\n  'rgb(48.41671948193629,146.4112538579101,220.90161766304828)',\n  'rgb(66.98435747425843,19.90973239857257,228.97704188848002)',\n  'rgb(251.2140667467991,141.78509308579117,224.51528685453357)',\n  'rgb(131.51814512130647,192.44549616918124,106.74135457220682)',\n  'rgb(93.22298068816363,90.68965545675796,221.21138759724425)',\n  'rgb(199.92403177777055,75.24074647350538,157.2606755187023)',\n  'rgb(224.18256583002932,16.97038882607857,61.84356036908934)',\n  'rgb(217.38204767473465,234.59971733382332,163.86965973907718)',\n  'rgb(137.71208185015448,134.74279628568522,99.36525885288937)',\n  'rgb(163.31059410409247,49.26742498132762,58.30342261810903)',\n  'rgb(220.6739745891266,224.50794414935814,70.57879528040337)',\n  'rgb(219.67093917227484,66.0782063218454,180.09723864954228)',\n  'rgb(107.54583022683362,86.97604189945325,75.11116138548302)',\n  'rgb(74.3817181903846,69.28539907973222,50.289001599491385)',\n  'rgb(121.81891127464026,138.84375209430266,77.08612114899879)',\n  'rgb(181.2557900562641,128.36344955174627,170.74644060514692)',\n  'rgb(194.3936141319706,232.24370526215924,84.41500857462692)',\n  'rgb(85.42239265909693,231.7406550569084,237.78921348386012)',\n  'rgb(44.558298883266446,172.317757076758,31.078824858837553)',\n  'rgb(160.87789752933702,111.94440813150963,151.17551065369534)',\n  'rgb(146.37572906931612,247.71779686694836,157.33633241043654)',\n  'rgb(135.50042287964763,52.869272566765964,122.80943364419943)',\n  'rgb(208.13613033867438,86.39024877860521,31.092077839375357)',\n  'rgb(206.81896610876717,84.50824102612782,25.428068689059256)',\n  'rgb(64.57662444943888,78.80211975840268,62.70311642145802)',\n  'rgb(216.29061557558208,130.3638727422168,167.7768340973467)',\n  'rgb(8.091411522719056,209.4325242928191,94.60496808687805)',\n  'rgb(235.7040692240146,4.55248142247058,243.2224897162123)',\n  'rgb(181.3771653637918,116.51433998916926,51.085490668954876)',\n  'rgb(77.60615531279755,197.98429413622398,254.34942793784833)',\n  'rgb(235.36003446406653,35.94486174652645,218.78934382105837)',\n  'rgb(225.17251606298953,213.38280721199314,173.40903324201668)',\n  'rgb(215.72082759399143,202.63910581682936,69.81697745027157)',\n  'rgb(220.1981634084443,172.9173885929796,169.147584616554)'\n]\n","/** View Service - Dashboard\n @module view/dashboard\n */\nimport { Chart, registerables } from 'chart.js'\nimport * as accountService from '../domain/account.js'\nimport * as summaryService from '../domain/summary.js'\nimport {\n  recordModal,\n  accountCardComponent,\n  latestRecordCardComponent,\n  COLORS\n} from './components.js'\nconst navBarQuickAdd = document.querySelector('#add-record')\nconst addAccountModal = document.querySelector('#add-account-modal')\nconst addAccountButton = document.querySelector('#add-account-btn')\nconst accountModalCancelButton = document.querySelector(\n  '#account-modal-cancel-btn'\n)\nconst accountModalAddButton = document.querySelector('#add-account-modal-btn')\nconst accountModalAddForm = document.querySelector('#add-account-form')\nconst accountList = document.querySelector('#account-list')\nconst cashflowCardBalance = document.querySelector('#cashflow-card-balance')\nconst cashflowCardExpense = document.querySelector('#cashflow-card-expense')\nconst cashflowCardIncome = document.querySelector('#cashflow-card-income')\nconst cashflowChart = document.getElementById('cashflow-chart')\nconst latestRecordsList = document.getElementById('recent-records')\nconst donut = document.getElementById('expense-donut-chart')\nChart.register(...registerables)\n\n// this function would be called every time the page is loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.body.appendChild(recordModal)\n  accountService.getAllUserAccounts().then((accounts) => {\n    accounts.forEach((account) => {\n      addAccountCard(account)\n    })\n  })\n  populateSummary()\n})\n\n/* Utilities */\nconst toggleAddAccountModalVisibility = () => {\n  addAccountModal.classList.toggle('hidden')\n}\nconst toggleAddRecordModalVisibility = () => {\n  recordModal.classList.toggle('hidden')\n}\n\nconst populateSummary = () => {\n  populateCashFlow()\n  populateLatestRecords()\n  populateExpenseByCategories()\n}\n\n/* Event Listeners */\naddAccountButton &&\n  addAccountButton.addEventListener('click', (e) => {\n    toggleAddAccountModalVisibility()\n  })\naccountModalCancelButton &&\n  accountModalCancelButton.addEventListener('click', (e) => {\n    toggleAddAccountModalVisibility()\n  })\n\nnavBarQuickAdd &&\n  navBarQuickAdd.addEventListener('click', (e) => {\n    toggleAddRecordModalVisibility()\n  })\n\naccountModalAddButton &&\n  accountModalAddButton.addEventListener('click', (e) => {\n    const formData = new FormData(accountModalAddForm)\n    const formJson = {}\n    for (const pair of formData.entries()) {\n      formJson[pair[0]] = pair[1]\n    }\n    accountService.addAccount(formJson).then((account) => {\n      addAccountCard(account)\n    })\n    toggleAddAccountModalVisibility()\n  })\n\ndocument.onkeyup = (e) => {\n  if (e.ctrlKey && e.key === 'q') {\n    toggleAddRecordModalVisibility()\n  }\n}\n\nconst addAccountCard = (account) => {\n  accountList && accountList.prepend(accountCardComponent(account))\n}\n\nconst populateCashFlow = async () => {\n  const cashflow = await summaryService.getCashFlow()\n  cashflowCardBalance.innerHTML = `$${cashflow.balance}`\n  cashflowCardExpense.innerHTML = `$${cashflow.expense}`\n  cashflowCardIncome.innerHTML = `$${cashflow.income}`\n  const cashflowData = {\n    labels: ['Income', 'Expense'],\n    datasets: [\n      {\n        label: 'Category',\n        data: [cashflow.income, cashflow.expense],\n        backgroundColor: ['rgb(34, 197, 94)', 'rgb(225, 29, 72)'],\n        borderWidth: 1,\n        barThickness: 20\n      }\n    ]\n  };\n  (() =>\n    new Chart(cashflowChart, {\n      type: 'bar',\n      data: cashflowData,\n      options: {\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    }))()\n}\n\nconst populateLatestRecords = async () => {\n  let records = await summaryService.getLatestRecords()\n  records = records.map((record) => latestRecordCardComponent(record))\n  records.forEach((record) => latestRecordsList.appendChild(record))\n}\n\nconst populateExpenseByCategories = async () => {\n  const answer = await summaryService.getExpenseByCategories()\n  const data = {\n    labels: Object.keys(answer),\n    datasets: [\n      {\n        label: 'Amount',\n        data: Object.values(answer),\n        backgroundColor: COLORS.slice(0, Object.keys(answer).length),\n        hoverOffset: 4\n      }\n    ]\n  };\n  (() =>\n    new Chart(donut, {\n      type: 'doughnut',\n      data,\n      options: {\n        responsive: false\n      }\n    }))()\n}\n","/** View Service - Records\n @module view/records\n */\nimport * as recordService from '../domain/record.js'\nimport * as accountService from '../domain/account.js'\nimport { recordModal, recordCardComponent } from './components.js'\n\nconst recordList = document.querySelector('#record-list')\nconst addRecordButton = document.querySelector('#add-record-btn')\nconst recordModalRecordType = recordModal.querySelector('#grid-record-type')\nconst dstAccountDropDown = recordModal.querySelector(\n  '#grid-destination-account'\n)\nconst srcAccountDropDown = recordModal.querySelector('#grid-source-account')\nconst recordModalCancelBtn = recordModal.querySelector(\n  '#record-modal-cancel-btn'\n)\nconst recordModalAddBtn = recordModal.querySelector('#record-modal-add-btn')\nconst recordModalForm = recordModal.querySelector('#add-record-form')\nconst exportRecordsBtn = document.querySelector('#export-records-btn')\n\nconst toggleAddRecordModalVisibility = () => {\n  recordModal.classList.toggle('hidden')\n  expenseTypeChangeHandle('expense')\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  document.body.appendChild(recordModal)\n  recordService.getAllRecords().then((records) => {\n    records.map((record) => addRecordCard(record))\n  })\n})\nrecordModalRecordType &&\n  recordModalRecordType.addEventListener('change', (e) => {\n    expenseTypeChangeHandle(e.target.value)\n  }) &&\n  recordModalRecordType.addEventListener('click', (e) => {\n    expenseTypeChangeHandle(e.target.value)\n  })\n\naddRecordButton &&\n  addRecordButton.addEventListener('click', (e) => {\n    toggleAddRecordModalVisibility()\n  })\n\nrecordModalCancelBtn &&\n  recordModalCancelBtn.addEventListener('click', (e) =>\n    toggleAddRecordModalVisibility()\n  )\n\nexportRecordsBtn &&\n  exportRecordsBtn.addEventListener('click', async (e) => {\n    await recordService.exportRecords()\n  })\n\nrecordModalAddBtn &&\n  recordModalAddBtn.addEventListener('click', (e) => {\n    const formData = new FormData(recordModalForm)\n    const formJson = {}\n    for (const pair of formData.entries()) {\n      formJson[pair[0]] = pair[1]\n    }\n    recordService.addRecord(formJson).then((record) => {\n      addRecordCard(record)\n    })\n    toggleAddRecordModalVisibility()\n  })\n\nconst populateDropDown = (element, filter) => {\n  element.replaceChildren()\n  accountService.getAllAccounts(filter).then((accounts) => {\n    accounts\n      .map((account) => accountDropDown(account))\n      .forEach((dropdown) => element.prepend(dropdown))\n  })\n}\nconst expenseTypeChangeHandle = (recordType) => {\n  switch (recordType) {\n    case 'expense':\n      populateDropDown(srcAccountDropDown, { source: 'USER' })\n      populateDropDown(dstAccountDropDown, { type: 'expense' })\n      break\n    case 'income':\n      populateDropDown(srcAccountDropDown, { type: 'income' })\n      populateDropDown(dstAccountDropDown, { source: 'USER' })\n      break\n    case 'transfer':\n      populateDropDown(srcAccountDropDown, { source: 'USER' })\n      populateDropDown(dstAccountDropDown, { source: 'USER' })\n      break\n  }\n}\n\nconst accountDropDown = (account) => {\n  const node = document.createElement('option')\n  node.value = account.id\n  node.innerText = `${account.emoji} ${account.name}`\n  return node\n}\n\nconst addRecordCard = (account) => {\n  recordList && recordList.prepend(recordCardComponent(account))\n}\n","// helper function to return sign of account\n// https://tailwindcss.com/docs/content-configuration#dynamic-class-names\nexport function getBalanceColor (balance) {\n  if (balance < 0) {\n    return 'text-red-600'\n  } else {\n    return 'text-green-600'\n  }\n}\n\n// helper function to return currency with balance as string\nexport function getBalanceWithCurrency (balance, currency) {\n  const currencySign = getCurrencySign(currency)\n  if (balance < 0) {\n    return '-' + currencySign + Math.abs(balance).toString()\n  } else {\n    return currencySign + balance.toString()\n  }\n}\n\n// helper function to return sign of account\n\n// helper function to return account type name to be displayed\nexport function getAccountType (accountTypeString) {\n  switch (accountTypeString) {\n    case 'checking-account':\n      return 'Checking Account'\n    case 'savings-account':\n      return 'Savings Account'\n    case 'cash':\n      return 'Cash'\n    case 'credit-card':\n      return 'Credit Card'\n    default:\n      return ''\n  }\n}\n\n// helper function to return sign of currency\nexport function getCurrencySign (currencyString) {\n  switch (currencyString) {\n    case 'USD':\n      return '$'\n    case 'INR':\n      return ''\n    case 'EUR':\n      return ''\n    default:\n      return ''\n  }\n}\n","/*!\n * Chart.js v4.0.1\n * https://www.chartjs.org\n * (c) 2022 Chart.js Contributors\n * Released under the MIT License\n */\nimport { r as requestAnimFrame, a as resolve, e as effects, c as color, i as isObject, d as defaults, b as isArray, v as valueOrDefault, u as unlistenArrayEvents, l as listenArrayEvents, f as resolveObjectKey, g as isNumberFinite, h as defined, s as sign, j as createContext, k as isNullOrUndef, _ as _arrayUnique, t as toRadians, T as TAU, m as toPercentage, n as toDimension, o as formatNumber, p as _angleBetween, H as HALF_PI, P as PI, q as _getStartAndCountOfVisiblePoints, w as _scaleRangesChanged, x as isNumber, y as _parseObjectDataRadialScale, z as getRelativePosition, A as _rlookupByKey, B as _lookupByKey, C as _isPointInArea, D as getAngleFromPoint, E as toPadding, F as each, G as getMaximumSize, I as _getParentNode, J as readUsedSize, K as supportsEventListenerOptions, L as throttled, M as _isDomSupported, N as _factorize, O as finiteOrDefault, Q as callback, R as _addGrace, S as _limitValue, U as toDegrees, V as _measureText, W as _int16Range, X as _alignPixel, Y as clipArea, Z as renderText, $ as unclipArea, a0 as toFont, a1 as _toLeftRightCenter, a2 as _alignStartEnd, a3 as overrides, a4 as merge, a5 as _capitalize, a6 as descriptors, a7 as isFunction, a8 as _attachContext, a9 as _createResolver, aa as _descriptors, ab as mergeIf, ac as uid, ad as debounce, ae as retinaScale, af as clearCanvas, ag as setsEqual, ah as _elementsEqual, ai as _isClickEvent, aj as _isBetween, ak as _readValueToProps, al as _updateBezierControlPoints, am as _computeSegments, an as _boundSegments, ao as _steppedInterpolation, ap as _bezierInterpolation, aq as _pointInLine, ar as _steppedLineTo, as as _bezierCurveTo, at as drawPoint, au as addRoundedRectPath, av as toTRBL, aw as toTRBLCorners, ax as _boundSegment, ay as _normalizeAngle, az as getRtlAdapter, aA as overrideTextDirection, aB as _textX, aC as restoreTextDirection, aD as drawPointLegend, aE as distanceBetweenPoints, aF as noop, aG as _setMinAndMaxByKey, aH as niceNum, aI as almostWhole, aJ as almostEquals, aK as _decimalPlaces, aL as Ticks, aM as log10, aN as _longestText, aO as _filterBetween, aP as _lookup } from './chunks/helpers.segment.js';\nexport { aL as Ticks, d as defaults } from './chunks/helpers.segment.js';\n\nclass Animator {\n    constructor(){\n        this._request = null;\n        this._charts = new Map();\n        this._running = false;\n        this._lastDate = undefined;\n    }\n _notify(chart, anims, date, type) {\n        const callbacks = anims.listeners[type];\n        const numSteps = anims.duration;\n        callbacks.forEach((fn)=>fn({\n                chart,\n                initial: anims.initial,\n                numSteps,\n                currentStep: Math.min(date - anims.start, numSteps)\n            }));\n    }\n _refresh() {\n        if (this._request) {\n            return;\n        }\n        this._running = true;\n        this._request = requestAnimFrame.call(window, ()=>{\n            this._update();\n            this._request = null;\n            if (this._running) {\n                this._refresh();\n            }\n        });\n    }\n _update(date = Date.now()) {\n        let remaining = 0;\n        this._charts.forEach((anims, chart)=>{\n            if (!anims.running || !anims.items.length) {\n                return;\n            }\n            const items = anims.items;\n            let i = items.length - 1;\n            let draw = false;\n            let item;\n            for(; i >= 0; --i){\n                item = items[i];\n                if (item._active) {\n                    if (item._total > anims.duration) {\n                        anims.duration = item._total;\n                    }\n                    item.tick(date);\n                    draw = true;\n                } else {\n                    items[i] = items[items.length - 1];\n                    items.pop();\n                }\n            }\n            if (draw) {\n                chart.draw();\n                this._notify(chart, anims, date, 'progress');\n            }\n            if (!items.length) {\n                anims.running = false;\n                this._notify(chart, anims, date, 'complete');\n                anims.initial = false;\n            }\n            remaining += items.length;\n        });\n        this._lastDate = date;\n        if (remaining === 0) {\n            this._running = false;\n        }\n    }\n _getAnims(chart) {\n        const charts = this._charts;\n        let anims = charts.get(chart);\n        if (!anims) {\n            anims = {\n                running: false,\n                initial: true,\n                items: [],\n                listeners: {\n                    complete: [],\n                    progress: []\n                }\n            };\n            charts.set(chart, anims);\n        }\n        return anims;\n    }\n listen(chart, event, cb) {\n        this._getAnims(chart).listeners[event].push(cb);\n    }\n add(chart, items) {\n        if (!items || !items.length) {\n            return;\n        }\n        this._getAnims(chart).items.push(...items);\n    }\n has(chart) {\n        return this._getAnims(chart).items.length > 0;\n    }\n start(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims) {\n            return;\n        }\n        anims.running = true;\n        anims.start = Date.now();\n        anims.duration = anims.items.reduce((acc, cur)=>Math.max(acc, cur._duration), 0);\n        this._refresh();\n    }\n    running(chart) {\n        if (!this._running) {\n            return false;\n        }\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.running || !anims.items.length) {\n            return false;\n        }\n        return true;\n    }\n stop(chart) {\n        const anims = this._charts.get(chart);\n        if (!anims || !anims.items.length) {\n            return;\n        }\n        const items = anims.items;\n        let i = items.length - 1;\n        for(; i >= 0; --i){\n            items[i].cancel();\n        }\n        anims.items = [];\n        this._notify(chart, anims, Date.now(), 'complete');\n    }\n remove(chart) {\n        return this._charts.delete(chart);\n    }\n}\nvar animator = /* #__PURE__ */ new Animator();\n\nconst transparent = 'transparent';\nconst interpolators = {\n    boolean (from, to, factor) {\n        return factor > 0.5 ? to : from;\n    },\n color (from, to, factor) {\n        const c0 = color(from || transparent);\n        const c1 = c0.valid && color(to || transparent);\n        return c1 && c1.valid ? c1.mix(c0, factor).hexString() : to;\n    },\n    number (from, to, factor) {\n        return from + (to - from) * factor;\n    }\n};\nclass Animation {\n    constructor(cfg, target, prop, to){\n        const currentValue = target[prop];\n        to = resolve([\n            cfg.to,\n            to,\n            currentValue,\n            cfg.from\n        ]);\n        const from = resolve([\n            cfg.from,\n            currentValue,\n            to\n        ]);\n        this._active = true;\n        this._fn = cfg.fn || interpolators[cfg.type || typeof from];\n        this._easing = effects[cfg.easing] || effects.linear;\n        this._start = Math.floor(Date.now() + (cfg.delay || 0));\n        this._duration = this._total = Math.floor(cfg.duration);\n        this._loop = !!cfg.loop;\n        this._target = target;\n        this._prop = prop;\n        this._from = from;\n        this._to = to;\n        this._promises = undefined;\n    }\n    active() {\n        return this._active;\n    }\n    update(cfg, to, date) {\n        if (this._active) {\n            this._notify(false);\n            const currentValue = this._target[this._prop];\n            const elapsed = date - this._start;\n            const remain = this._duration - elapsed;\n            this._start = date;\n            this._duration = Math.floor(Math.max(remain, cfg.duration));\n            this._total += elapsed;\n            this._loop = !!cfg.loop;\n            this._to = resolve([\n                cfg.to,\n                to,\n                currentValue,\n                cfg.from\n            ]);\n            this._from = resolve([\n                cfg.from,\n                currentValue,\n                to\n            ]);\n        }\n    }\n    cancel() {\n        if (this._active) {\n            this.tick(Date.now());\n            this._active = false;\n            this._notify(false);\n        }\n    }\n    tick(date) {\n        const elapsed = date - this._start;\n        const duration = this._duration;\n        const prop = this._prop;\n        const from = this._from;\n        const loop = this._loop;\n        const to = this._to;\n        let factor;\n        this._active = from !== to && (loop || elapsed < duration);\n        if (!this._active) {\n            this._target[prop] = to;\n            this._notify(true);\n            return;\n        }\n        if (elapsed < 0) {\n            this._target[prop] = from;\n            return;\n        }\n        factor = elapsed / duration % 2;\n        factor = loop && factor > 1 ? 2 - factor : factor;\n        factor = this._easing(Math.min(1, Math.max(0, factor)));\n        this._target[prop] = this._fn(from, to, factor);\n    }\n    wait() {\n        const promises = this._promises || (this._promises = []);\n        return new Promise((res, rej)=>{\n            promises.push({\n                res,\n                rej\n            });\n        });\n    }\n    _notify(resolved) {\n        const method = resolved ? 'res' : 'rej';\n        const promises = this._promises || [];\n        for(let i = 0; i < promises.length; i++){\n            promises[i][method]();\n        }\n    }\n}\n\nclass Animations {\n    constructor(chart, config){\n        this._chart = chart;\n        this._properties = new Map();\n        this.configure(config);\n    }\n    configure(config) {\n        if (!isObject(config)) {\n            return;\n        }\n        const animationOptions = Object.keys(defaults.animation);\n        const animatedProps = this._properties;\n        Object.getOwnPropertyNames(config).forEach((key)=>{\n            const cfg = config[key];\n            if (!isObject(cfg)) {\n                return;\n            }\n            const resolved = {};\n            for (const option of animationOptions){\n                resolved[option] = cfg[option];\n            }\n            (isArray(cfg.properties) && cfg.properties || [\n                key\n            ]).forEach((prop)=>{\n                if (prop === key || !animatedProps.has(prop)) {\n                    animatedProps.set(prop, resolved);\n                }\n            });\n        });\n    }\n _animateOptions(target, values) {\n        const newOptions = values.options;\n        const options = resolveTargetOptions(target, newOptions);\n        if (!options) {\n            return [];\n        }\n        const animations = this._createAnimations(options, newOptions);\n        if (newOptions.$shared) {\n            awaitAll(target.options.$animations, newOptions).then(()=>{\n                target.options = newOptions;\n            }, ()=>{\n            });\n        }\n        return animations;\n    }\n _createAnimations(target, values) {\n        const animatedProps = this._properties;\n        const animations = [];\n        const running = target.$animations || (target.$animations = {});\n        const props = Object.keys(values);\n        const date = Date.now();\n        let i;\n        for(i = props.length - 1; i >= 0; --i){\n            const prop = props[i];\n            if (prop.charAt(0) === '$') {\n                continue;\n            }\n            if (prop === 'options') {\n                animations.push(...this._animateOptions(target, values));\n                continue;\n            }\n            const value = values[prop];\n            let animation = running[prop];\n            const cfg = animatedProps.get(prop);\n            if (animation) {\n                if (cfg && animation.active()) {\n                    animation.update(cfg, value, date);\n                    continue;\n                } else {\n                    animation.cancel();\n                }\n            }\n            if (!cfg || !cfg.duration) {\n                target[prop] = value;\n                continue;\n            }\n            running[prop] = animation = new Animation(cfg, target, prop, value);\n            animations.push(animation);\n        }\n        return animations;\n    }\n update(target, values) {\n        if (this._properties.size === 0) {\n            Object.assign(target, values);\n            return;\n        }\n        const animations = this._createAnimations(target, values);\n        if (animations.length) {\n            animator.add(this._chart, animations);\n            return true;\n        }\n    }\n}function awaitAll(animations, properties) {\n    const running = [];\n    const keys = Object.keys(properties);\n    for(let i = 0; i < keys.length; i++){\n        const anim = animations[keys[i]];\n        if (anim && anim.active()) {\n            running.push(anim.wait());\n        }\n    }\n    return Promise.all(running);\n}\nfunction resolveTargetOptions(target, newOptions) {\n    if (!newOptions) {\n        return;\n    }\n    let options = target.options;\n    if (!options) {\n        target.options = newOptions;\n        return;\n    }\n    if (options.$shared) {\n        target.options = options = Object.assign({}, options, {\n            $shared: false,\n            $animations: {}\n        });\n    }\n    return options;\n}\n\nfunction scaleClip(scale, allowedOverflow) {\n    const opts = scale && scale.options || {};\n    const reverse = opts.reverse;\n    const min = opts.min === undefined ? allowedOverflow : 0;\n    const max = opts.max === undefined ? allowedOverflow : 0;\n    return {\n        start: reverse ? max : min,\n        end: reverse ? min : max\n    };\n}\nfunction defaultClip(xScale, yScale, allowedOverflow) {\n    if (allowedOverflow === false) {\n        return false;\n    }\n    const x = scaleClip(xScale, allowedOverflow);\n    const y = scaleClip(yScale, allowedOverflow);\n    return {\n        top: y.end,\n        right: x.end,\n        bottom: y.start,\n        left: x.start\n    };\n}\nfunction toClip(value) {\n    let t, r, b, l;\n    if (isObject(value)) {\n        t = value.top;\n        r = value.right;\n        b = value.bottom;\n        l = value.left;\n    } else {\n        t = r = b = l = value;\n    }\n    return {\n        top: t,\n        right: r,\n        bottom: b,\n        left: l,\n        disabled: value === false\n    };\n}\nfunction getSortedDatasetIndices(chart, filterVisible) {\n    const keys = [];\n    const metasets = chart._getSortedDatasetMetas(filterVisible);\n    let i, ilen;\n    for(i = 0, ilen = metasets.length; i < ilen; ++i){\n        keys.push(metasets[i].index);\n    }\n    return keys;\n}\nfunction applyStack(stack, value, dsIndex, options = {}) {\n    const keys = stack.keys;\n    const singleMode = options.mode === 'single';\n    let i, ilen, datasetIndex, otherValue;\n    if (value === null) {\n        return;\n    }\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        datasetIndex = +keys[i];\n        if (datasetIndex === dsIndex) {\n            if (options.all) {\n                continue;\n            }\n            break;\n        }\n        otherValue = stack.values[datasetIndex];\n        if (isNumberFinite(otherValue) && (singleMode || value === 0 || sign(value) === sign(otherValue))) {\n            value += otherValue;\n        }\n    }\n    return value;\n}\nfunction convertObjectDataToArray(data) {\n    const keys = Object.keys(data);\n    const adata = new Array(keys.length);\n    let i, ilen, key;\n    for(i = 0, ilen = keys.length; i < ilen; ++i){\n        key = keys[i];\n        adata[i] = {\n            x: key,\n            y: data[key]\n        };\n    }\n    return adata;\n}\nfunction isStacked(scale, meta) {\n    const stacked = scale && scale.options.stacked;\n    return stacked || stacked === undefined && meta.stack !== undefined;\n}\nfunction getStackKey(indexScale, valueScale, meta) {\n    return `${indexScale.id}.${valueScale.id}.${meta.stack || meta.type}`;\n}\nfunction getUserBounds(scale) {\n    const { min , max , minDefined , maxDefined  } = scale.getUserBounds();\n    return {\n        min: minDefined ? min : Number.NEGATIVE_INFINITY,\n        max: maxDefined ? max : Number.POSITIVE_INFINITY\n    };\n}\nfunction getOrCreateStack(stacks, stackKey, indexValue) {\n    const subStack = stacks[stackKey] || (stacks[stackKey] = {});\n    return subStack[indexValue] || (subStack[indexValue] = {});\n}\nfunction getLastIndexInStack(stack, vScale, positive, type) {\n    for (const meta of vScale.getMatchingVisibleMetas(type).reverse()){\n        const value = stack[meta.index];\n        if (positive && value > 0 || !positive && value < 0) {\n            return meta.index;\n        }\n    }\n    return null;\n}\nfunction updateStacks(controller, parsed) {\n    const { chart , _cachedMeta: meta  } = controller;\n    const stacks = chart._stacks || (chart._stacks = {});\n    const { iScale , vScale , index: datasetIndex  } = meta;\n    const iAxis = iScale.axis;\n    const vAxis = vScale.axis;\n    const key = getStackKey(iScale, vScale, meta);\n    const ilen = parsed.length;\n    let stack;\n    for(let i = 0; i < ilen; ++i){\n        const item = parsed[i];\n        const { [iAxis]: index , [vAxis]: value  } = item;\n        const itemStacks = item._stacks || (item._stacks = {});\n        stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, index);\n        stack[datasetIndex] = value;\n        stack._top = getLastIndexInStack(stack, vScale, true, meta.type);\n        stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);\n    }\n}\nfunction getFirstScaleId(chart, axis) {\n    const scales = chart.scales;\n    return Object.keys(scales).filter((key)=>scales[key].axis === axis).shift();\n}\nfunction createDatasetContext(parent, index) {\n    return createContext(parent, {\n        active: false,\n        dataset: undefined,\n        datasetIndex: index,\n        index,\n        mode: 'default',\n        type: 'dataset'\n    });\n}\nfunction createDataContext(parent, index, element) {\n    return createContext(parent, {\n        active: false,\n        dataIndex: index,\n        parsed: undefined,\n        raw: undefined,\n        element,\n        index,\n        mode: 'default',\n        type: 'data'\n    });\n}\nfunction clearStacks(meta, items) {\n    const datasetIndex = meta.controller.index;\n    const axis = meta.vScale && meta.vScale.axis;\n    if (!axis) {\n        return;\n    }\n    items = items || meta._parsed;\n    for (const parsed of items){\n        const stacks = parsed._stacks;\n        if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {\n            return;\n        }\n        delete stacks[axis][datasetIndex];\n    }\n}\nconst isDirectUpdateMode = (mode)=>mode === 'reset' || mode === 'none';\nconst cloneIfNotShared = (cached, shared)=>shared ? cached : Object.assign({}, cached);\nconst createStack = (canStack, meta, chart)=>canStack && !meta.hidden && meta._stacked && {\n        keys: getSortedDatasetIndices(chart, true),\n        values: null\n    };\nclass DatasetController {\n static defaults = {};\n static datasetElementType = null;\n static dataElementType = null;\n constructor(chart, datasetIndex){\n        this.chart = chart;\n        this._ctx = chart.ctx;\n        this.index = datasetIndex;\n        this._cachedDataOpts = {};\n        this._cachedMeta = this.getMeta();\n        this._type = this._cachedMeta.type;\n        this.options = undefined;\n         this._parsing = false;\n        this._data = undefined;\n        this._objectData = undefined;\n        this._sharedOptions = undefined;\n        this._drawStart = undefined;\n        this._drawCount = undefined;\n        this.enableOptionSharing = false;\n        this.supportsDecimation = false;\n        this.$context = undefined;\n        this._syncList = [];\n        this.datasetElementType = new.target.datasetElementType;\n        this.dataElementType = new.target.dataElementType;\n        this.initialize();\n    }\n    initialize() {\n        const meta = this._cachedMeta;\n        this.configure();\n        this.linkScales();\n        meta._stacked = isStacked(meta.vScale, meta);\n        this.addElements();\n        if (this.options.fill && !this.chart.isPluginEnabled('filler')) {\n            console.warn(\"Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options\");\n        }\n    }\n    updateIndex(datasetIndex) {\n        if (this.index !== datasetIndex) {\n            clearStacks(this._cachedMeta);\n        }\n        this.index = datasetIndex;\n    }\n    linkScales() {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        const chooseId = (axis, x, y, r)=>axis === 'x' ? x : axis === 'r' ? r : y;\n        const xid = meta.xAxisID = valueOrDefault(dataset.xAxisID, getFirstScaleId(chart, 'x'));\n        const yid = meta.yAxisID = valueOrDefault(dataset.yAxisID, getFirstScaleId(chart, 'y'));\n        const rid = meta.rAxisID = valueOrDefault(dataset.rAxisID, getFirstScaleId(chart, 'r'));\n        const indexAxis = meta.indexAxis;\n        const iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);\n        const vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);\n        meta.xScale = this.getScaleForId(xid);\n        meta.yScale = this.getScaleForId(yid);\n        meta.rScale = this.getScaleForId(rid);\n        meta.iScale = this.getScaleForId(iid);\n        meta.vScale = this.getScaleForId(vid);\n    }\n    getDataset() {\n        return this.chart.data.datasets[this.index];\n    }\n    getMeta() {\n        return this.chart.getDatasetMeta(this.index);\n    }\n getScaleForId(scaleID) {\n        return this.chart.scales[scaleID];\n    }\n _getOtherScale(scale) {\n        const meta = this._cachedMeta;\n        return scale === meta.iScale ? meta.vScale : meta.iScale;\n    }\n    reset() {\n        this._update('reset');\n    }\n _destroy() {\n        const meta = this._cachedMeta;\n        if (this._data) {\n            unlistenArrayEvents(this._data, this);\n        }\n        if (meta._stacked) {\n            clearStacks(meta);\n        }\n    }\n _dataCheck() {\n        const dataset = this.getDataset();\n        const data = dataset.data || (dataset.data = []);\n        const _data = this._data;\n        if (isObject(data)) {\n            this._data = convertObjectDataToArray(data);\n        } else if (_data !== data) {\n            if (_data) {\n                unlistenArrayEvents(_data, this);\n                const meta = this._cachedMeta;\n                clearStacks(meta);\n                meta._parsed = [];\n            }\n            if (data && Object.isExtensible(data)) {\n                listenArrayEvents(data, this);\n            }\n            this._syncList = [];\n            this._data = data;\n        }\n    }\n    addElements() {\n        const meta = this._cachedMeta;\n        this._dataCheck();\n        if (this.datasetElementType) {\n            meta.dataset = new this.datasetElementType();\n        }\n    }\n    buildOrUpdateElements(resetNewElements) {\n        const meta = this._cachedMeta;\n        const dataset = this.getDataset();\n        let stackChanged = false;\n        this._dataCheck();\n        const oldStacked = meta._stacked;\n        meta._stacked = isStacked(meta.vScale, meta);\n        if (meta.stack !== dataset.stack) {\n            stackChanged = true;\n            clearStacks(meta);\n            meta.stack = dataset.stack;\n        }\n        this._resyncElements(resetNewElements);\n        if (stackChanged || oldStacked !== meta._stacked) {\n            updateStacks(this, meta._parsed);\n        }\n    }\n configure() {\n        const config = this.chart.config;\n        const scopeKeys = config.datasetScopeKeys(this._type);\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);\n        this.options = config.createResolver(scopes, this.getContext());\n        this._parsing = this.options.parsing;\n        this._cachedDataOpts = {};\n    }\n parse(start, count) {\n        const { _cachedMeta: meta , _data: data  } = this;\n        const { iScale , _stacked  } = meta;\n        const iAxis = iScale.axis;\n        let sorted = start === 0 && count === data.length ? true : meta._sorted;\n        let prev = start > 0 && meta._parsed[start - 1];\n        let i, cur, parsed;\n        if (this._parsing === false) {\n            meta._parsed = data;\n            meta._sorted = true;\n            parsed = data;\n        } else {\n            if (isArray(data[start])) {\n                parsed = this.parseArrayData(meta, data, start, count);\n            } else if (isObject(data[start])) {\n                parsed = this.parseObjectData(meta, data, start, count);\n            } else {\n                parsed = this.parsePrimitiveData(meta, data, start, count);\n            }\n            const isNotInOrderComparedToPrev = ()=>cur[iAxis] === null || prev && cur[iAxis] < prev[iAxis];\n            for(i = 0; i < count; ++i){\n                meta._parsed[i + start] = cur = parsed[i];\n                if (sorted) {\n                    if (isNotInOrderComparedToPrev()) {\n                        sorted = false;\n                    }\n                    prev = cur;\n                }\n            }\n            meta._sorted = sorted;\n        }\n        if (_stacked) {\n            updateStacks(this, parsed);\n        }\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const labels = iScale.getLabels();\n        const singleScale = iScale === vScale;\n        const parsed = new Array(count);\n        let i, ilen, index;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            parsed[i] = {\n                [iAxis]: singleScale || iScale.parse(labels[index], index),\n                [vAxis]: vScale.parse(data[index], index)\n            };\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(item[0], index),\n                y: yScale.parse(item[1], index)\n            };\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const { xScale , yScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const parsed = new Array(count);\n        let i, ilen, index, item;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            index = i + start;\n            item = data[index];\n            parsed[i] = {\n                x: xScale.parse(resolveObjectKey(item, xAxisKey), index),\n                y: yScale.parse(resolveObjectKey(item, yAxisKey), index)\n            };\n        }\n        return parsed;\n    }\n getParsed(index) {\n        return this._cachedMeta._parsed[index];\n    }\n getDataElement(index) {\n        return this._cachedMeta.data[index];\n    }\n applyStack(scale, parsed, mode) {\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const value = parsed[scale.axis];\n        const stack = {\n            keys: getSortedDatasetIndices(chart, true),\n            values: parsed._stacks[scale.axis]\n        };\n        return applyStack(stack, value, meta.index, {\n            mode\n        });\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        const parsedValue = parsed[scale.axis];\n        let value = parsedValue === null ? NaN : parsedValue;\n        const values = stack && parsed._stacks[scale.axis];\n        if (stack && values) {\n            stack.values = values;\n            value = applyStack(stack, parsedValue, this._cachedMeta.index);\n        }\n        range.min = Math.min(range.min, value);\n        range.max = Math.max(range.max, value);\n    }\n getMinMax(scale, canStack) {\n        const meta = this._cachedMeta;\n        const _parsed = meta._parsed;\n        const sorted = meta._sorted && scale === meta.iScale;\n        const ilen = _parsed.length;\n        const otherScale = this._getOtherScale(scale);\n        const stack = createStack(canStack, meta, this.chart);\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        const { min: otherMin , max: otherMax  } = getUserBounds(otherScale);\n        let i, parsed;\n        function _skip() {\n            parsed = _parsed[i];\n            const otherValue = parsed[otherScale.axis];\n            return !isNumberFinite(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;\n        }\n        for(i = 0; i < ilen; ++i){\n            if (_skip()) {\n                continue;\n            }\n            this.updateRangeFromParsed(range, scale, parsed, stack);\n            if (sorted) {\n                break;\n            }\n        }\n        if (sorted) {\n            for(i = ilen - 1; i >= 0; --i){\n                if (_skip()) {\n                    continue;\n                }\n                this.updateRangeFromParsed(range, scale, parsed, stack);\n                break;\n            }\n        }\n        return range;\n    }\n    getAllParsedValues(scale) {\n        const parsed = this._cachedMeta._parsed;\n        const values = [];\n        let i, ilen, value;\n        for(i = 0, ilen = parsed.length; i < ilen; ++i){\n            value = parsed[i][scale.axis];\n            if (isNumberFinite(value)) {\n                values.push(value);\n            }\n        }\n        return values;\n    }\n getMaxOverflow() {\n        return false;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const vScale = meta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',\n            value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''\n        };\n    }\n _update(mode) {\n        const meta = this._cachedMeta;\n        this.update(mode || 'default');\n        meta._clip = toClip(valueOrDefault(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));\n    }\n update(mode) {}\n    draw() {\n        const ctx = this._ctx;\n        const chart = this.chart;\n        const meta = this._cachedMeta;\n        const elements = meta.data || [];\n        const area = chart.chartArea;\n        const active = [];\n        const start = this._drawStart || 0;\n        const count = this._drawCount || elements.length - start;\n        const drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;\n        let i;\n        if (meta.dataset) {\n            meta.dataset.draw(ctx, area, start, count);\n        }\n        for(i = start; i < start + count; ++i){\n            const element = elements[i];\n            if (element.hidden) {\n                continue;\n            }\n            if (element.active && drawActiveElementsOnTop) {\n                active.push(element);\n            } else {\n                element.draw(ctx, area);\n            }\n        }\n        for(i = 0; i < active.length; ++i){\n            active[i].draw(ctx, area);\n        }\n    }\n getStyle(index, active) {\n        const mode = active ? 'active' : 'default';\n        return index === undefined && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(mode) : this.resolveDataElementOptions(index || 0, mode);\n    }\n getContext(index, active, mode) {\n        const dataset = this.getDataset();\n        let context;\n        if (index >= 0 && index < this._cachedMeta.data.length) {\n            const element = this._cachedMeta.data[index];\n            context = element.$context || (element.$context = createDataContext(this.getContext(), index, element));\n            context.parsed = this.getParsed(index);\n            context.raw = dataset.data[index];\n            context.index = context.dataIndex = index;\n        } else {\n            context = this.$context || (this.$context = createDatasetContext(this.chart.getContext(), this.index));\n            context.dataset = dataset;\n            context.index = context.datasetIndex = this.index;\n        }\n        context.active = !!active;\n        context.mode = mode;\n        return context;\n    }\n resolveDatasetElementOptions(mode) {\n        return this._resolveElementOptions(this.datasetElementType.id, mode);\n    }\n resolveDataElementOptions(index, mode) {\n        return this._resolveElementOptions(this.dataElementType.id, mode, index);\n    }\n _resolveElementOptions(elementType, mode = 'default', index) {\n        const active = mode === 'active';\n        const cache = this._cachedDataOpts;\n        const cacheKey = elementType + '-' + mode;\n        const cached = cache[cacheKey];\n        const sharing = this.enableOptionSharing && defined(index);\n        if (cached) {\n            return cloneIfNotShared(cached, sharing);\n        }\n        const config = this.chart.config;\n        const scopeKeys = config.datasetElementScopeKeys(this._type, elementType);\n        const prefixes = active ? [\n            `${elementType}Hover`,\n            'hover',\n            elementType,\n            ''\n        ] : [\n            elementType,\n            ''\n        ];\n        const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n        const names = Object.keys(defaults.elements[elementType]);\n        const context = ()=>this.getContext(index, active);\n        const values = config.resolveNamedOptions(scopes, names, context, prefixes);\n        if (values.$shared) {\n            values.$shared = sharing;\n            cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));\n        }\n        return values;\n    }\n _resolveAnimations(index, transition, active) {\n        const chart = this.chart;\n        const cache = this._cachedDataOpts;\n        const cacheKey = `animation-${transition}`;\n        const cached = cache[cacheKey];\n        if (cached) {\n            return cached;\n        }\n        let options;\n        if (chart.options.animation !== false) {\n            const config = this.chart.config;\n            const scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);\n            const scopes = config.getOptionScopes(this.getDataset(), scopeKeys);\n            options = config.createResolver(scopes, this.getContext(index, active, transition));\n        }\n        const animations = new Animations(chart, options && options.animations);\n        if (options && options._cacheable) {\n            cache[cacheKey] = Object.freeze(animations);\n        }\n        return animations;\n    }\n getSharedOptions(options) {\n        if (!options.$shared) {\n            return;\n        }\n        return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));\n    }\n includeOptions(mode, sharedOptions) {\n        return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;\n    }\n _getSharedOptions(start, mode) {\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const previouslySharedOptions = this._sharedOptions;\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions) || sharedOptions !== previouslySharedOptions;\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n        return {\n            sharedOptions,\n            includeOptions\n        };\n    }\n updateElement(element, index, properties, mode) {\n        if (isDirectUpdateMode(mode)) {\n            Object.assign(element, properties);\n        } else {\n            this._resolveAnimations(index, mode).update(element, properties);\n        }\n    }\n updateSharedOptions(sharedOptions, mode, newOptions) {\n        if (sharedOptions && !isDirectUpdateMode(mode)) {\n            this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);\n        }\n    }\n _setStyle(element, index, mode, active) {\n        element.active = active;\n        const options = this.getStyle(index, active);\n        this._resolveAnimations(index, mode, active).update(element, {\n            options: !active && this.getSharedOptions(options) || options\n        });\n    }\n    removeHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', false);\n    }\n    setHoverStyle(element, datasetIndex, index) {\n        this._setStyle(element, index, 'active', true);\n    }\n _removeDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', false);\n        }\n    }\n _setDatasetHoverStyle() {\n        const element = this._cachedMeta.dataset;\n        if (element) {\n            this._setStyle(element, undefined, 'active', true);\n        }\n    }\n _resyncElements(resetNewElements) {\n        const data = this._data;\n        const elements = this._cachedMeta.data;\n        for (const [method, arg1, arg2] of this._syncList){\n            this[method](arg1, arg2);\n        }\n        this._syncList = [];\n        const numMeta = elements.length;\n        const numData = data.length;\n        const count = Math.min(numData, numMeta);\n        if (count) {\n            this.parse(0, count);\n        }\n        if (numData > numMeta) {\n            this._insertElements(numMeta, numData - numMeta, resetNewElements);\n        } else if (numData < numMeta) {\n            this._removeElements(numData, numMeta - numData);\n        }\n    }\n _insertElements(start, count, resetNewElements = true) {\n        const meta = this._cachedMeta;\n        const data = meta.data;\n        const end = start + count;\n        let i;\n        const move = (arr)=>{\n            arr.length += count;\n            for(i = arr.length - 1; i >= end; i--){\n                arr[i] = arr[i - count];\n            }\n        };\n        move(data);\n        for(i = start; i < end; ++i){\n            data[i] = new this.dataElementType();\n        }\n        if (this._parsing) {\n            move(meta._parsed);\n        }\n        this.parse(start, count);\n        if (resetNewElements) {\n            this.updateElements(data, start, count, 'reset');\n        }\n    }\n    updateElements(element, start, count, mode) {}\n _removeElements(start, count) {\n        const meta = this._cachedMeta;\n        if (this._parsing) {\n            const removed = meta._parsed.splice(start, count);\n            if (meta._stacked) {\n                clearStacks(meta, removed);\n            }\n        }\n        meta.data.splice(start, count);\n    }\n _sync(args) {\n        if (this._parsing) {\n            this._syncList.push(args);\n        } else {\n            const [method, arg1, arg2] = args;\n            this[method](arg1, arg2);\n        }\n        this.chart._dataChanges.push([\n            this.index,\n            ...args\n        ]);\n    }\n    _onDataPush() {\n        const count = arguments.length;\n        this._sync([\n            '_insertElements',\n            this.getDataset().data.length - count,\n            count\n        ]);\n    }\n    _onDataPop() {\n        this._sync([\n            '_removeElements',\n            this._cachedMeta.data.length - 1,\n            1\n        ]);\n    }\n    _onDataShift() {\n        this._sync([\n            '_removeElements',\n            0,\n            1\n        ]);\n    }\n    _onDataSplice(start, count) {\n        if (count) {\n            this._sync([\n                '_removeElements',\n                start,\n                count\n            ]);\n        }\n        const newCount = arguments.length - 2;\n        if (newCount) {\n            this._sync([\n                '_insertElements',\n                start,\n                newCount\n            ]);\n        }\n    }\n    _onDataUnshift() {\n        this._sync([\n            '_insertElements',\n            0,\n            arguments.length\n        ]);\n    }\n}\n\nfunction getAllScaleValues(scale, type) {\n    if (!scale._cache.$bar) {\n        const visibleMetas = scale.getMatchingVisibleMetas(type);\n        let values = [];\n        for(let i = 0, ilen = visibleMetas.length; i < ilen; i++){\n            values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));\n        }\n        scale._cache.$bar = _arrayUnique(values.sort((a, b)=>a - b));\n    }\n    return scale._cache.$bar;\n}\n function computeMinSampleSize(meta) {\n    const scale = meta.iScale;\n    const values = getAllScaleValues(scale, meta.type);\n    let min = scale._length;\n    let i, ilen, curr, prev;\n    const updateMinAndPrev = ()=>{\n        if (curr === 32767 || curr === -32768) {\n            return;\n        }\n        if (defined(prev)) {\n            min = Math.min(min, Math.abs(curr - prev) || min);\n        }\n        prev = curr;\n    };\n    for(i = 0, ilen = values.length; i < ilen; ++i){\n        curr = scale.getPixelForValue(values[i]);\n        updateMinAndPrev();\n    }\n    prev = undefined;\n    for(i = 0, ilen = scale.ticks.length; i < ilen; ++i){\n        curr = scale.getPixelForTick(i);\n        updateMinAndPrev();\n    }\n    return min;\n}\n function computeFitCategoryTraits(index, ruler, options, stackCount) {\n    const thickness = options.barThickness;\n    let size, ratio;\n    if (isNullOrUndef(thickness)) {\n        size = ruler.min * options.categoryPercentage;\n        ratio = options.barPercentage;\n    } else {\n        size = thickness * stackCount;\n        ratio = 1;\n    }\n    return {\n        chunk: size / stackCount,\n        ratio,\n        start: ruler.pixels[index] - size / 2\n    };\n}\n function computeFlexCategoryTraits(index, ruler, options, stackCount) {\n    const pixels = ruler.pixels;\n    const curr = pixels[index];\n    let prev = index > 0 ? pixels[index - 1] : null;\n    let next = index < pixels.length - 1 ? pixels[index + 1] : null;\n    const percent = options.categoryPercentage;\n    if (prev === null) {\n        prev = curr - (next === null ? ruler.end - ruler.start : next - curr);\n    }\n    if (next === null) {\n        next = curr + curr - prev;\n    }\n    const start = curr - (curr - Math.min(prev, next)) / 2 * percent;\n    const size = Math.abs(next - prev) / 2 * percent;\n    return {\n        chunk: size / stackCount,\n        ratio: options.barPercentage,\n        start\n    };\n}\nfunction parseFloatBar(entry, item, vScale, i) {\n    const startValue = vScale.parse(entry[0], i);\n    const endValue = vScale.parse(entry[1], i);\n    const min = Math.min(startValue, endValue);\n    const max = Math.max(startValue, endValue);\n    let barStart = min;\n    let barEnd = max;\n    if (Math.abs(min) > Math.abs(max)) {\n        barStart = max;\n        barEnd = min;\n    }\n    item[vScale.axis] = barEnd;\n    item._custom = {\n        barStart,\n        barEnd,\n        start: startValue,\n        end: endValue,\n        min,\n        max\n    };\n}\nfunction parseValue(entry, item, vScale, i) {\n    if (isArray(entry)) {\n        parseFloatBar(entry, item, vScale, i);\n    } else {\n        item[vScale.axis] = vScale.parse(entry, i);\n    }\n    return item;\n}\nfunction parseArrayOrPrimitive(meta, data, start, count) {\n    const iScale = meta.iScale;\n    const vScale = meta.vScale;\n    const labels = iScale.getLabels();\n    const singleScale = iScale === vScale;\n    const parsed = [];\n    let i, ilen, item, entry;\n    for(i = start, ilen = start + count; i < ilen; ++i){\n        entry = data[i];\n        item = {};\n        item[iScale.axis] = singleScale || iScale.parse(labels[i], i);\n        parsed.push(parseValue(entry, item, vScale, i));\n    }\n    return parsed;\n}\nfunction isFloatBar(custom) {\n    return custom && custom.barStart !== undefined && custom.barEnd !== undefined;\n}\nfunction barSign(size, vScale, actualBase) {\n    if (size !== 0) {\n        return sign(size);\n    }\n    return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);\n}\nfunction borderProps(properties) {\n    let reverse, start, end, top, bottom;\n    if (properties.horizontal) {\n        reverse = properties.base > properties.x;\n        start = 'left';\n        end = 'right';\n    } else {\n        reverse = properties.base < properties.y;\n        start = 'bottom';\n        end = 'top';\n    }\n    if (reverse) {\n        top = 'end';\n        bottom = 'start';\n    } else {\n        top = 'start';\n        bottom = 'end';\n    }\n    return {\n        start,\n        end,\n        reverse,\n        top,\n        bottom\n    };\n}\nfunction setBorderSkipped(properties, options, stack, index) {\n    let edge = options.borderSkipped;\n    const res = {};\n    if (!edge) {\n        properties.borderSkipped = res;\n        return;\n    }\n    if (edge === true) {\n        properties.borderSkipped = {\n            top: true,\n            right: true,\n            bottom: true,\n            left: true\n        };\n        return;\n    }\n    const { start , end , reverse , top , bottom  } = borderProps(properties);\n    if (edge === 'middle' && stack) {\n        properties.enableBorderRadius = true;\n        if ((stack._top || 0) === index) {\n            edge = top;\n        } else if ((stack._bottom || 0) === index) {\n            edge = bottom;\n        } else {\n            res[parseEdge(bottom, start, end, reverse)] = true;\n            edge = top;\n        }\n    }\n    res[parseEdge(edge, start, end, reverse)] = true;\n    properties.borderSkipped = res;\n}\nfunction parseEdge(edge, a, b, reverse) {\n    if (reverse) {\n        edge = swap(edge, a, b);\n        edge = startEnd(edge, b, a);\n    } else {\n        edge = startEnd(edge, a, b);\n    }\n    return edge;\n}\nfunction swap(orig, v1, v2) {\n    return orig === v1 ? v2 : orig === v2 ? v1 : orig;\n}\nfunction startEnd(v, start, end) {\n    return v === 'start' ? start : v === 'end' ? end : v;\n}\nfunction setInflateAmount(properties, { inflateAmount  }, ratio) {\n    properties.inflateAmount = inflateAmount === 'auto' ? ratio === 1 ? 0.33 : 0 : inflateAmount;\n}\nclass BarController extends DatasetController {\n    static id = 'bar';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'bar',\n        categoryPercentage: 0.8,\n        barPercentage: 0.9,\n        grouped: true,\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'base',\n                    'width',\n                    'height'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category',\n                offset: true,\n                grid: {\n                    offset: true\n                }\n            },\n            _value_: {\n                type: 'linear',\n                beginAtZero: true\n            }\n        }\n    };\n parsePrimitiveData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseArrayData(meta, data, start, count) {\n        return parseArrayOrPrimitive(meta, data, start, count);\n    }\n parseObjectData(meta, data, start, count) {\n        const { iScale , vScale  } = meta;\n        const { xAxisKey ='x' , yAxisKey ='y'  } = this._parsing;\n        const iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;\n        const parsed = [];\n        let i, ilen, item, obj;\n        for(i = start, ilen = start + count; i < ilen; ++i){\n            obj = data[i];\n            item = {};\n            item[iScale.axis] = iScale.parse(resolveObjectKey(obj, iAxisKey), i);\n            parsed.push(parseValue(resolveObjectKey(obj, vAxisKey), item, vScale, i));\n        }\n        return parsed;\n    }\n updateRangeFromParsed(range, scale, parsed, stack) {\n        super.updateRangeFromParsed(range, scale, parsed, stack);\n        const custom = parsed._custom;\n        if (custom && scale === this._cachedMeta.vScale) {\n            range.min = Math.min(range.min, custom.min);\n            range.max = Math.max(range.max, custom.max);\n        }\n    }\n getMaxOverflow() {\n        return 0;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const { iScale , vScale  } = meta;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const value = isFloatBar(custom) ? '[' + custom.start + ', ' + custom.end + ']' : '' + vScale.getLabelForValue(parsed[vScale.axis]);\n        return {\n            label: '' + iScale.getLabelForValue(parsed[iScale.axis]),\n            value\n        };\n    }\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n        const meta = this._cachedMeta;\n        meta.stack = this.getDataset().stack;\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        this.updateElements(meta.data, 0, meta.data.length, mode);\n    }\n    updateElements(bars, start, count, mode) {\n        const reset = mode === 'reset';\n        const { index , _cachedMeta: { vScale  }  } = this;\n        const base = vScale.getBasePixel();\n        const horizontal = vScale.isHorizontal();\n        const ruler = this._getRuler();\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        for(let i = start; i < start + count; i++){\n            const parsed = this.getParsed(i);\n            const vpixels = reset || isNullOrUndef(parsed[vScale.axis]) ? {\n                base,\n                head: base\n            } : this._calculateBarValuePixels(i);\n            const ipixels = this._calculateBarIndexPixels(i, ruler);\n            const stack = (parsed._stacks || {})[vScale.axis];\n            const properties = {\n                horizontal,\n                base: vpixels.base,\n                enableBorderRadius: !stack || isFloatBar(parsed._custom) || index === stack._top || index === stack._bottom,\n                x: horizontal ? vpixels.head : ipixels.center,\n                y: horizontal ? ipixels.center : vpixels.head,\n                height: horizontal ? ipixels.size : Math.abs(vpixels.size),\n                width: horizontal ? Math.abs(vpixels.size) : ipixels.size\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);\n            }\n            const options = properties.options || bars[i].options;\n            setBorderSkipped(properties, options, stack, index);\n            setInflateAmount(properties, options, ruler.ratio);\n            this.updateElement(bars[i], i, properties, mode);\n        }\n    }\n _getStacks(last, dataIndex) {\n        const { iScale  } = this._cachedMeta;\n        const metasets = iScale.getMatchingVisibleMetas(this._type).filter((meta)=>meta.controller.options.grouped);\n        const stacked = iScale.options.stacked;\n        const stacks = [];\n        const skipNull = (meta)=>{\n            const parsed = meta.controller.getParsed(dataIndex);\n            const val = parsed && parsed[meta.vScale.axis];\n            if (isNullOrUndef(val) || isNaN(val)) {\n                return true;\n            }\n        };\n        for (const meta of metasets){\n            if (dataIndex !== undefined && skipNull(meta)) {\n                continue;\n            }\n            if (stacked === false || stacks.indexOf(meta.stack) === -1 || stacked === undefined && meta.stack === undefined) {\n                stacks.push(meta.stack);\n            }\n            if (meta.index === last) {\n                break;\n            }\n        }\n        if (!stacks.length) {\n            stacks.push(undefined);\n        }\n        return stacks;\n    }\n _getStackCount(index) {\n        return this._getStacks(undefined, index).length;\n    }\n _getStackIndex(datasetIndex, name, dataIndex) {\n        const stacks = this._getStacks(datasetIndex, dataIndex);\n        const index = name !== undefined ? stacks.indexOf(name) : -1;\n        return index === -1 ? stacks.length - 1 : index;\n    }\n _getRuler() {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const iScale = meta.iScale;\n        const pixels = [];\n        let i, ilen;\n        for(i = 0, ilen = meta.data.length; i < ilen; ++i){\n            pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));\n        }\n        const barThickness = opts.barThickness;\n        const min = barThickness || computeMinSampleSize(meta);\n        return {\n            min,\n            pixels,\n            start: iScale._startPixel,\n            end: iScale._endPixel,\n            stackCount: this._getStackCount(),\n            scale: iScale,\n            grouped: opts.grouped,\n            ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage\n        };\n    }\n _calculateBarValuePixels(index) {\n        const { _cachedMeta: { vScale , _stacked  } , options: { base: baseValue , minBarLength  }  } = this;\n        const actualBase = baseValue || 0;\n        const parsed = this.getParsed(index);\n        const custom = parsed._custom;\n        const floating = isFloatBar(custom);\n        let value = parsed[vScale.axis];\n        let start = 0;\n        let length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;\n        let head, size;\n        if (length !== value) {\n            start = length - value;\n            length = value;\n        }\n        if (floating) {\n            value = custom.barStart;\n            length = custom.barEnd - custom.barStart;\n            if (value !== 0 && sign(value) !== sign(custom.barEnd)) {\n                start = 0;\n            }\n            start += value;\n        }\n        const startValue = !isNullOrUndef(baseValue) && !floating ? baseValue : start;\n        let base = vScale.getPixelForValue(startValue);\n        if (this.chart.getDataVisibility(index)) {\n            head = vScale.getPixelForValue(start + length);\n        } else {\n            head = base;\n        }\n        size = head - base;\n        if (Math.abs(size) < minBarLength) {\n            size = barSign(size, vScale, actualBase) * minBarLength;\n            if (value === actualBase) {\n                base -= size / 2;\n            }\n            const startPixel = vScale.getPixelForDecimal(0);\n            const endPixel = vScale.getPixelForDecimal(1);\n            const min = Math.min(startPixel, endPixel);\n            const max = Math.max(startPixel, endPixel);\n            base = Math.max(Math.min(base, max), min);\n            head = base + size;\n        }\n        if (base === vScale.getPixelForValue(actualBase)) {\n            const halfGrid = sign(size) * vScale.getLineWidthForValue(actualBase) / 2;\n            base += halfGrid;\n            size -= halfGrid;\n        }\n        return {\n            size,\n            base,\n            head,\n            center: head + size / 2\n        };\n    }\n _calculateBarIndexPixels(index, ruler) {\n        const scale = ruler.scale;\n        const options = this.options;\n        const skipNull = options.skipNull;\n        const maxBarThickness = valueOrDefault(options.maxBarThickness, Infinity);\n        let center, size;\n        if (ruler.grouped) {\n            const stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;\n            const range = options.barThickness === 'flex' ? computeFlexCategoryTraits(index, ruler, options, stackCount) : computeFitCategoryTraits(index, ruler, options, stackCount);\n            const stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);\n            center = range.start + range.chunk * stackIndex + range.chunk / 2;\n            size = Math.min(maxBarThickness, range.chunk * range.ratio);\n        } else {\n            center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);\n            size = Math.min(maxBarThickness, ruler.min * ruler.ratio);\n        }\n        return {\n            base: center - size / 2,\n            head: center + size / 2,\n            center,\n            size\n        };\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        const vScale = meta.vScale;\n        const rects = meta.data;\n        const ilen = rects.length;\n        let i = 0;\n        for(; i < ilen; ++i){\n            if (this.getParsed(i)[vScale.axis] !== null) {\n                rects[i].draw(this._ctx);\n            }\n        }\n    }\n}\n\nclass BubbleController extends DatasetController {\n    static id = 'bubble';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'borderWidth',\n                    'radius'\n                ]\n            }\n        }\n    };\n static overrides = {\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        super.initialize();\n    }\n parsePrimitiveData(meta, data, start, count) {\n        const parsed = super.parsePrimitiveData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;\n        }\n        return parsed;\n    }\n parseArrayData(meta, data, start, count) {\n        const parsed = super.parseArrayData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item[2], this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n parseObjectData(meta, data, start, count) {\n        const parsed = super.parseObjectData(meta, data, start, count);\n        for(let i = 0; i < parsed.length; i++){\n            const item = data[start + i];\n            parsed[i]._custom = valueOrDefault(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);\n        }\n        return parsed;\n    }\n getMaxOverflow() {\n        const data = this._cachedMeta.data;\n        let max = 0;\n        for(let i = data.length - 1; i >= 0; --i){\n            max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n        }\n        return max > 0 && max;\n    }\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        const r = parsed._custom;\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'\n        };\n    }\n    update(mode) {\n        const points = this._cachedMeta.data;\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const parsed = !reset && this.getParsed(i);\n            const properties = {};\n            const iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);\n            const vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel);\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n                if (reset) {\n                    properties.options.radius = 0;\n                }\n            }\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n resolveDataElementOptions(index, mode) {\n        const parsed = this.getParsed(index);\n        let values = super.resolveDataElementOptions(index, mode);\n        if (values.$shared) {\n            values = Object.assign({}, values, {\n                $shared: false\n            });\n        }\n        const radius = values.radius;\n        if (mode !== 'active') {\n            values.radius = 0;\n        }\n        values.radius += valueOrDefault(parsed && parsed._custom, radius);\n        return values;\n    }\n}\n\nfunction getRatioAndOffset(rotation, circumference, cutout) {\n    let ratioX = 1;\n    let ratioY = 1;\n    let offsetX = 0;\n    let offsetY = 0;\n    if (circumference < TAU) {\n        const startAngle = rotation;\n        const endAngle = startAngle + circumference;\n        const startX = Math.cos(startAngle);\n        const startY = Math.sin(startAngle);\n        const endX = Math.cos(endAngle);\n        const endY = Math.sin(endAngle);\n        const calcMax = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);\n        const calcMin = (angle, a, b)=>_angleBetween(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);\n        const maxX = calcMax(0, startX, endX);\n        const maxY = calcMax(HALF_PI, startY, endY);\n        const minX = calcMin(PI, startX, endX);\n        const minY = calcMin(PI + HALF_PI, startY, endY);\n        ratioX = (maxX - minX) / 2;\n        ratioY = (maxY - minY) / 2;\n        offsetX = -(maxX + minX) / 2;\n        offsetY = -(maxY + minY) / 2;\n    }\n    return {\n        ratioX,\n        ratioY,\n        offsetX,\n        offsetY\n    };\n}\nclass DoughnutController extends DatasetController {\n    static id = 'doughnut';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: false\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'circumference',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius',\n                    'startAngle',\n                    'x',\n                    'y',\n                    'offset',\n                    'borderWidth',\n                    'spacing'\n                ]\n            }\n        },\n        cutout: '50%',\n        rotation: 0,\n        circumference: 360,\n        radius: '100%',\n        spacing: 0,\n        indexAxis: 'r'\n    };\n    static descriptors = {\n        _scriptable: (name)=>name !== 'spacing',\n        _indexable: (name)=>name !== 'spacing'\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        if (data.labels.length && data.datasets.length) {\n                            const { labels: { pointStyle , color  }  } = chart.legend.options;\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    strokeStyle: style.borderColor,\n                                    fontColor: color,\n                                    lineWidth: style.borderWidth,\n                                    pointStyle: pointStyle,\n                                    hidden: !chart.getDataVisibility(i),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.enableOptionSharing = true;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.offsetX = undefined;\n        this.offsetY = undefined;\n    }\n    linkScales() {}\n parse(start, count) {\n        const data = this.getDataset().data;\n        const meta = this._cachedMeta;\n        if (this._parsing === false) {\n            meta._parsed = data;\n        } else {\n            let getter = (i)=>+data[i];\n            if (isObject(data[start])) {\n                const { key ='value'  } = this._parsing;\n                getter = (i)=>+resolveObjectKey(data[i], key);\n            }\n            let i, ilen;\n            for(i = start, ilen = start + count; i < ilen; ++i){\n                meta._parsed[i] = getter(i);\n            }\n        }\n    }\n _getRotation() {\n        return toRadians(this.options.rotation - 90);\n    }\n _getCircumference() {\n        return toRadians(this.options.circumference);\n    }\n _getRotationExtents() {\n        let min = TAU;\n        let max = -TAU;\n        for(let i = 0; i < this.chart.data.datasets.length; ++i){\n            if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {\n                const controller = this.chart.getDatasetMeta(i).controller;\n                const rotation = controller._getRotation();\n                const circumference = controller._getCircumference();\n                min = Math.min(min, rotation);\n                max = Math.max(max, rotation + circumference);\n            }\n        }\n        return {\n            rotation: min,\n            circumference: max - min\n        };\n    }\n update(mode) {\n        const chart = this.chart;\n        const { chartArea  } = chart;\n        const meta = this._cachedMeta;\n        const arcs = meta.data;\n        const spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;\n        const maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);\n        const cutout = Math.min(toPercentage(this.options.cutout, maxSize), 1);\n        const chartWeight = this._getRingWeight(this.index);\n        const { circumference , rotation  } = this._getRotationExtents();\n        const { ratioX , ratioY , offsetX , offsetY  } = getRatioAndOffset(rotation, circumference, cutout);\n        const maxWidth = (chartArea.width - spacing) / ratioX;\n        const maxHeight = (chartArea.height - spacing) / ratioY;\n        const maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);\n        const outerRadius = toDimension(this.options.radius, maxRadius);\n        const innerRadius = Math.max(outerRadius * cutout, 0);\n        const radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();\n        this.offsetX = offsetX * outerRadius;\n        this.offsetY = offsetY * outerRadius;\n        meta.total = this.calculateTotal();\n        this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);\n        this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n _circumference(i, reset) {\n        const opts = this.options;\n        const meta = this._cachedMeta;\n        const circumference = this._getCircumference();\n        if (reset && opts.animation.animateRotate || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {\n            return 0;\n        }\n        return this.calculateCircumference(meta._parsed[i] * circumference / TAU);\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const centerX = (chartArea.left + chartArea.right) / 2;\n        const centerY = (chartArea.top + chartArea.bottom) / 2;\n        const animateScale = reset && animationOpts.animateScale;\n        const innerRadius = animateScale ? 0 : this.innerRadius;\n        const outerRadius = animateScale ? 0 : this.outerRadius;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        let startAngle = this._getRotation();\n        let i;\n        for(i = 0; i < start; ++i){\n            startAngle += this._circumference(i, reset);\n        }\n        for(i = start; i < start + count; ++i){\n            const circumference = this._circumference(i, reset);\n            const arc = arcs[i];\n            const properties = {\n                x: centerX + this.offsetX,\n                y: centerY + this.offsetY,\n                startAngle,\n                endAngle: startAngle + circumference,\n                circumference,\n                outerRadius,\n                innerRadius\n            };\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);\n            }\n            startAngle += circumference;\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    calculateTotal() {\n        const meta = this._cachedMeta;\n        const metaData = meta.data;\n        let total = 0;\n        let i;\n        for(i = 0; i < metaData.length; i++){\n            const value = meta._parsed[i];\n            if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {\n                total += Math.abs(value);\n            }\n        }\n        return total;\n    }\n    calculateCircumference(value) {\n        const total = this._cachedMeta.total;\n        if (total > 0 && !isNaN(value)) {\n            return TAU * (Math.abs(value) / total);\n        }\n        return 0;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index], chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    getMaxBorderWidth(arcs) {\n        let max = 0;\n        const chart = this.chart;\n        let i, ilen, meta, controller, options;\n        if (!arcs) {\n            for(i = 0, ilen = chart.data.datasets.length; i < ilen; ++i){\n                if (chart.isDatasetVisible(i)) {\n                    meta = chart.getDatasetMeta(i);\n                    arcs = meta.data;\n                    controller = meta.controller;\n                    break;\n                }\n            }\n        }\n        if (!arcs) {\n            return 0;\n        }\n        for(i = 0, ilen = arcs.length; i < ilen; ++i){\n            options = controller.resolveDataElementOptions(i);\n            if (options.borderAlign !== 'inner') {\n                max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);\n            }\n        }\n        return max;\n    }\n    getMaxOffset(arcs) {\n        let max = 0;\n        for(let i = 0, ilen = arcs.length; i < ilen; ++i){\n            const options = this.resolveDataElementOptions(i);\n            max = Math.max(max, options.offset || 0, options.hoverOffset || 0);\n        }\n        return max;\n    }\n _getRingWeightOffset(datasetIndex) {\n        let ringWeightOffset = 0;\n        for(let i = 0; i < datasetIndex; ++i){\n            if (this.chart.isDatasetVisible(i)) {\n                ringWeightOffset += this._getRingWeight(i);\n            }\n        }\n        return ringWeightOffset;\n    }\n _getRingWeight(datasetIndex) {\n        return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight, 1), 0);\n    }\n _getVisibleDatasetWeightTotal() {\n        return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;\n    }\n}\n\nclass LineController extends DatasetController {\n    static id = 'line';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        showLine: true,\n        spanGaps: false\n    };\n static overrides = {\n        scales: {\n            _index_: {\n                type: 'category'\n            },\n            _value_: {\n                type: 'linear'\n            }\n        }\n    };\n    initialize() {\n        this.enableOptionSharing = true;\n        this.supportsDecimation = true;\n        super.initialize();\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { dataset: line , data: points = [] , _dataset  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        line._chart = this.chart;\n        line._datasetIndex = this.index;\n        line._decimated = !!_dataset._decimated;\n        line.points = points;\n        const options = this.resolveDatasetElementOptions(mode);\n        if (!this.options.showLine) {\n            options.borderWidth = 0;\n        }\n        options.segment = this.options.segment;\n        this.updateElement(line, undefined, {\n            animated: !animationsDisabled,\n            options\n        }, mode);\n        this.updateElements(points, start, count, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const { sharedOptions , includeOptions  } = this._getSharedOptions(start, mode);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        const end = start + count;\n        const pointsCount = points.length;\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = 0; i < pointsCount; ++i){\n            const point = points[i];\n            const properties = directUpdate ? point : {};\n            if (i < start || i >= end) {\n                properties.skip = true;\n                continue;\n            }\n            const parsed = this.getParsed(i);\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        const data = meta.data || [];\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n    draw() {\n        const meta = this._cachedMeta;\n        meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);\n        super.draw();\n    }\n}\n\nclass PolarAreaController extends DatasetController {\n    static id = 'polarArea';\n static defaults = {\n        dataElementType: 'arc',\n        animation: {\n            animateRotate: true,\n            animateScale: true\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'startAngle',\n                    'endAngle',\n                    'innerRadius',\n                    'outerRadius'\n                ]\n            }\n        },\n        indexAxis: 'r',\n        startAngle: 0\n    };\n static overrides = {\n        aspectRatio: 1,\n        plugins: {\n            legend: {\n                labels: {\n                    generateLabels (chart) {\n                        const data = chart.data;\n                        if (data.labels.length && data.datasets.length) {\n                            const { labels: { pointStyle , color  }  } = chart.legend.options;\n                            return data.labels.map((label, i)=>{\n                                const meta = chart.getDatasetMeta(0);\n                                const style = meta.controller.getStyle(i);\n                                return {\n                                    text: label,\n                                    fillStyle: style.backgroundColor,\n                                    strokeStyle: style.borderColor,\n                                    fontColor: color,\n                                    lineWidth: style.borderWidth,\n                                    pointStyle: pointStyle,\n                                    hidden: !chart.getDataVisibility(i),\n                                    index: i\n                                };\n                            });\n                        }\n                        return [];\n                    }\n                },\n                onClick (e, legendItem, legend) {\n                    legend.chart.toggleDataVisibility(legendItem.index);\n                    legend.chart.update();\n                }\n            }\n        },\n        scales: {\n            r: {\n                type: 'radialLinear',\n                angleLines: {\n                    display: false\n                },\n                beginAtZero: true,\n                grid: {\n                    circular: true\n                },\n                pointLabels: {\n                    display: false\n                },\n                startAngle: 0\n            }\n        }\n    };\n    constructor(chart, datasetIndex){\n        super(chart, datasetIndex);\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n    }\n    getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const chart = this.chart;\n        const labels = chart.data.labels || [];\n        const value = formatNumber(meta._parsed[index].r, chart.options.locale);\n        return {\n            label: labels[index] || '',\n            value\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const arcs = this._cachedMeta.data;\n        this._updateRadius();\n        this.updateElements(arcs, 0, arcs.length, mode);\n    }\n getMinMax() {\n        const meta = this._cachedMeta;\n        const range = {\n            min: Number.POSITIVE_INFINITY,\n            max: Number.NEGATIVE_INFINITY\n        };\n        meta.data.forEach((element, index)=>{\n            const parsed = this.getParsed(index).r;\n            if (!isNaN(parsed) && this.chart.getDataVisibility(index)) {\n                if (parsed < range.min) {\n                    range.min = parsed;\n                }\n                if (parsed > range.max) {\n                    range.max = parsed;\n                }\n            }\n        });\n        return range;\n    }\n _updateRadius() {\n        const chart = this.chart;\n        const chartArea = chart.chartArea;\n        const opts = chart.options;\n        const minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);\n        const outerRadius = Math.max(minSize / 2, 0);\n        const innerRadius = Math.max(opts.cutoutPercentage ? outerRadius / 100 * opts.cutoutPercentage : 1, 0);\n        const radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();\n        this.outerRadius = outerRadius - radiusLength * this.index;\n        this.innerRadius = this.outerRadius - radiusLength;\n    }\n    updateElements(arcs, start, count, mode) {\n        const reset = mode === 'reset';\n        const chart = this.chart;\n        const opts = chart.options;\n        const animationOpts = opts.animation;\n        const scale = this._cachedMeta.rScale;\n        const centerX = scale.xCenter;\n        const centerY = scale.yCenter;\n        const datasetStartAngle = scale.getIndexAngle(0) - 0.5 * PI;\n        let angle = datasetStartAngle;\n        let i;\n        const defaultAngle = 360 / this.countVisibleElements();\n        for(i = 0; i < start; ++i){\n            angle += this._computeAngle(i, mode, defaultAngle);\n        }\n        for(i = start; i < start + count; i++){\n            const arc = arcs[i];\n            let startAngle = angle;\n            let endAngle = angle + this._computeAngle(i, mode, defaultAngle);\n            let outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;\n            angle = endAngle;\n            if (reset) {\n                if (animationOpts.animateScale) {\n                    outerRadius = 0;\n                }\n                if (animationOpts.animateRotate) {\n                    startAngle = endAngle = datasetStartAngle;\n                }\n            }\n            const properties = {\n                x: centerX,\n                y: centerY,\n                innerRadius: 0,\n                outerRadius,\n                startAngle,\n                endAngle,\n                options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)\n            };\n            this.updateElement(arc, i, properties, mode);\n        }\n    }\n    countVisibleElements() {\n        const meta = this._cachedMeta;\n        let count = 0;\n        meta.data.forEach((element, index)=>{\n            if (!isNaN(this.getParsed(index).r) && this.chart.getDataVisibility(index)) {\n                count++;\n            }\n        });\n        return count;\n    }\n _computeAngle(index, mode, defaultAngle) {\n        return this.chart.getDataVisibility(index) ? toRadians(this.resolveDataElementOptions(index, mode).angle || defaultAngle) : 0;\n    }\n}\n\nclass PieController extends DoughnutController {\n    static id = 'pie';\n static defaults = {\n        cutout: 0,\n        rotation: 0,\n        circumference: 360,\n        radius: '100%'\n    };\n}\n\nclass RadarController extends DatasetController {\n    static id = 'radar';\n static defaults = {\n        datasetElementType: 'line',\n        dataElementType: 'point',\n        indexAxis: 'r',\n        showLine: true,\n        elements: {\n            line: {\n                fill: 'start'\n            }\n        }\n    };\n static overrides = {\n        aspectRatio: 1,\n        scales: {\n            r: {\n                type: 'radialLinear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const vScale = this._cachedMeta.vScale;\n        const parsed = this.getParsed(index);\n        return {\n            label: vScale.getLabels()[index],\n            value: '' + vScale.getLabelForValue(parsed[vScale.axis])\n        };\n    }\n    parseObjectData(meta, data, start, count) {\n        return _parseObjectDataRadialScale.bind(this)(meta, data, start, count);\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const line = meta.dataset;\n        const points = meta.data || [];\n        const labels = meta.iScale.getLabels();\n        line.points = points;\n        if (mode !== 'resize') {\n            const options = this.resolveDatasetElementOptions(mode);\n            if (!this.options.showLine) {\n                options.borderWidth = 0;\n            }\n            const properties = {\n                _loop: true,\n                _fullLoop: labels.length === points.length,\n                options\n            };\n            this.updateElement(line, undefined, properties, mode);\n        }\n        this.updateElements(points, 0, points.length, mode);\n    }\n    updateElements(points, start, count, mode) {\n        const scale = this._cachedMeta.rScale;\n        const reset = mode === 'reset';\n        for(let i = start; i < start + count; i++){\n            const point = points[i];\n            const options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            const pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);\n            const x = reset ? scale.xCenter : pointPosition.x;\n            const y = reset ? scale.yCenter : pointPosition.y;\n            const properties = {\n                x,\n                y,\n                angle: pointPosition.angle,\n                skip: isNaN(x) || isNaN(y),\n                options\n            };\n            this.updateElement(point, i, properties, mode);\n        }\n    }\n}\n\nclass ScatterController extends DatasetController {\n    static id = 'scatter';\n static defaults = {\n        datasetElementType: false,\n        dataElementType: 'point',\n        showLine: false,\n        fill: false\n    };\n static overrides = {\n        interaction: {\n            mode: 'point'\n        },\n        scales: {\n            x: {\n                type: 'linear'\n            },\n            y: {\n                type: 'linear'\n            }\n        }\n    };\n getLabelAndValue(index) {\n        const meta = this._cachedMeta;\n        const labels = this.chart.data.labels || [];\n        const { xScale , yScale  } = meta;\n        const parsed = this.getParsed(index);\n        const x = xScale.getLabelForValue(parsed.x);\n        const y = yScale.getLabelForValue(parsed.y);\n        return {\n            label: labels[index] || '',\n            value: '(' + x + ', ' + y + ')'\n        };\n    }\n    update(mode) {\n        const meta = this._cachedMeta;\n        const { data: points = []  } = meta;\n        const animationsDisabled = this.chart._animationsDisabled;\n        let { start , count  } = _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled);\n        this._drawStart = start;\n        this._drawCount = count;\n        if (_scaleRangesChanged(meta)) {\n            start = 0;\n            count = points.length;\n        }\n        if (this.options.showLine) {\n            const { dataset: line , _dataset  } = meta;\n            line._chart = this.chart;\n            line._datasetIndex = this.index;\n            line._decimated = !!_dataset._decimated;\n            line.points = points;\n            const options = this.resolveDatasetElementOptions(mode);\n            options.segment = this.options.segment;\n            this.updateElement(line, undefined, {\n                animated: !animationsDisabled,\n                options\n            }, mode);\n        }\n        this.updateElements(points, start, count, mode);\n    }\n    addElements() {\n        const { showLine  } = this.options;\n        if (!this.datasetElementType && showLine) {\n            this.datasetElementType = this.chart.registry.getElement('line');\n        }\n        super.addElements();\n    }\n    updateElements(points, start, count, mode) {\n        const reset = mode === 'reset';\n        const { iScale , vScale , _stacked , _dataset  } = this._cachedMeta;\n        const firstOpts = this.resolveDataElementOptions(start, mode);\n        const sharedOptions = this.getSharedOptions(firstOpts);\n        const includeOptions = this.includeOptions(mode, sharedOptions);\n        const iAxis = iScale.axis;\n        const vAxis = vScale.axis;\n        const { spanGaps , segment  } = this.options;\n        const maxGapLength = isNumber(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;\n        const directUpdate = this.chart._animationsDisabled || reset || mode === 'none';\n        let prevParsed = start > 0 && this.getParsed(start - 1);\n        for(let i = start; i < start + count; ++i){\n            const point = points[i];\n            const parsed = this.getParsed(i);\n            const properties = directUpdate ? point : {};\n            const nullData = isNullOrUndef(parsed[vAxis]);\n            const iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);\n            const vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);\n            properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;\n            properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;\n            if (segment) {\n                properties.parsed = parsed;\n                properties.raw = _dataset.data[i];\n            }\n            if (includeOptions) {\n                properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);\n            }\n            if (!directUpdate) {\n                this.updateElement(point, i, properties, mode);\n            }\n            prevParsed = parsed;\n        }\n        this.updateSharedOptions(sharedOptions, mode, firstOpts);\n    }\n getMaxOverflow() {\n        const meta = this._cachedMeta;\n        const data = meta.data || [];\n        if (!this.options.showLine) {\n            let max = 0;\n            for(let i = data.length - 1; i >= 0; --i){\n                max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);\n            }\n            return max > 0 && max;\n        }\n        const dataset = meta.dataset;\n        const border = dataset.options && dataset.options.borderWidth || 0;\n        if (!data.length) {\n            return border;\n        }\n        const firstPoint = data[0].size(this.resolveDataElementOptions(0));\n        const lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));\n        return Math.max(border, firstPoint, lastPoint) / 2;\n    }\n}\n\nvar controllers = /*#__PURE__*/Object.freeze({\n__proto__: null,\nBarController: BarController,\nBubbleController: BubbleController,\nDoughnutController: DoughnutController,\nLineController: LineController,\nPolarAreaController: PolarAreaController,\nPieController: PieController,\nRadarController: RadarController,\nScatterController: ScatterController\n});\n\n/**\n * @namespace Chart._adapters\n * @since 2.8.0\n * @private\n */ function abstract() {\n    throw new Error('This method is not implemented: Check that a complete date adapter is provided.');\n}\n/**\n * Date adapter (current used by the time scale)\n * @namespace Chart._adapters._date\n * @memberof Chart._adapters\n * @private\n */ class DateAdapterBase {\n    /**\n   * Override default date adapter methods.\n   * Accepts type parameter to define options type.\n   * @example\n   * Chart._adapters._date.override<{myAdapterOption: string}>({\n   *   init() {\n   *     console.log(this.options.myAdapterOption);\n   *   }\n   * })\n   */ static override(members) {\n        Object.assign(DateAdapterBase.prototype, members);\n    }\n    constructor(options){\n        this.options = options || {};\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    init() {}\n    formats() {\n        return abstract();\n    }\n    parse() {\n        return abstract();\n    }\n    format() {\n        return abstract();\n    }\n    add() {\n        return abstract();\n    }\n    diff() {\n        return abstract();\n    }\n    startOf() {\n        return abstract();\n    }\n    endOf() {\n        return abstract();\n    }\n}\nvar adapters = {\n    _date: DateAdapterBase\n};\n\nfunction binarySearch(metaset, axis, value, intersect) {\n    const { controller , data , _sorted  } = metaset;\n    const iScale = controller._cachedMeta.iScale;\n    if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {\n        const lookupMethod = iScale._reversePixels ? _rlookupByKey : _lookupByKey;\n        if (!intersect) {\n            return lookupMethod(data, axis, value);\n        } else if (controller._sharedOptions) {\n            const el = data[0];\n            const range = typeof el.getRange === 'function' && el.getRange(axis);\n            if (range) {\n                const start = lookupMethod(data, axis, value - range);\n                const end = lookupMethod(data, axis, value + range);\n                return {\n                    lo: start.lo,\n                    hi: end.hi\n                };\n            }\n        }\n    }\n    return {\n        lo: 0,\n        hi: data.length - 1\n    };\n}\n function evaluateInteractionItems(chart, axis, position, handler, intersect) {\n    const metasets = chart.getSortedVisibleDatasetMetas();\n    const value = position[axis];\n    for(let i = 0, ilen = metasets.length; i < ilen; ++i){\n        const { index , data  } = metasets[i];\n        const { lo , hi  } = binarySearch(metasets[i], axis, value, intersect);\n        for(let j = lo; j <= hi; ++j){\n            const element = data[j];\n            if (!element.skip) {\n                handler(element, index, j);\n            }\n        }\n    }\n}\n function getDistanceMetricForAxis(axis) {\n    const useX = axis.indexOf('x') !== -1;\n    const useY = axis.indexOf('y') !== -1;\n    return function(pt1, pt2) {\n        const deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;\n        const deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;\n        return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\n    };\n}\n function getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {\n    const items = [];\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return items;\n    }\n    const evaluationFunc = function(element, datasetIndex, index) {\n        if (!includeInvisible && !_isPointInArea(element, chart.chartArea, 0)) {\n            return;\n        }\n        if (element.inRange(position.x, position.y, useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    };\n    evaluateInteractionItems(chart, axis, position, evaluationFunc, true);\n    return items;\n}\n function getNearestRadialItems(chart, position, axis, useFinalPosition) {\n    let items = [];\n    function evaluationFunc(element, datasetIndex, index) {\n        const { startAngle , endAngle  } = element.getProps([\n            'startAngle',\n            'endAngle'\n        ], useFinalPosition);\n        const { angle  } = getAngleFromPoint(element, {\n            x: position.x,\n            y: position.y\n        });\n        if (_angleBetween(angle, startAngle, endAngle)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    let items = [];\n    const distanceMetric = getDistanceMetricForAxis(axis);\n    let minDistance = Number.POSITIVE_INFINITY;\n    function evaluationFunc(element, datasetIndex, index) {\n        const inRange = element.inRange(position.x, position.y, useFinalPosition);\n        if (intersect && !inRange) {\n            return;\n        }\n        const center = element.getCenterPoint(useFinalPosition);\n        const pointInArea = !!includeInvisible || chart.isPointInArea(center);\n        if (!pointInArea && !inRange) {\n            return;\n        }\n        const distance = distanceMetric(position, center);\n        if (distance < minDistance) {\n            items = [\n                {\n                    element,\n                    datasetIndex,\n                    index\n                }\n            ];\n            minDistance = distance;\n        } else if (distance === minDistance) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n        }\n    }\n    evaluateInteractionItems(chart, axis, position, evaluationFunc);\n    return items;\n}\n function getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {\n    if (!includeInvisible && !chart.isPointInArea(position)) {\n        return [];\n    }\n    return axis === 'r' && !intersect ? getNearestRadialItems(chart, position, axis, useFinalPosition) : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);\n}\n function getAxisItems(chart, position, axis, intersect, useFinalPosition) {\n    const items = [];\n    const rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';\n    let intersectsItem = false;\n    evaluateInteractionItems(chart, axis, position, (element, datasetIndex, index)=>{\n        if (element[rangeMethod](position[axis], useFinalPosition)) {\n            items.push({\n                element,\n                datasetIndex,\n                index\n            });\n            intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);\n        }\n    });\n    if (intersect && !intersectsItem) {\n        return [];\n    }\n    return items;\n}\n var Interaction = {\n    evaluateInteractionItems,\n    modes: {\n index (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'x';\n            const includeInvisible = options.includeInvisible || false;\n            const items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            const elements = [];\n            if (!items.length) {\n                return [];\n            }\n            chart.getSortedVisibleDatasetMetas().forEach((meta)=>{\n                const index = items[0].index;\n                const element = meta.data[index];\n                if (element && !element.skip) {\n                    elements.push({\n                        element,\n                        datasetIndex: meta.index,\n                        index\n                    });\n                }\n            });\n            return elements;\n        },\n dataset (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            let items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);\n            if (items.length > 0) {\n                const datasetIndex = items[0].datasetIndex;\n                const data = chart.getDatasetMeta(datasetIndex).data;\n                items = [];\n                for(let i = 0; i < data.length; ++i){\n                    items.push({\n                        element: data[i],\n                        datasetIndex,\n                        index: i\n                    });\n                }\n            }\n            return items;\n        },\n point (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);\n        },\n nearest (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            const axis = options.axis || 'xy';\n            const includeInvisible = options.includeInvisible || false;\n            return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);\n        },\n x (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);\n        },\n y (chart, e, options, useFinalPosition) {\n            const position = getRelativePosition(e, chart);\n            return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);\n        }\n    }\n};\n\nconst STATIC_POSITIONS = [\n    'left',\n    'top',\n    'right',\n    'bottom'\n];\nfunction filterByPosition(array, position) {\n    return array.filter((v)=>v.pos === position);\n}\nfunction filterDynamicPositionByAxis(array, axis) {\n    return array.filter((v)=>STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis);\n}\nfunction sortByWeight(array, reverse) {\n    return array.sort((a, b)=>{\n        const v0 = reverse ? b : a;\n        const v1 = reverse ? a : b;\n        return v0.weight === v1.weight ? v0.index - v1.index : v0.weight - v1.weight;\n    });\n}\nfunction wrapBoxes(boxes) {\n    const layoutBoxes = [];\n    let i, ilen, box, pos, stack, stackWeight;\n    for(i = 0, ilen = (boxes || []).length; i < ilen; ++i){\n        box = boxes[i];\n        ({ position: pos , options: { stack , stackWeight =1  }  } = box);\n        layoutBoxes.push({\n            index: i,\n            box,\n            pos,\n            horizontal: box.isHorizontal(),\n            weight: box.weight,\n            stack: stack && pos + stack,\n            stackWeight\n        });\n    }\n    return layoutBoxes;\n}\nfunction buildStacks(layouts) {\n    const stacks = {};\n    for (const wrap of layouts){\n        const { stack , pos , stackWeight  } = wrap;\n        if (!stack || !STATIC_POSITIONS.includes(pos)) {\n            continue;\n        }\n        const _stack = stacks[stack] || (stacks[stack] = {\n            count: 0,\n            placed: 0,\n            weight: 0,\n            size: 0\n        });\n        _stack.count++;\n        _stack.weight += stackWeight;\n    }\n    return stacks;\n}\n function setLayoutDims(layouts, params) {\n    const stacks = buildStacks(layouts);\n    const { vBoxMaxWidth , hBoxMaxHeight  } = params;\n    let i, ilen, layout;\n    for(i = 0, ilen = layouts.length; i < ilen; ++i){\n        layout = layouts[i];\n        const { fullSize  } = layout.box;\n        const stack = stacks[layout.stack];\n        const factor = stack && layout.stackWeight / stack.weight;\n        if (layout.horizontal) {\n            layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;\n            layout.height = hBoxMaxHeight;\n        } else {\n            layout.width = vBoxMaxWidth;\n            layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;\n        }\n    }\n    return stacks;\n}\nfunction buildLayoutBoxes(boxes) {\n    const layoutBoxes = wrapBoxes(boxes);\n    const fullSize = sortByWeight(layoutBoxes.filter((wrap)=>wrap.box.fullSize), true);\n    const left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);\n    const right = sortByWeight(filterByPosition(layoutBoxes, 'right'));\n    const top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);\n    const bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));\n    const centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');\n    const centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');\n    return {\n        fullSize,\n        leftAndTop: left.concat(top),\n        rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),\n        chartArea: filterByPosition(layoutBoxes, 'chartArea'),\n        vertical: left.concat(right).concat(centerVertical),\n        horizontal: top.concat(bottom).concat(centerHorizontal)\n    };\n}\nfunction getCombinedMax(maxPadding, chartArea, a, b) {\n    return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);\n}\nfunction updateMaxPadding(maxPadding, boxPadding) {\n    maxPadding.top = Math.max(maxPadding.top, boxPadding.top);\n    maxPadding.left = Math.max(maxPadding.left, boxPadding.left);\n    maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);\n    maxPadding.right = Math.max(maxPadding.right, boxPadding.right);\n}\nfunction updateDims(chartArea, params, layout, stacks) {\n    const { pos , box  } = layout;\n    const maxPadding = chartArea.maxPadding;\n    if (!isObject(pos)) {\n        if (layout.size) {\n            chartArea[pos] -= layout.size;\n        }\n        const stack = stacks[layout.stack] || {\n            size: 0,\n            count: 1\n        };\n        stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);\n        layout.size = stack.size / stack.count;\n        chartArea[pos] += layout.size;\n    }\n    if (box.getPadding) {\n        updateMaxPadding(maxPadding, box.getPadding());\n    }\n    const newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));\n    const newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));\n    const widthChanged = newWidth !== chartArea.w;\n    const heightChanged = newHeight !== chartArea.h;\n    chartArea.w = newWidth;\n    chartArea.h = newHeight;\n    return layout.horizontal ? {\n        same: widthChanged,\n        other: heightChanged\n    } : {\n        same: heightChanged,\n        other: widthChanged\n    };\n}\nfunction handleMaxPadding(chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function updatePos(pos) {\n        const change = Math.max(maxPadding[pos] - chartArea[pos], 0);\n        chartArea[pos] += change;\n        return change;\n    }\n    chartArea.y += updatePos('top');\n    chartArea.x += updatePos('left');\n    updatePos('right');\n    updatePos('bottom');\n}\nfunction getMargins(horizontal, chartArea) {\n    const maxPadding = chartArea.maxPadding;\n    function marginForPositions(positions) {\n        const margin = {\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0\n        };\n        positions.forEach((pos)=>{\n            margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);\n        });\n        return margin;\n    }\n    return horizontal ? marginForPositions([\n        'left',\n        'right'\n    ]) : marginForPositions([\n        'top',\n        'bottom'\n    ]);\n}\nfunction fitBoxes(boxes, chartArea, params, stacks) {\n    const refitBoxes = [];\n    let i, ilen, layout, box, refit, changed;\n    for(i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i){\n        layout = boxes[i];\n        box = layout.box;\n        box.update(layout.width || chartArea.w, layout.height || chartArea.h, getMargins(layout.horizontal, chartArea));\n        const { same , other  } = updateDims(chartArea, params, layout, stacks);\n        refit |= same && refitBoxes.length;\n        changed = changed || other;\n        if (!box.fullSize) {\n            refitBoxes.push(layout);\n        }\n    }\n    return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;\n}\nfunction setBoxDims(box, left, top, width, height) {\n    box.top = top;\n    box.left = left;\n    box.right = left + width;\n    box.bottom = top + height;\n    box.width = width;\n    box.height = height;\n}\nfunction placeBoxes(boxes, chartArea, params, stacks) {\n    const userPadding = params.padding;\n    let { x , y  } = chartArea;\n    for (const layout of boxes){\n        const box = layout.box;\n        const stack = stacks[layout.stack] || {\n            count: 1,\n            placed: 0,\n            weight: 1\n        };\n        const weight = layout.stackWeight / stack.weight || 1;\n        if (layout.horizontal) {\n            const width = chartArea.w * weight;\n            const height = stack.size || box.height;\n            if (defined(stack.start)) {\n                y = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);\n            } else {\n                setBoxDims(box, chartArea.left + stack.placed, y, width, height);\n            }\n            stack.start = y;\n            stack.placed += width;\n            y = box.bottom;\n        } else {\n            const height1 = chartArea.h * weight;\n            const width1 = stack.size || box.width;\n            if (defined(stack.start)) {\n                x = stack.start;\n            }\n            if (box.fullSize) {\n                setBoxDims(box, x, userPadding.top, width1, params.outerHeight - userPadding.bottom - userPadding.top);\n            } else {\n                setBoxDims(box, x, chartArea.top + stack.placed, width1, height1);\n            }\n            stack.start = x;\n            stack.placed += height1;\n            x = box.right;\n        }\n    }\n    chartArea.x = x;\n    chartArea.y = y;\n}\nvar layouts = {\n addBox (chart, item) {\n        if (!chart.boxes) {\n            chart.boxes = [];\n        }\n        item.fullSize = item.fullSize || false;\n        item.position = item.position || 'top';\n        item.weight = item.weight || 0;\n        item._layers = item._layers || function() {\n            return [\n                {\n                    z: 0,\n                    draw (chartArea) {\n                        item.draw(chartArea);\n                    }\n                }\n            ];\n        };\n        chart.boxes.push(item);\n    },\n removeBox (chart, layoutItem) {\n        const index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;\n        if (index !== -1) {\n            chart.boxes.splice(index, 1);\n        }\n    },\n configure (chart, item, options) {\n        item.fullSize = options.fullSize;\n        item.position = options.position;\n        item.weight = options.weight;\n    },\n update (chart, width, height, minPadding) {\n        if (!chart) {\n            return;\n        }\n        const padding = toPadding(chart.options.layout.padding);\n        const availableWidth = Math.max(width - padding.width, 0);\n        const availableHeight = Math.max(height - padding.height, 0);\n        const boxes = buildLayoutBoxes(chart.boxes);\n        const verticalBoxes = boxes.vertical;\n        const horizontalBoxes = boxes.horizontal;\n        each(chart.boxes, (box)=>{\n            if (typeof box.beforeLayout === 'function') {\n                box.beforeLayout();\n            }\n        });\n        const visibleVerticalBoxCount = verticalBoxes.reduce((total, wrap)=>wrap.box.options && wrap.box.options.display === false ? total : total + 1, 0) || 1;\n        const params = Object.freeze({\n            outerWidth: width,\n            outerHeight: height,\n            padding,\n            availableWidth,\n            availableHeight,\n            vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,\n            hBoxMaxHeight: availableHeight / 2\n        });\n        const maxPadding = Object.assign({}, padding);\n        updateMaxPadding(maxPadding, toPadding(minPadding));\n        const chartArea = Object.assign({\n            maxPadding,\n            w: availableWidth,\n            h: availableHeight,\n            x: padding.left,\n            y: padding.top\n        }, padding);\n        const stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);\n        fitBoxes(boxes.fullSize, chartArea, params, stacks);\n        fitBoxes(verticalBoxes, chartArea, params, stacks);\n        if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {\n            fitBoxes(verticalBoxes, chartArea, params, stacks);\n        }\n        handleMaxPadding(chartArea);\n        placeBoxes(boxes.leftAndTop, chartArea, params, stacks);\n        chartArea.x += chartArea.w;\n        chartArea.y += chartArea.h;\n        placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);\n        chart.chartArea = {\n            left: chartArea.left,\n            top: chartArea.top,\n            right: chartArea.left + chartArea.w,\n            bottom: chartArea.top + chartArea.h,\n            height: chartArea.h,\n            width: chartArea.w\n        };\n        each(boxes.chartArea, (layout)=>{\n            const box = layout.box;\n            Object.assign(box, chart.chartArea);\n            box.update(chartArea.w, chartArea.h, {\n                left: 0,\n                top: 0,\n                right: 0,\n                bottom: 0\n            });\n        });\n    }\n};\n\nclass BasePlatform {\n acquireContext(canvas, aspectRatio) {}\n releaseContext(context) {\n        return false;\n    }\n addEventListener(chart, type, listener) {}\n removeEventListener(chart, type, listener) {}\n getDevicePixelRatio() {\n        return 1;\n    }\n getMaximumSize(element, width, height, aspectRatio) {\n        width = Math.max(0, width || element.width);\n        height = height || element.height;\n        return {\n            width,\n            height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)\n        };\n    }\n isAttached(canvas) {\n        return true;\n    }\n updateConfig(config) {\n    }\n}\n\nclass BasicPlatform extends BasePlatform {\n    acquireContext(item) {\n        return item && item.getContext && item.getContext('2d') || null;\n    }\n    updateConfig(config) {\n        config.options.animation = false;\n    }\n}\n\nconst EXPANDO_KEY = '$chartjs';\n const EVENT_TYPES = {\n    touchstart: 'mousedown',\n    touchmove: 'mousemove',\n    touchend: 'mouseup',\n    pointerenter: 'mouseenter',\n    pointerdown: 'mousedown',\n    pointermove: 'mousemove',\n    pointerup: 'mouseup',\n    pointerleave: 'mouseout',\n    pointerout: 'mouseout'\n};\nconst isNullOrEmpty = (value)=>value === null || value === '';\n function initCanvas(canvas, aspectRatio) {\n    const style = canvas.style;\n    const renderHeight = canvas.getAttribute('height');\n    const renderWidth = canvas.getAttribute('width');\n    canvas[EXPANDO_KEY] = {\n        initial: {\n            height: renderHeight,\n            width: renderWidth,\n            style: {\n                display: style.display,\n                height: style.height,\n                width: style.width\n            }\n        }\n    };\n    style.display = style.display || 'block';\n    style.boxSizing = style.boxSizing || 'border-box';\n    if (isNullOrEmpty(renderWidth)) {\n        const displayWidth = readUsedSize(canvas, 'width');\n        if (displayWidth !== undefined) {\n            canvas.width = displayWidth;\n        }\n    }\n    if (isNullOrEmpty(renderHeight)) {\n        if (canvas.style.height === '') {\n            canvas.height = canvas.width / (aspectRatio || 2);\n        } else {\n            const displayHeight = readUsedSize(canvas, 'height');\n            if (displayHeight !== undefined) {\n                canvas.height = displayHeight;\n            }\n        }\n    }\n    return canvas;\n}\nconst eventListenerOptions = supportsEventListenerOptions ? {\n    passive: true\n} : false;\nfunction addListener(node, type, listener) {\n    node.addEventListener(type, listener, eventListenerOptions);\n}\nfunction removeListener(chart, type, listener) {\n    chart.canvas.removeEventListener(type, listener, eventListenerOptions);\n}\nfunction fromNativeEvent(event, chart) {\n    const type = EVENT_TYPES[event.type] || event.type;\n    const { x , y  } = getRelativePosition(event, chart);\n    return {\n        type,\n        chart,\n        native: event,\n        x: x !== undefined ? x : null,\n        y: y !== undefined ? y : null\n    };\n}\nfunction nodeListContains(nodeList, canvas) {\n    for (const node of nodeList){\n        if (node === canvas || node.contains(canvas)) {\n            return true;\n        }\n    }\n}\nfunction createAttachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.addedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.removedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nfunction createDetachObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const observer = new MutationObserver((entries)=>{\n        let trigger = false;\n        for (const entry of entries){\n            trigger = trigger || nodeListContains(entry.removedNodes, canvas);\n            trigger = trigger && !nodeListContains(entry.addedNodes, canvas);\n        }\n        if (trigger) {\n            listener();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true\n    });\n    return observer;\n}\nconst drpListeningCharts = new Map();\nlet oldDevicePixelRatio = 0;\nfunction onWindowResize() {\n    const dpr = window.devicePixelRatio;\n    if (dpr === oldDevicePixelRatio) {\n        return;\n    }\n    oldDevicePixelRatio = dpr;\n    drpListeningCharts.forEach((resize, chart)=>{\n        if (chart.currentDevicePixelRatio !== dpr) {\n            resize();\n        }\n    });\n}\nfunction listenDevicePixelRatioChanges(chart, resize) {\n    if (!drpListeningCharts.size) {\n        window.addEventListener('resize', onWindowResize);\n    }\n    drpListeningCharts.set(chart, resize);\n}\nfunction unlistenDevicePixelRatioChanges(chart) {\n    drpListeningCharts.delete(chart);\n    if (!drpListeningCharts.size) {\n        window.removeEventListener('resize', onWindowResize);\n    }\n}\nfunction createResizeObserver(chart, type, listener) {\n    const canvas = chart.canvas;\n    const container = canvas && _getParentNode(canvas);\n    if (!container) {\n        return;\n    }\n    const resize = throttled((width, height)=>{\n        const w = container.clientWidth;\n        listener(width, height);\n        if (w < container.clientWidth) {\n            listener();\n        }\n    }, window);\n    const observer = new ResizeObserver((entries)=>{\n        const entry = entries[0];\n        const width = entry.contentRect.width;\n        const height = entry.contentRect.height;\n        if (width === 0 && height === 0) {\n            return;\n        }\n        resize(width, height);\n    });\n    observer.observe(container);\n    listenDevicePixelRatioChanges(chart, resize);\n    return observer;\n}\nfunction releaseObserver(chart, type, observer) {\n    if (observer) {\n        observer.disconnect();\n    }\n    if (type === 'resize') {\n        unlistenDevicePixelRatioChanges(chart);\n    }\n}\nfunction createProxyAndListen(chart, type, listener) {\n    const canvas = chart.canvas;\n    const proxy = throttled((event)=>{\n        if (chart.ctx !== null) {\n            listener(fromNativeEvent(event, chart));\n        }\n    }, chart);\n    addListener(canvas, type, proxy);\n    return proxy;\n}\n class DomPlatform extends BasePlatform {\n acquireContext(canvas, aspectRatio) {\n        const context = canvas && canvas.getContext && canvas.getContext('2d');\n        if (context && context.canvas === canvas) {\n            initCanvas(canvas, aspectRatio);\n            return context;\n        }\n        return null;\n    }\n releaseContext(context) {\n        const canvas = context.canvas;\n        if (!canvas[EXPANDO_KEY]) {\n            return false;\n        }\n        const initial = canvas[EXPANDO_KEY].initial;\n        [\n            'height',\n            'width'\n        ].forEach((prop)=>{\n            const value = initial[prop];\n            if (isNullOrUndef(value)) {\n                canvas.removeAttribute(prop);\n            } else {\n                canvas.setAttribute(prop, value);\n            }\n        });\n        const style = initial.style || {};\n        Object.keys(style).forEach((key)=>{\n            canvas.style[key] = style[key];\n        });\n        canvas.width = canvas.width;\n        delete canvas[EXPANDO_KEY];\n        return true;\n    }\n addEventListener(chart, type, listener) {\n        this.removeEventListener(chart, type);\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const handlers = {\n            attach: createAttachObserver,\n            detach: createDetachObserver,\n            resize: createResizeObserver\n        };\n        const handler = handlers[type] || createProxyAndListen;\n        proxies[type] = handler(chart, type, listener);\n    }\n removeEventListener(chart, type) {\n        const proxies = chart.$proxies || (chart.$proxies = {});\n        const proxy = proxies[type];\n        if (!proxy) {\n            return;\n        }\n        const handlers = {\n            attach: releaseObserver,\n            detach: releaseObserver,\n            resize: releaseObserver\n        };\n        const handler = handlers[type] || removeListener;\n        handler(chart, type, proxy);\n        proxies[type] = undefined;\n    }\n    getDevicePixelRatio() {\n        return window.devicePixelRatio;\n    }\n getMaximumSize(canvas, width, height, aspectRatio) {\n        return getMaximumSize(canvas, width, height, aspectRatio);\n    }\n isAttached(canvas) {\n        const container = _getParentNode(canvas);\n        return !!(container && container.isConnected);\n    }\n}\n\nfunction _detectPlatform(canvas) {\n    if (!_isDomSupported() || typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas) {\n        return BasicPlatform;\n    }\n    return DomPlatform;\n}\n\nclass Element {\n    static defaults = {};\n    static defaultRoutes = undefined;\n    active = false;\n    tooltipPosition(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    hasValue() {\n        return isNumber(this.x) && isNumber(this.y);\n    }\n    getProps(props, final) {\n        const anims = this.$animations;\n        if (!final || !anims) {\n            // let's not create an object, if not needed\n            return this;\n        }\n        const ret = {};\n        props.forEach((prop)=>{\n            ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : this[prop];\n        });\n        return ret;\n    }\n}\n\nfunction autoSkip(scale, ticks) {\n    const tickOpts = scale.options.ticks;\n    const determinedMaxTicks = determineMaxTicks(scale);\n    const ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);\n    const majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];\n    const numMajorIndices = majorIndices.length;\n    const first = majorIndices[0];\n    const last = majorIndices[numMajorIndices - 1];\n    const newTicks = [];\n    if (numMajorIndices > ticksLimit) {\n        skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);\n        return newTicks;\n    }\n    const spacing = calculateSpacing(majorIndices, ticks, ticksLimit);\n    if (numMajorIndices > 0) {\n        let i, ilen;\n        const avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;\n        skip(ticks, newTicks, spacing, isNullOrUndef(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);\n        for(i = 0, ilen = numMajorIndices - 1; i < ilen; i++){\n            skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);\n        }\n        skip(ticks, newTicks, spacing, last, isNullOrUndef(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);\n        return newTicks;\n    }\n    skip(ticks, newTicks, spacing);\n    return newTicks;\n}\nfunction determineMaxTicks(scale) {\n    const offset = scale.options.offset;\n    const tickLength = scale._tickSize();\n    const maxScale = scale._length / tickLength + (offset ? 0 : 1);\n    const maxChart = scale._maxLength / tickLength;\n    return Math.floor(Math.min(maxScale, maxChart));\n}\n function calculateSpacing(majorIndices, ticks, ticksLimit) {\n    const evenMajorSpacing = getEvenSpacing(majorIndices);\n    const spacing = ticks.length / ticksLimit;\n    if (!evenMajorSpacing) {\n        return Math.max(spacing, 1);\n    }\n    const factors = _factorize(evenMajorSpacing);\n    for(let i = 0, ilen = factors.length - 1; i < ilen; i++){\n        const factor = factors[i];\n        if (factor > spacing) {\n            return factor;\n        }\n    }\n    return Math.max(spacing, 1);\n}\n function getMajorIndices(ticks) {\n    const result = [];\n    let i, ilen;\n    for(i = 0, ilen = ticks.length; i < ilen; i++){\n        if (ticks[i].major) {\n            result.push(i);\n        }\n    }\n    return result;\n}\n function skipMajors(ticks, newTicks, majorIndices, spacing) {\n    let count = 0;\n    let next = majorIndices[0];\n    let i;\n    spacing = Math.ceil(spacing);\n    for(i = 0; i < ticks.length; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = majorIndices[count * spacing];\n        }\n    }\n}\n function skip(ticks, newTicks, spacing, majorStart, majorEnd) {\n    const start = valueOrDefault(majorStart, 0);\n    const end = Math.min(valueOrDefault(majorEnd, ticks.length), ticks.length);\n    let count = 0;\n    let length, i, next;\n    spacing = Math.ceil(spacing);\n    if (majorEnd) {\n        length = majorEnd - majorStart;\n        spacing = length / Math.floor(length / spacing);\n    }\n    next = start;\n    while(next < 0){\n        count++;\n        next = Math.round(start + count * spacing);\n    }\n    for(i = Math.max(start, 0); i < end; i++){\n        if (i === next) {\n            newTicks.push(ticks[i]);\n            count++;\n            next = Math.round(start + count * spacing);\n        }\n    }\n}\n function getEvenSpacing(arr) {\n    const len = arr.length;\n    let i, diff;\n    if (len < 2) {\n        return false;\n    }\n    for(diff = arr[0], i = 1; i < len; ++i){\n        if (arr[i] - arr[i - 1] !== diff) {\n            return false;\n        }\n    }\n    return diff;\n}\n\nconst reverseAlign = (align)=>align === 'left' ? 'right' : align === 'right' ? 'left' : align;\nconst offsetFromEdge = (scale, edge, offset)=>edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;\n function sample(arr, numItems) {\n    const result = [];\n    const increment = arr.length / numItems;\n    const len = arr.length;\n    let i = 0;\n    for(; i < len; i += increment){\n        result.push(arr[Math.floor(i)]);\n    }\n    return result;\n}\n function getPixelForGridLine(scale, index, offsetGridLines) {\n    const length = scale.ticks.length;\n    const validIndex = Math.min(index, length - 1);\n    const start = scale._startPixel;\n    const end = scale._endPixel;\n    const epsilon = 1e-6;\n    let lineValue = scale.getPixelForTick(validIndex);\n    let offset;\n    if (offsetGridLines) {\n        if (length === 1) {\n            offset = Math.max(lineValue - start, end - lineValue);\n        } else if (index === 0) {\n            offset = (scale.getPixelForTick(1) - lineValue) / 2;\n        } else {\n            offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;\n        }\n        lineValue += validIndex < index ? offset : -offset;\n        if (lineValue < start - epsilon || lineValue > end + epsilon) {\n            return;\n        }\n    }\n    return lineValue;\n}\n function garbageCollect(caches, length) {\n    each(caches, (cache)=>{\n        const gc = cache.gc;\n        const gcLen = gc.length / 2;\n        let i;\n        if (gcLen > length) {\n            for(i = 0; i < gcLen; ++i){\n                delete cache.data[gc[i]];\n            }\n            gc.splice(0, gcLen);\n        }\n    });\n}\n function getTickMarkLength(options) {\n    return options.drawTicks ? options.tickLength : 0;\n}\n function getTitleHeight(options, fallback) {\n    if (!options.display) {\n        return 0;\n    }\n    const font = toFont(options.font, fallback);\n    const padding = toPadding(options.padding);\n    const lines = isArray(options.text) ? options.text.length : 1;\n    return lines * font.lineHeight + padding.height;\n}\nfunction createScaleContext(parent, scale) {\n    return createContext(parent, {\n        scale,\n        type: 'scale'\n    });\n}\nfunction createTickContext(parent, index, tick) {\n    return createContext(parent, {\n        tick,\n        index,\n        type: 'tick'\n    });\n}\nfunction titleAlign(align, position, reverse) {\n    let ret = _toLeftRightCenter(align);\n    if (reverse && position !== 'right' || !reverse && position === 'right') {\n        ret = reverseAlign(ret);\n    }\n    return ret;\n}\nfunction titleArgs(scale, offset, position, align) {\n    const { top , left , bottom , right , chart  } = scale;\n    const { chartArea , scales  } = chart;\n    let rotation = 0;\n    let maxWidth, titleX, titleY;\n    const height = bottom - top;\n    const width = right - left;\n    if (scale.isHorizontal()) {\n        titleX = _alignStartEnd(align, left, right);\n        if (isObject(position)) {\n            const positionAxisID = Object.keys(position)[0];\n            const value = position[positionAxisID];\n            titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;\n        } else if (position === 'center') {\n            titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;\n        } else {\n            titleY = offsetFromEdge(scale, position, offset);\n        }\n        maxWidth = right - left;\n    } else {\n        if (isObject(position)) {\n            const positionAxisID1 = Object.keys(position)[0];\n            const value1 = position[positionAxisID1];\n            titleX = scales[positionAxisID1].getPixelForValue(value1) - width + offset;\n        } else if (position === 'center') {\n            titleX = (chartArea.left + chartArea.right) / 2 - width + offset;\n        } else {\n            titleX = offsetFromEdge(scale, position, offset);\n        }\n        titleY = _alignStartEnd(align, bottom, top);\n        rotation = position === 'left' ? -HALF_PI : HALF_PI;\n    }\n    return {\n        titleX,\n        titleY,\n        maxWidth,\n        rotation\n    };\n}\nclass Scale extends Element {\n    constructor(cfg){\n        super();\n         this.id = cfg.id;\n         this.type = cfg.type;\n         this.options = undefined;\n         this.ctx = cfg.ctx;\n         this.chart = cfg.chart;\n         this.top = undefined;\n         this.bottom = undefined;\n         this.left = undefined;\n         this.right = undefined;\n         this.width = undefined;\n         this.height = undefined;\n        this._margins = {\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        };\n         this.maxWidth = undefined;\n         this.maxHeight = undefined;\n         this.paddingTop = undefined;\n         this.paddingBottom = undefined;\n         this.paddingLeft = undefined;\n         this.paddingRight = undefined;\n         this.axis = undefined;\n         this.labelRotation = undefined;\n        this.min = undefined;\n        this.max = undefined;\n        this._range = undefined;\n         this.ticks = [];\n         this._gridLineItems = null;\n         this._labelItems = null;\n         this._labelSizes = null;\n        this._length = 0;\n        this._maxLength = 0;\n        this._longestTextCache = {};\n         this._startPixel = undefined;\n         this._endPixel = undefined;\n        this._reversePixels = false;\n        this._userMax = undefined;\n        this._userMin = undefined;\n        this._suggestedMax = undefined;\n        this._suggestedMin = undefined;\n        this._ticksLength = 0;\n        this._borderValue = 0;\n        this._cache = {};\n        this._dataLimitsCached = false;\n        this.$context = undefined;\n    }\n init(options) {\n        this.options = options.setContext(this.getContext());\n        this.axis = options.axis;\n        this._userMin = this.parse(options.min);\n        this._userMax = this.parse(options.max);\n        this._suggestedMin = this.parse(options.suggestedMin);\n        this._suggestedMax = this.parse(options.suggestedMax);\n    }\n parse(raw, index) {\n        return raw;\n    }\n getUserBounds() {\n        let { _userMin , _userMax , _suggestedMin , _suggestedMax  } = this;\n        _userMin = finiteOrDefault(_userMin, Number.POSITIVE_INFINITY);\n        _userMax = finiteOrDefault(_userMax, Number.NEGATIVE_INFINITY);\n        _suggestedMin = finiteOrDefault(_suggestedMin, Number.POSITIVE_INFINITY);\n        _suggestedMax = finiteOrDefault(_suggestedMax, Number.NEGATIVE_INFINITY);\n        return {\n            min: finiteOrDefault(_userMin, _suggestedMin),\n            max: finiteOrDefault(_userMax, _suggestedMax),\n            minDefined: isNumberFinite(_userMin),\n            maxDefined: isNumberFinite(_userMax)\n        };\n    }\n getMinMax(canStack) {\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n        let range;\n        if (minDefined && maxDefined) {\n            return {\n                min,\n                max\n            };\n        }\n        const metas = this.getMatchingVisibleMetas();\n        for(let i = 0, ilen = metas.length; i < ilen; ++i){\n            range = metas[i].controller.getMinMax(this, canStack);\n            if (!minDefined) {\n                min = Math.min(min, range.min);\n            }\n            if (!maxDefined) {\n                max = Math.max(max, range.max);\n            }\n        }\n        min = maxDefined && min > max ? max : min;\n        max = minDefined && min > max ? min : max;\n        return {\n            min: finiteOrDefault(min, finiteOrDefault(max, min)),\n            max: finiteOrDefault(max, finiteOrDefault(min, max))\n        };\n    }\n getPadding() {\n        return {\n            left: this.paddingLeft || 0,\n            top: this.paddingTop || 0,\n            right: this.paddingRight || 0,\n            bottom: this.paddingBottom || 0\n        };\n    }\n getTicks() {\n        return this.ticks;\n    }\n getLabels() {\n        const data = this.chart.data;\n        return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];\n    }\n    beforeLayout() {\n        this._cache = {};\n        this._dataLimitsCached = false;\n    }\n    beforeUpdate() {\n        callback(this.options.beforeUpdate, [\n            this\n        ]);\n    }\n update(maxWidth, maxHeight, margins) {\n        const { beginAtZero , grace , ticks: tickOpts  } = this.options;\n        const sampleSize = tickOpts.sampleSize;\n        this.beforeUpdate();\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins = Object.assign({\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0\n        }, margins);\n        this.ticks = null;\n        this._labelSizes = null;\n        this._gridLineItems = null;\n        this._labelItems = null;\n        this.beforeSetDimensions();\n        this.setDimensions();\n        this.afterSetDimensions();\n        this._maxLength = this.isHorizontal() ? this.width + margins.left + margins.right : this.height + margins.top + margins.bottom;\n        if (!this._dataLimitsCached) {\n            this.beforeDataLimits();\n            this.determineDataLimits();\n            this.afterDataLimits();\n            this._range = _addGrace(this, grace, beginAtZero);\n            this._dataLimitsCached = true;\n        }\n        this.beforeBuildTicks();\n        this.ticks = this.buildTicks() || [];\n        this.afterBuildTicks();\n        const samplingEnabled = sampleSize < this.ticks.length;\n        this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);\n        this.configure();\n        this.beforeCalculateLabelRotation();\n        this.calculateLabelRotation();\n        this.afterCalculateLabelRotation();\n        if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {\n            this.ticks = autoSkip(this, this.ticks);\n            this._labelSizes = null;\n            this.afterAutoSkip();\n        }\n        if (samplingEnabled) {\n            this._convertTicksToLabels(this.ticks);\n        }\n        this.beforeFit();\n        this.fit();\n        this.afterFit();\n        this.afterUpdate();\n    }\n configure() {\n        let reversePixels = this.options.reverse;\n        let startPixel, endPixel;\n        if (this.isHorizontal()) {\n            startPixel = this.left;\n            endPixel = this.right;\n        } else {\n            startPixel = this.top;\n            endPixel = this.bottom;\n            reversePixels = !reversePixels;\n        }\n        this._startPixel = startPixel;\n        this._endPixel = endPixel;\n        this._reversePixels = reversePixels;\n        this._length = endPixel - startPixel;\n        this._alignToPixels = this.options.alignToPixels;\n    }\n    afterUpdate() {\n        callback(this.options.afterUpdate, [\n            this\n        ]);\n    }\n    beforeSetDimensions() {\n        callback(this.options.beforeSetDimensions, [\n            this\n        ]);\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = 0;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = 0;\n            this.bottom = this.height;\n        }\n        this.paddingLeft = 0;\n        this.paddingTop = 0;\n        this.paddingRight = 0;\n        this.paddingBottom = 0;\n    }\n    afterSetDimensions() {\n        callback(this.options.afterSetDimensions, [\n            this\n        ]);\n    }\n    _callHooks(name) {\n        this.chart.notifyPlugins(name, this.getContext());\n        callback(this.options[name], [\n            this\n        ]);\n    }\n    beforeDataLimits() {\n        this._callHooks('beforeDataLimits');\n    }\n    determineDataLimits() {}\n    afterDataLimits() {\n        this._callHooks('afterDataLimits');\n    }\n    beforeBuildTicks() {\n        this._callHooks('beforeBuildTicks');\n    }\n buildTicks() {\n        return [];\n    }\n    afterBuildTicks() {\n        this._callHooks('afterBuildTicks');\n    }\n    beforeTickToLabelConversion() {\n        callback(this.options.beforeTickToLabelConversion, [\n            this\n        ]);\n    }\n generateTickLabels(ticks) {\n        const tickOpts = this.options.ticks;\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            tick = ticks[i];\n            tick.label = callback(tickOpts.callback, [\n                tick.value,\n                i,\n                ticks\n            ], this);\n        }\n    }\n    afterTickToLabelConversion() {\n        callback(this.options.afterTickToLabelConversion, [\n            this\n        ]);\n    }\n    beforeCalculateLabelRotation() {\n        callback(this.options.beforeCalculateLabelRotation, [\n            this\n        ]);\n    }\n    calculateLabelRotation() {\n        const options = this.options;\n        const tickOpts = options.ticks;\n        const numTicks = this.ticks.length;\n        const minRotation = tickOpts.minRotation || 0;\n        const maxRotation = tickOpts.maxRotation;\n        let labelRotation = minRotation;\n        let tickWidth, maxHeight, maxLabelDiagonal;\n        if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {\n            this.labelRotation = minRotation;\n            return;\n        }\n        const labelSizes = this._getLabelSizes();\n        const maxLabelWidth = labelSizes.widest.width;\n        const maxLabelHeight = labelSizes.highest.height;\n        const maxWidth = _limitValue(this.chart.width - maxLabelWidth, 0, this.maxWidth);\n        tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);\n        if (maxLabelWidth + 6 > tickWidth) {\n            tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));\n            maxHeight = this.maxHeight - getTickMarkLength(options.grid) - tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);\n            maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);\n            labelRotation = toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height + 6) / tickWidth, -1, 1)), Math.asin(_limitValue(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(_limitValue(maxLabelHeight / maxLabelDiagonal, -1, 1))));\n            labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));\n        }\n        this.labelRotation = labelRotation;\n    }\n    afterCalculateLabelRotation() {\n        callback(this.options.afterCalculateLabelRotation, [\n            this\n        ]);\n    }\n    afterAutoSkip() {}\n    beforeFit() {\n        callback(this.options.beforeFit, [\n            this\n        ]);\n    }\n    fit() {\n        const minSize = {\n            width: 0,\n            height: 0\n        };\n        const { chart , options: { ticks: tickOpts , title: titleOpts , grid: gridOpts  }  } = this;\n        const display = this._isVisible();\n        const isHorizontal = this.isHorizontal();\n        if (display) {\n            const titleHeight = getTitleHeight(titleOpts, chart.options.font);\n            if (isHorizontal) {\n                minSize.width = this.maxWidth;\n                minSize.height = getTickMarkLength(gridOpts) + titleHeight;\n            } else {\n                minSize.height = this.maxHeight;\n                minSize.width = getTickMarkLength(gridOpts) + titleHeight;\n            }\n            if (tickOpts.display && this.ticks.length) {\n                const { first , last , widest , highest  } = this._getLabelSizes();\n                const tickPadding = tickOpts.padding * 2;\n                const angleRadians = toRadians(this.labelRotation);\n                const cos = Math.cos(angleRadians);\n                const sin = Math.sin(angleRadians);\n                if (isHorizontal) {\n                    const labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;\n                    minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);\n                } else {\n                    const labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;\n                    minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);\n                }\n                this._calculatePadding(first, last, sin, cos);\n            }\n        }\n        this._handleMargins();\n        if (isHorizontal) {\n            this.width = this._length = chart.width - this._margins.left - this._margins.right;\n            this.height = minSize.height;\n        } else {\n            this.width = minSize.width;\n            this.height = this._length = chart.height - this._margins.top - this._margins.bottom;\n        }\n    }\n    _calculatePadding(first, last, sin, cos) {\n        const { ticks: { align , padding  } , position  } = this.options;\n        const isRotated = this.labelRotation !== 0;\n        const labelsBelowTicks = position !== 'top' && this.axis === 'x';\n        if (this.isHorizontal()) {\n            const offsetLeft = this.getPixelForTick(0) - this.left;\n            const offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);\n            let paddingLeft = 0;\n            let paddingRight = 0;\n            if (isRotated) {\n                if (labelsBelowTicks) {\n                    paddingLeft = cos * first.width;\n                    paddingRight = sin * last.height;\n                } else {\n                    paddingLeft = sin * first.height;\n                    paddingRight = cos * last.width;\n                }\n            } else if (align === 'start') {\n                paddingRight = last.width;\n            } else if (align === 'end') {\n                paddingLeft = first.width;\n            } else if (align !== 'inner') {\n                paddingLeft = first.width / 2;\n                paddingRight = last.width / 2;\n            }\n            this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);\n            this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);\n        } else {\n            let paddingTop = last.height / 2;\n            let paddingBottom = first.height / 2;\n            if (align === 'start') {\n                paddingTop = 0;\n                paddingBottom = first.height;\n            } else if (align === 'end') {\n                paddingTop = last.height;\n                paddingBottom = 0;\n            }\n            this.paddingTop = paddingTop + padding;\n            this.paddingBottom = paddingBottom + padding;\n        }\n    }\n _handleMargins() {\n        if (this._margins) {\n            this._margins.left = Math.max(this.paddingLeft, this._margins.left);\n            this._margins.top = Math.max(this.paddingTop, this._margins.top);\n            this._margins.right = Math.max(this.paddingRight, this._margins.right);\n            this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);\n        }\n    }\n    afterFit() {\n        callback(this.options.afterFit, [\n            this\n        ]);\n    }\n isHorizontal() {\n        const { axis , position  } = this.options;\n        return position === 'top' || position === 'bottom' || axis === 'x';\n    }\n isFullSize() {\n        return this.options.fullSize;\n    }\n _convertTicksToLabels(ticks) {\n        this.beforeTickToLabelConversion();\n        this.generateTickLabels(ticks);\n        let i, ilen;\n        for(i = 0, ilen = ticks.length; i < ilen; i++){\n            if (isNullOrUndef(ticks[i].label)) {\n                ticks.splice(i, 1);\n                ilen--;\n                i--;\n            }\n        }\n        this.afterTickToLabelConversion();\n    }\n _getLabelSizes() {\n        let labelSizes = this._labelSizes;\n        if (!labelSizes) {\n            const sampleSize = this.options.ticks.sampleSize;\n            let ticks = this.ticks;\n            if (sampleSize < ticks.length) {\n                ticks = sample(ticks, sampleSize);\n            }\n            this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length);\n        }\n        return labelSizes;\n    }\n _computeLabelSizes(ticks, length) {\n        const { ctx , _longestTextCache: caches  } = this;\n        const widths = [];\n        const heights = [];\n        let widestLabelSize = 0;\n        let highestLabelSize = 0;\n        let i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;\n        for(i = 0; i < length; ++i){\n            label = ticks[i].label;\n            tickFont = this._resolveTickFontOptions(i);\n            ctx.font = fontString = tickFont.string;\n            cache = caches[fontString] = caches[fontString] || {\n                data: {},\n                gc: []\n            };\n            lineHeight = tickFont.lineHeight;\n            width = height = 0;\n            if (!isNullOrUndef(label) && !isArray(label)) {\n                width = _measureText(ctx, cache.data, cache.gc, width, label);\n                height = lineHeight;\n            } else if (isArray(label)) {\n                for(j = 0, jlen = label.length; j < jlen; ++j){\n                    nestedLabel = label[j];\n                    if (!isNullOrUndef(nestedLabel) && !isArray(nestedLabel)) {\n                        width = _measureText(ctx, cache.data, cache.gc, width, nestedLabel);\n                        height += lineHeight;\n                    }\n                }\n            }\n            widths.push(width);\n            heights.push(height);\n            widestLabelSize = Math.max(width, widestLabelSize);\n            highestLabelSize = Math.max(height, highestLabelSize);\n        }\n        garbageCollect(caches, length);\n        const widest = widths.indexOf(widestLabelSize);\n        const highest = heights.indexOf(highestLabelSize);\n        const valueAt = (idx)=>({\n                width: widths[idx] || 0,\n                height: heights[idx] || 0\n            });\n        return {\n            first: valueAt(0),\n            last: valueAt(length - 1),\n            widest: valueAt(widest),\n            highest: valueAt(highest),\n            widths,\n            heights\n        };\n    }\n getLabelForValue(value) {\n        return value;\n    }\n getPixelForValue(value, index) {\n        return NaN;\n    }\n getValueForPixel(pixel) {}\n getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n getPixelForDecimal(decimal) {\n        if (this._reversePixels) {\n            decimal = 1 - decimal;\n        }\n        const pixel = this._startPixel + decimal * this._length;\n        return _int16Range(this._alignToPixels ? _alignPixel(this.chart, pixel, 0) : pixel);\n    }\n getDecimalForPixel(pixel) {\n        const decimal = (pixel - this._startPixel) / this._length;\n        return this._reversePixels ? 1 - decimal : decimal;\n    }\n getBasePixel() {\n        return this.getPixelForValue(this.getBaseValue());\n    }\n getBaseValue() {\n        const { min , max  } = this;\n        return min < 0 && max < 0 ? max : min > 0 && max > 0 ? min : 0;\n    }\n getContext(index) {\n        const ticks = this.ticks || [];\n        if (index >= 0 && index < ticks.length) {\n            const tick = ticks[index];\n            return tick.$context || (tick.$context = createTickContext(this.getContext(), index, tick));\n        }\n        return this.$context || (this.$context = createScaleContext(this.chart.getContext(), this));\n    }\n _tickSize() {\n        const optionTicks = this.options.ticks;\n        const rot = toRadians(this.labelRotation);\n        const cos = Math.abs(Math.cos(rot));\n        const sin = Math.abs(Math.sin(rot));\n        const labelSizes = this._getLabelSizes();\n        const padding = optionTicks.autoSkipPadding || 0;\n        const w = labelSizes ? labelSizes.widest.width + padding : 0;\n        const h = labelSizes ? labelSizes.highest.height + padding : 0;\n        return this.isHorizontal() ? h * cos > w * sin ? w / cos : h / sin : h * sin < w * cos ? h / cos : w / sin;\n    }\n _isVisible() {\n        const display = this.options.display;\n        if (display !== 'auto') {\n            return !!display;\n        }\n        return this.getMatchingVisibleMetas().length > 0;\n    }\n _computeGridLineItems(chartArea) {\n        const axis = this.axis;\n        const chart = this.chart;\n        const options = this.options;\n        const { grid , position , border  } = options;\n        const offset = grid.offset;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const ticksLength = ticks.length + (offset ? 1 : 0);\n        const tl = getTickMarkLength(grid);\n        const items = [];\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = borderOpts.display ? borderOpts.width : 0;\n        const axisHalfWidth = axisWidth / 2;\n        const alignBorderValue = function(pixel) {\n            return _alignPixel(chart, pixel, axisWidth);\n        };\n        let borderValue, i, lineValue, alignedLineValue;\n        let tx1, ty1, tx2, ty2, x1, y1, x2, y2;\n        if (position === 'top') {\n            borderValue = alignBorderValue(this.bottom);\n            ty1 = this.bottom - tl;\n            ty2 = borderValue - axisHalfWidth;\n            y1 = alignBorderValue(chartArea.top) + axisHalfWidth;\n            y2 = chartArea.bottom;\n        } else if (position === 'bottom') {\n            borderValue = alignBorderValue(this.top);\n            y1 = chartArea.top;\n            y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = this.top + tl;\n        } else if (position === 'left') {\n            borderValue = alignBorderValue(this.right);\n            tx1 = this.right - tl;\n            tx2 = borderValue - axisHalfWidth;\n            x1 = alignBorderValue(chartArea.left) + axisHalfWidth;\n            x2 = chartArea.right;\n        } else if (position === 'right') {\n            borderValue = alignBorderValue(this.left);\n            x1 = chartArea.left;\n            x2 = alignBorderValue(chartArea.right) - axisHalfWidth;\n            tx1 = borderValue + axisHalfWidth;\n            tx2 = this.left + tl;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));\n            }\n            y1 = chartArea.top;\n            y2 = chartArea.bottom;\n            ty1 = borderValue + axisHalfWidth;\n            ty2 = ty1 + tl;\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);\n            } else if (isObject(position)) {\n                const positionAxisID1 = Object.keys(position)[0];\n                const value1 = position[positionAxisID1];\n                borderValue = alignBorderValue(this.chart.scales[positionAxisID1].getPixelForValue(value1));\n            }\n            tx1 = borderValue - axisHalfWidth;\n            tx2 = tx1 - tl;\n            x1 = chartArea.left;\n            x2 = chartArea.right;\n        }\n        const limit = valueOrDefault(options.ticks.maxTicksLimit, ticksLength);\n        const step = Math.max(1, Math.ceil(ticksLength / limit));\n        for(i = 0; i < ticksLength; i += step){\n            const context = this.getContext(i);\n            const optsAtIndex = grid.setContext(context);\n            const optsAtIndexBorder = border.setContext(context);\n            const lineWidth = optsAtIndex.lineWidth;\n            const lineColor = optsAtIndex.color;\n            const borderDash = optsAtIndexBorder.dash || [];\n            const borderDashOffset = optsAtIndexBorder.dashOffset;\n            const tickWidth = optsAtIndex.tickWidth;\n            const tickColor = optsAtIndex.tickColor;\n            const tickBorderDash = optsAtIndex.tickBorderDash || [];\n            const tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;\n            lineValue = getPixelForGridLine(this, i, offset);\n            if (lineValue === undefined) {\n                continue;\n            }\n            alignedLineValue = _alignPixel(chart, lineValue, lineWidth);\n            if (isHorizontal) {\n                tx1 = tx2 = x1 = x2 = alignedLineValue;\n            } else {\n                ty1 = ty2 = y1 = y2 = alignedLineValue;\n            }\n            items.push({\n                tx1,\n                ty1,\n                tx2,\n                ty2,\n                x1,\n                y1,\n                x2,\n                y2,\n                width: lineWidth,\n                color: lineColor,\n                borderDash,\n                borderDashOffset,\n                tickWidth,\n                tickColor,\n                tickBorderDash,\n                tickBorderDashOffset\n            });\n        }\n        this._ticksLength = ticksLength;\n        this._borderValue = borderValue;\n        return items;\n    }\n _computeLabelItems(chartArea) {\n        const axis = this.axis;\n        const options = this.options;\n        const { position , ticks: optionTicks  } = options;\n        const isHorizontal = this.isHorizontal();\n        const ticks = this.ticks;\n        const { align , crossAlign , padding , mirror  } = optionTicks;\n        const tl = getTickMarkLength(options.grid);\n        const tickAndPadding = tl + padding;\n        const hTickAndPadding = mirror ? -padding : tickAndPadding;\n        const rotation = -toRadians(this.labelRotation);\n        const items = [];\n        let i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;\n        let textBaseline = 'middle';\n        if (position === 'top') {\n            y = this.bottom - hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'bottom') {\n            y = this.top + hTickAndPadding;\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (position === 'left') {\n            const ret = this._getYAxisLabelAlignment(tl);\n            textAlign = ret.textAlign;\n            x = ret.x;\n        } else if (position === 'right') {\n            const ret1 = this._getYAxisLabelAlignment(tl);\n            textAlign = ret1.textAlign;\n            x = ret1.x;\n        } else if (axis === 'x') {\n            if (position === 'center') {\n                y = (chartArea.top + chartArea.bottom) / 2 + tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID = Object.keys(position)[0];\n                const value = position[positionAxisID];\n                y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;\n            }\n            textAlign = this._getXAxisLabelAlignment();\n        } else if (axis === 'y') {\n            if (position === 'center') {\n                x = (chartArea.left + chartArea.right) / 2 - tickAndPadding;\n            } else if (isObject(position)) {\n                const positionAxisID1 = Object.keys(position)[0];\n                const value1 = position[positionAxisID1];\n                x = this.chart.scales[positionAxisID1].getPixelForValue(value1);\n            }\n            textAlign = this._getYAxisLabelAlignment(tl).textAlign;\n        }\n        if (axis === 'y') {\n            if (align === 'start') {\n                textBaseline = 'top';\n            } else if (align === 'end') {\n                textBaseline = 'bottom';\n            }\n        }\n        const labelSizes = this._getLabelSizes();\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            label = tick.label;\n            const optsAtIndex = optionTicks.setContext(this.getContext(i));\n            pixel = this.getPixelForTick(i) + optionTicks.labelOffset;\n            font = this._resolveTickFontOptions(i);\n            lineHeight = font.lineHeight;\n            lineCount = isArray(label) ? label.length : 1;\n            const halfCount = lineCount / 2;\n            const color = optsAtIndex.color;\n            const strokeColor = optsAtIndex.textStrokeColor;\n            const strokeWidth = optsAtIndex.textStrokeWidth;\n            let tickTextAlign = textAlign;\n            if (isHorizontal) {\n                x = pixel;\n                if (textAlign === 'inner') {\n                    if (i === ilen - 1) {\n                        tickTextAlign = !this.options.reverse ? 'right' : 'left';\n                    } else if (i === 0) {\n                        tickTextAlign = !this.options.reverse ? 'left' : 'right';\n                    } else {\n                        tickTextAlign = 'center';\n                    }\n                }\n                if (position === 'top') {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = -lineCount * lineHeight + lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;\n                    } else {\n                        textOffset = -labelSizes.highest.height + lineHeight / 2;\n                    }\n                } else {\n                    if (crossAlign === 'near' || rotation !== 0) {\n                        textOffset = lineHeight / 2;\n                    } else if (crossAlign === 'center') {\n                        textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;\n                    } else {\n                        textOffset = labelSizes.highest.height - lineCount * lineHeight;\n                    }\n                }\n                if (mirror) {\n                    textOffset *= -1;\n                }\n                if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {\n                    x += lineHeight / 2 * Math.sin(rotation);\n                }\n            } else {\n                y = pixel;\n                textOffset = (1 - lineCount) * lineHeight / 2;\n            }\n            let backdrop;\n            if (optsAtIndex.showLabelBackdrop) {\n                const labelPadding = toPadding(optsAtIndex.backdropPadding);\n                const height = labelSizes.heights[i];\n                const width = labelSizes.widths[i];\n                let top = textOffset - labelPadding.top;\n                let left = 0 - labelPadding.left;\n                switch(textBaseline){\n                    case 'middle':\n                        top -= height / 2;\n                        break;\n                    case 'bottom':\n                        top -= height;\n                        break;\n                }\n                switch(textAlign){\n                    case 'center':\n                        left -= width / 2;\n                        break;\n                    case 'right':\n                        left -= width;\n                        break;\n                }\n                backdrop = {\n                    left,\n                    top,\n                    width: width + labelPadding.width,\n                    height: height + labelPadding.height,\n                    color: optsAtIndex.backdropColor\n                };\n            }\n            items.push({\n                rotation,\n                label,\n                font,\n                color,\n                strokeColor,\n                strokeWidth,\n                textOffset,\n                textAlign: tickTextAlign,\n                textBaseline,\n                translation: [\n                    x,\n                    y\n                ],\n                backdrop\n            });\n        }\n        return items;\n    }\n    _getXAxisLabelAlignment() {\n        const { position , ticks  } = this.options;\n        const rotation = -toRadians(this.labelRotation);\n        if (rotation) {\n            return position === 'top' ? 'left' : 'right';\n        }\n        let align = 'center';\n        if (ticks.align === 'start') {\n            align = 'left';\n        } else if (ticks.align === 'end') {\n            align = 'right';\n        } else if (ticks.align === 'inner') {\n            align = 'inner';\n        }\n        return align;\n    }\n    _getYAxisLabelAlignment(tl) {\n        const { position , ticks: { crossAlign , mirror , padding  }  } = this.options;\n        const labelSizes = this._getLabelSizes();\n        const tickAndPadding = tl + padding;\n        const widest = labelSizes.widest.width;\n        let textAlign;\n        let x;\n        if (position === 'left') {\n            if (mirror) {\n                x = this.right + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x += widest;\n                }\n            } else {\n                x = this.right - tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x = this.left;\n                }\n            }\n        } else if (position === 'right') {\n            if (mirror) {\n                x = this.left + padding;\n                if (crossAlign === 'near') {\n                    textAlign = 'right';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x -= widest / 2;\n                } else {\n                    textAlign = 'left';\n                    x -= widest;\n                }\n            } else {\n                x = this.left + tickAndPadding;\n                if (crossAlign === 'near') {\n                    textAlign = 'left';\n                } else if (crossAlign === 'center') {\n                    textAlign = 'center';\n                    x += widest / 2;\n                } else {\n                    textAlign = 'right';\n                    x = this.right;\n                }\n            }\n        } else {\n            textAlign = 'right';\n        }\n        return {\n            textAlign,\n            x\n        };\n    }\n _computeLabelArea() {\n        if (this.options.ticks.mirror) {\n            return;\n        }\n        const chart = this.chart;\n        const position = this.options.position;\n        if (position === 'left' || position === 'right') {\n            return {\n                top: 0,\n                left: this.left,\n                bottom: chart.height,\n                right: this.right\n            };\n        }\n        if (position === 'top' || position === 'bottom') {\n            return {\n                top: this.top,\n                left: 0,\n                bottom: this.bottom,\n                right: chart.width\n            };\n        }\n    }\n drawBackground() {\n        const { ctx , options: { backgroundColor  } , left , top , width , height  } = this;\n        if (backgroundColor) {\n            ctx.save();\n            ctx.fillStyle = backgroundColor;\n            ctx.fillRect(left, top, width, height);\n            ctx.restore();\n        }\n    }\n    getLineWidthForValue(value) {\n        const grid = this.options.grid;\n        if (!this._isVisible() || !grid.display) {\n            return 0;\n        }\n        const ticks = this.ticks;\n        const index = ticks.findIndex((t)=>t.value === value);\n        if (index >= 0) {\n            const opts = grid.setContext(this.getContext(index));\n            return opts.lineWidth;\n        }\n        return 0;\n    }\n drawGrid(chartArea) {\n        const grid = this.options.grid;\n        const ctx = this.ctx;\n        const items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));\n        let i, ilen;\n        const drawLine = (p1, p2, style)=>{\n            if (!style.width || !style.color) {\n                return;\n            }\n            ctx.save();\n            ctx.lineWidth = style.width;\n            ctx.strokeStyle = style.color;\n            ctx.setLineDash(style.borderDash || []);\n            ctx.lineDashOffset = style.borderDashOffset;\n            ctx.beginPath();\n            ctx.moveTo(p1.x, p1.y);\n            ctx.lineTo(p2.x, p2.y);\n            ctx.stroke();\n            ctx.restore();\n        };\n        if (grid.display) {\n            for(i = 0, ilen = items.length; i < ilen; ++i){\n                const item = items[i];\n                if (grid.drawOnChartArea) {\n                    drawLine({\n                        x: item.x1,\n                        y: item.y1\n                    }, {\n                        x: item.x2,\n                        y: item.y2\n                    }, item);\n                }\n                if (grid.drawTicks) {\n                    drawLine({\n                        x: item.tx1,\n                        y: item.ty1\n                    }, {\n                        x: item.tx2,\n                        y: item.ty2\n                    }, {\n                        color: item.tickColor,\n                        width: item.tickWidth,\n                        borderDash: item.tickBorderDash,\n                        borderDashOffset: item.tickBorderDashOffset\n                    });\n                }\n            }\n        }\n    }\n drawBorder() {\n        const { chart , ctx , options: { border , grid  }  } = this;\n        const borderOpts = border.setContext(this.getContext());\n        const axisWidth = border.display ? borderOpts.width : 0;\n        if (!axisWidth) {\n            return;\n        }\n        const lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;\n        const borderValue = this._borderValue;\n        let x1, x2, y1, y2;\n        if (this.isHorizontal()) {\n            x1 = _alignPixel(chart, this.left, axisWidth) - axisWidth / 2;\n            x2 = _alignPixel(chart, this.right, lastLineWidth) + lastLineWidth / 2;\n            y1 = y2 = borderValue;\n        } else {\n            y1 = _alignPixel(chart, this.top, axisWidth) - axisWidth / 2;\n            y2 = _alignPixel(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;\n            x1 = x2 = borderValue;\n        }\n        ctx.save();\n        ctx.lineWidth = borderOpts.width;\n        ctx.strokeStyle = borderOpts.color;\n        ctx.beginPath();\n        ctx.moveTo(x1, y1);\n        ctx.lineTo(x2, y2);\n        ctx.stroke();\n        ctx.restore();\n    }\n drawLabels(chartArea) {\n        const optionTicks = this.options.ticks;\n        if (!optionTicks.display) {\n            return;\n        }\n        const ctx = this.ctx;\n        const area = this._computeLabelArea();\n        if (area) {\n            clipArea(ctx, area);\n        }\n        const items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));\n        let i, ilen;\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            const item = items[i];\n            const tickFont = item.font;\n            const label = item.label;\n            let y = item.textOffset;\n            renderText(ctx, label, 0, y, tickFont, item);\n        }\n        if (area) {\n            unclipArea(ctx);\n        }\n    }\n drawTitle() {\n        const { ctx , options: { position , title , reverse  }  } = this;\n        if (!title.display) {\n            return;\n        }\n        const font = toFont(title.font);\n        const padding = toPadding(title.padding);\n        const align = title.align;\n        let offset = font.lineHeight / 2;\n        if (position === 'bottom' || position === 'center' || isObject(position)) {\n            offset += padding.bottom;\n            if (isArray(title.text)) {\n                offset += font.lineHeight * (title.text.length - 1);\n            }\n        } else {\n            offset += padding.top;\n        }\n        const { titleX , titleY , maxWidth , rotation  } = titleArgs(this, offset, position, align);\n        renderText(ctx, title.text, 0, 0, font, {\n            color: title.color,\n            maxWidth,\n            rotation,\n            textAlign: titleAlign(align, position, reverse),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n    draw(chartArea) {\n        if (!this._isVisible()) {\n            return;\n        }\n        this.drawBackground();\n        this.drawGrid(chartArea);\n        this.drawBorder();\n        this.drawTitle();\n        this.drawLabels(chartArea);\n    }\n _layers() {\n        const opts = this.options;\n        const tz = opts.ticks && opts.ticks.z || 0;\n        const gz = valueOrDefault(opts.grid && opts.grid.z, -1);\n        const bz = valueOrDefault(opts.border && opts.border.z, 0);\n        if (!this._isVisible() || this.draw !== Scale.prototype.draw) {\n            return [\n                {\n                    z: tz,\n                    draw: (chartArea)=>{\n                        this.draw(chartArea);\n                    }\n                }\n            ];\n        }\n        return [\n            {\n                z: gz,\n                draw: (chartArea)=>{\n                    this.drawBackground();\n                    this.drawGrid(chartArea);\n                    this.drawTitle();\n                }\n            },\n            {\n                z: bz,\n                draw: ()=>{\n                    this.drawBorder();\n                }\n            },\n            {\n                z: tz,\n                draw: (chartArea)=>{\n                    this.drawLabels(chartArea);\n                }\n            }\n        ];\n    }\n getMatchingVisibleMetas(type) {\n        const metas = this.chart.getSortedVisibleDatasetMetas();\n        const axisID = this.axis + 'AxisID';\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            const meta = metas[i];\n            if (meta[axisID] === this.id && (!type || meta.type === type)) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n _resolveTickFontOptions(index) {\n        const opts = this.options.ticks.setContext(this.getContext(index));\n        return toFont(opts.font);\n    }\n _maxDigits() {\n        const fontSize = this._resolveTickFontOptions(0).lineHeight;\n        return (this.isHorizontal() ? this.width : this.height) / fontSize;\n    }\n}\n\nclass TypedRegistry {\n    constructor(type, scope, override){\n        this.type = type;\n        this.scope = scope;\n        this.override = override;\n        this.items = Object.create(null);\n    }\n    isForType(type) {\n        return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);\n    }\n register(item) {\n        const proto = Object.getPrototypeOf(item);\n        let parentScope;\n        if (isIChartComponent(proto)) {\n            parentScope = this.register(proto);\n        }\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope + '.' + id;\n        if (!id) {\n            throw new Error('class does not have id: ' + item);\n        }\n        if (id in items) {\n            return scope;\n        }\n        items[id] = item;\n        registerDefaults(item, scope, parentScope);\n        if (this.override) {\n            defaults.override(item.id, item.overrides);\n        }\n        return scope;\n    }\n get(id) {\n        return this.items[id];\n    }\n unregister(item) {\n        const items = this.items;\n        const id = item.id;\n        const scope = this.scope;\n        if (id in items) {\n            delete items[id];\n        }\n        if (scope && id in defaults[scope]) {\n            delete defaults[scope][id];\n            if (this.override) {\n                delete overrides[id];\n            }\n        }\n    }\n}function registerDefaults(item, scope, parentScope) {\n    const itemDefaults = merge(Object.create(null), [\n        parentScope ? defaults.get(parentScope) : {},\n        defaults.get(scope),\n        item.defaults\n    ]);\n    defaults.set(scope, itemDefaults);\n    if (item.defaultRoutes) {\n        routeDefaults(scope, item.defaultRoutes);\n    }\n    if (item.descriptors) {\n        defaults.describe(scope, item.descriptors);\n    }\n}\nfunction routeDefaults(scope, routes) {\n    Object.keys(routes).forEach((property)=>{\n        const propertyParts = property.split('.');\n        const sourceName = propertyParts.pop();\n        const sourceScope = [\n            scope\n        ].concat(propertyParts).join('.');\n        const parts = routes[property].split('.');\n        const targetName = parts.pop();\n        const targetScope = parts.join('.');\n        defaults.route(sourceScope, sourceName, targetScope, targetName);\n    });\n}\nfunction isIChartComponent(proto) {\n    return 'id' in proto && 'defaults' in proto;\n}\n\nclass Registry {\n    constructor(){\n        this.controllers = new TypedRegistry(DatasetController, 'datasets', true);\n        this.elements = new TypedRegistry(Element, 'elements');\n        this.plugins = new TypedRegistry(Object, 'plugins');\n        this.scales = new TypedRegistry(Scale, 'scales');\n        this._typedRegistries = [\n            this.controllers,\n            this.scales,\n            this.elements\n        ];\n    }\n add(...args) {\n        this._each('register', args);\n    }\n    remove(...args) {\n        this._each('unregister', args);\n    }\n addControllers(...args) {\n        this._each('register', args, this.controllers);\n    }\n addElements(...args) {\n        this._each('register', args, this.elements);\n    }\n addPlugins(...args) {\n        this._each('register', args, this.plugins);\n    }\n addScales(...args) {\n        this._each('register', args, this.scales);\n    }\n getController(id) {\n        return this._get(id, this.controllers, 'controller');\n    }\n getElement(id) {\n        return this._get(id, this.elements, 'element');\n    }\n getPlugin(id) {\n        return this._get(id, this.plugins, 'plugin');\n    }\n getScale(id) {\n        return this._get(id, this.scales, 'scale');\n    }\n removeControllers(...args) {\n        this._each('unregister', args, this.controllers);\n    }\n removeElements(...args) {\n        this._each('unregister', args, this.elements);\n    }\n removePlugins(...args) {\n        this._each('unregister', args, this.plugins);\n    }\n removeScales(...args) {\n        this._each('unregister', args, this.scales);\n    }\n _each(method, args, typedRegistry) {\n        [\n            ...args\n        ].forEach((arg)=>{\n            const reg = typedRegistry || this._getRegistryForType(arg);\n            if (typedRegistry || reg.isForType(arg) || reg === this.plugins && arg.id) {\n                this._exec(method, reg, arg);\n            } else {\n                each(arg, (item)=>{\n                    const itemReg = typedRegistry || this._getRegistryForType(item);\n                    this._exec(method, itemReg, item);\n                });\n            }\n        });\n    }\n _exec(method, registry, component) {\n        const camelMethod = _capitalize(method);\n        callback(component['before' + camelMethod], [], component);\n        registry[method](component);\n        callback(component['after' + camelMethod], [], component);\n    }\n _getRegistryForType(type) {\n        for(let i = 0; i < this._typedRegistries.length; i++){\n            const reg = this._typedRegistries[i];\n            if (reg.isForType(type)) {\n                return reg;\n            }\n        }\n        return this.plugins;\n    }\n _get(id, typedRegistry, type) {\n        const item = typedRegistry.get(id);\n        if (item === undefined) {\n            throw new Error('\"' + id + '\" is not a registered ' + type + '.');\n        }\n        return item;\n    }\n}\nvar registry = /* #__PURE__ */ new Registry();\n\nclass PluginService {\n    constructor(){\n        this._init = [];\n    }\n notify(chart, hook, args, filter) {\n        if (hook === 'beforeInit') {\n            this._init = this._createDescriptors(chart, true);\n            this._notify(this._init, chart, 'install');\n        }\n        const descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);\n        const result = this._notify(descriptors, chart, hook, args);\n        if (hook === 'afterDestroy') {\n            this._notify(descriptors, chart, 'stop');\n            this._notify(this._init, chart, 'uninstall');\n        }\n        return result;\n    }\n _notify(descriptors, chart, hook, args) {\n        args = args || {};\n        for (const descriptor of descriptors){\n            const plugin = descriptor.plugin;\n            const method = plugin[hook];\n            const params = [\n                chart,\n                args,\n                descriptor.options\n            ];\n            if (callback(method, params, plugin) === false && args.cancelable) {\n                return false;\n            }\n        }\n        return true;\n    }\n    invalidate() {\n        if (!isNullOrUndef(this._cache)) {\n            this._oldCache = this._cache;\n            this._cache = undefined;\n        }\n    }\n _descriptors(chart) {\n        if (this._cache) {\n            return this._cache;\n        }\n        const descriptors = this._cache = this._createDescriptors(chart);\n        this._notifyStateChanges(chart);\n        return descriptors;\n    }\n    _createDescriptors(chart, all) {\n        const config = chart && chart.config;\n        const options = valueOrDefault(config.options && config.options.plugins, {});\n        const plugins = allPlugins(config);\n        return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);\n    }\n _notifyStateChanges(chart) {\n        const previousDescriptors = this._oldCache || [];\n        const descriptors = this._cache;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.plugin.id === y.plugin.id));\n        this._notify(diff(previousDescriptors, descriptors), chart, 'stop');\n        this._notify(diff(descriptors, previousDescriptors), chart, 'start');\n    }\n} function allPlugins(config) {\n    const localIds = {};\n    const plugins = [];\n    const keys = Object.keys(registry.plugins.items);\n    for(let i = 0; i < keys.length; i++){\n        plugins.push(registry.getPlugin(keys[i]));\n    }\n    const local = config.plugins || [];\n    for(let i1 = 0; i1 < local.length; i1++){\n        const plugin = local[i1];\n        if (plugins.indexOf(plugin) === -1) {\n            plugins.push(plugin);\n            localIds[plugin.id] = true;\n        }\n    }\n    return {\n        plugins,\n        localIds\n    };\n}\nfunction getOpts(options, all) {\n    if (!all && options === false) {\n        return null;\n    }\n    if (options === true) {\n        return {};\n    }\n    return options;\n}\nfunction createDescriptors(chart, { plugins , localIds  }, options, all) {\n    const result = [];\n    const context = chart.getContext();\n    for (const plugin of plugins){\n        const id = plugin.id;\n        const opts = getOpts(options[id], all);\n        if (opts === null) {\n            continue;\n        }\n        result.push({\n            plugin,\n            options: pluginOpts(chart.config, {\n                plugin,\n                local: localIds[id]\n            }, opts, context)\n        });\n    }\n    return result;\n}\nfunction pluginOpts(config, { plugin , local  }, opts, context) {\n    const keys = config.pluginScopeKeys(plugin);\n    const scopes = config.getOptionScopes(opts, keys);\n    if (local && plugin.defaults) {\n        scopes.push(plugin.defaults);\n    }\n    return config.createResolver(scopes, context, [\n        ''\n    ], {\n        scriptable: false,\n        indexable: false,\n        allKeys: true\n    });\n}\n\nfunction getIndexAxis(type, options) {\n    const datasetDefaults = defaults.datasets[type] || {};\n    const datasetOptions = (options.datasets || {})[type] || {};\n    return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';\n}\nfunction getAxisFromDefaultScaleID(id, indexAxis) {\n    let axis = id;\n    if (id === '_index_') {\n        axis = indexAxis;\n    } else if (id === '_value_') {\n        axis = indexAxis === 'x' ? 'y' : 'x';\n    }\n    return axis;\n}\nfunction getDefaultScaleIDFromAxis(axis, indexAxis) {\n    return axis === indexAxis ? '_index_' : '_value_';\n}\nfunction axisFromPosition(position) {\n    if (position === 'top' || position === 'bottom') {\n        return 'x';\n    }\n    if (position === 'left' || position === 'right') {\n        return 'y';\n    }\n}\nfunction determineAxis(id, scaleOptions) {\n    if (id === 'x' || id === 'y' || id === 'r') {\n        return id;\n    }\n    id = scaleOptions.axis || axisFromPosition(scaleOptions.position) || id.length > 1 && determineAxis(id[0].toLowerCase(), scaleOptions);\n    if (id) {\n        return id;\n    }\n    throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`);\n}\nfunction mergeScaleConfig(config, options) {\n    const chartDefaults = overrides[config.type] || {\n        scales: {}\n    };\n    const configScales = options.scales || {};\n    const chartIndexAxis = getIndexAxis(config.type, options);\n    const scales = Object.create(null);\n    Object.keys(configScales).forEach((id)=>{\n        const scaleConf = configScales[id];\n        if (!isObject(scaleConf)) {\n            return console.error(`Invalid scale configuration for scale: ${id}`);\n        }\n        if (scaleConf._proxy) {\n            return console.warn(`Ignoring resolver passed as options for scale: ${id}`);\n        }\n        const axis = determineAxis(id, scaleConf);\n        const defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);\n        const defaultScaleOptions = chartDefaults.scales || {};\n        scales[id] = mergeIf(Object.create(null), [\n            {\n                axis\n            },\n            scaleConf,\n            defaultScaleOptions[axis],\n            defaultScaleOptions[defaultId]\n        ]);\n    });\n    config.data.datasets.forEach((dataset)=>{\n        const type = dataset.type || config.type;\n        const indexAxis = dataset.indexAxis || getIndexAxis(type, options);\n        const datasetDefaults = overrides[type] || {};\n        const defaultScaleOptions = datasetDefaults.scales || {};\n        Object.keys(defaultScaleOptions).forEach((defaultID)=>{\n            const axis = getAxisFromDefaultScaleID(defaultID, indexAxis);\n            const id = dataset[axis + 'AxisID'] || axis;\n            scales[id] = scales[id] || Object.create(null);\n            mergeIf(scales[id], [\n                {\n                    axis\n                },\n                configScales[id],\n                defaultScaleOptions[defaultID]\n            ]);\n        });\n    });\n    Object.keys(scales).forEach((key)=>{\n        const scale = scales[key];\n        mergeIf(scale, [\n            defaults.scales[scale.type],\n            defaults.scale\n        ]);\n    });\n    return scales;\n}\nfunction initOptions(config) {\n    const options = config.options || (config.options = {});\n    options.plugins = valueOrDefault(options.plugins, {});\n    options.scales = mergeScaleConfig(config, options);\n}\nfunction initData(data) {\n    data = data || {};\n    data.datasets = data.datasets || [];\n    data.labels = data.labels || [];\n    return data;\n}\nfunction initConfig(config) {\n    config = config || {};\n    config.data = initData(config.data);\n    initOptions(config);\n    return config;\n}\nconst keyCache = new Map();\nconst keysCached = new Set();\nfunction cachedKeys(cacheKey, generate) {\n    let keys = keyCache.get(cacheKey);\n    if (!keys) {\n        keys = generate();\n        keyCache.set(cacheKey, keys);\n        keysCached.add(keys);\n    }\n    return keys;\n}\nconst addIfFound = (set, obj, key)=>{\n    const opts = resolveObjectKey(obj, key);\n    if (opts !== undefined) {\n        set.add(opts);\n    }\n};\nclass Config {\n    constructor(config){\n        this._config = initConfig(config);\n        this._scopeCache = new Map();\n        this._resolverCache = new Map();\n    }\n    get platform() {\n        return this._config.platform;\n    }\n    get type() {\n        return this._config.type;\n    }\n    set type(type) {\n        this._config.type = type;\n    }\n    get data() {\n        return this._config.data;\n    }\n    set data(data) {\n        this._config.data = initData(data);\n    }\n    get options() {\n        return this._config.options;\n    }\n    set options(options) {\n        this._config.options = options;\n    }\n    get plugins() {\n        return this._config.plugins;\n    }\n    update() {\n        const config = this._config;\n        this.clearCache();\n        initOptions(config);\n    }\n    clearCache() {\n        this._scopeCache.clear();\n        this._resolverCache.clear();\n    }\n datasetScopeKeys(datasetType) {\n        return cachedKeys(datasetType, ()=>[\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetAnimationScopeKeys(datasetType, transition) {\n        return cachedKeys(`${datasetType}.transition.${transition}`, ()=>[\n                [\n                    `datasets.${datasetType}.transitions.${transition}`,\n                    `transitions.${transition}`,\n                ],\n                [\n                    `datasets.${datasetType}`,\n                    ''\n                ]\n            ]);\n    }\n datasetElementScopeKeys(datasetType, elementType) {\n        return cachedKeys(`${datasetType}-${elementType}`, ()=>[\n                [\n                    `datasets.${datasetType}.elements.${elementType}`,\n                    `datasets.${datasetType}`,\n                    `elements.${elementType}`,\n                    ''\n                ]\n            ]);\n    }\n pluginScopeKeys(plugin) {\n        const id = plugin.id;\n        const type = this.type;\n        return cachedKeys(`${type}-plugin-${id}`, ()=>[\n                [\n                    `plugins.${id}`,\n                    ...plugin.additionalOptionScopes || [],\n                ]\n            ]);\n    }\n _cachedScopes(mainScope, resetCache) {\n        const _scopeCache = this._scopeCache;\n        let cache = _scopeCache.get(mainScope);\n        if (!cache || resetCache) {\n            cache = new Map();\n            _scopeCache.set(mainScope, cache);\n        }\n        return cache;\n    }\n getOptionScopes(mainScope, keyLists, resetCache) {\n        const { options , type  } = this;\n        const cache = this._cachedScopes(mainScope, resetCache);\n        const cached = cache.get(keyLists);\n        if (cached) {\n            return cached;\n        }\n        const scopes = new Set();\n        keyLists.forEach((keys)=>{\n            if (mainScope) {\n                scopes.add(mainScope);\n                keys.forEach((key)=>addIfFound(scopes, mainScope, key));\n            }\n            keys.forEach((key)=>addIfFound(scopes, options, key));\n            keys.forEach((key)=>addIfFound(scopes, overrides[type] || {}, key));\n            keys.forEach((key)=>addIfFound(scopes, defaults, key));\n            keys.forEach((key)=>addIfFound(scopes, descriptors, key));\n        });\n        const array = Array.from(scopes);\n        if (array.length === 0) {\n            array.push(Object.create(null));\n        }\n        if (keysCached.has(keyLists)) {\n            cache.set(keyLists, array);\n        }\n        return array;\n    }\n chartOptionScopes() {\n        const { options , type  } = this;\n        return [\n            options,\n            overrides[type] || {},\n            defaults.datasets[type] || {},\n            {\n                type\n            },\n            defaults,\n            descriptors\n        ];\n    }\n resolveNamedOptions(scopes, names, context, prefixes = [\n        ''\n    ]) {\n        const result = {\n            $shared: true\n        };\n        const { resolver , subPrefixes  } = getResolver(this._resolverCache, scopes, prefixes);\n        let options = resolver;\n        if (needContext(resolver, names)) {\n            result.$shared = false;\n            context = isFunction(context) ? context() : context;\n            const subResolver = this.createResolver(scopes, context, subPrefixes);\n            options = _attachContext(resolver, context, subResolver);\n        }\n        for (const prop of names){\n            result[prop] = options[prop];\n        }\n        return result;\n    }\n createResolver(scopes, context, prefixes = [\n        ''\n    ], descriptorDefaults) {\n        const { resolver  } = getResolver(this._resolverCache, scopes, prefixes);\n        return isObject(context) ? _attachContext(resolver, context, undefined, descriptorDefaults) : resolver;\n    }\n}function getResolver(resolverCache, scopes, prefixes) {\n    let cache = resolverCache.get(scopes);\n    if (!cache) {\n        cache = new Map();\n        resolverCache.set(scopes, cache);\n    }\n    const cacheKey = prefixes.join();\n    let cached = cache.get(cacheKey);\n    if (!cached) {\n        const resolver = _createResolver(scopes, prefixes);\n        cached = {\n            resolver,\n            subPrefixes: prefixes.filter((p)=>!p.toLowerCase().includes('hover'))\n        };\n        cache.set(cacheKey, cached);\n    }\n    return cached;\n}\nconst hasFunction = (value)=>isObject(value) && Object.getOwnPropertyNames(value).reduce((acc, key)=>acc || isFunction(value[key]), false);\nfunction needContext(proxy, names) {\n    const { isScriptable , isIndexable  } = _descriptors(proxy);\n    for (const prop of names){\n        const scriptable = isScriptable(prop);\n        const indexable = isIndexable(prop);\n        const value = (indexable || scriptable) && proxy[prop];\n        if (scriptable && (isFunction(value) || hasFunction(value)) || indexable && isArray(value)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar version = \"4.0.1\";\n\nconst KNOWN_POSITIONS = [\n    'top',\n    'bottom',\n    'left',\n    'right',\n    'chartArea'\n];\nfunction positionIsHorizontal(position, axis) {\n    return position === 'top' || position === 'bottom' || KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x';\n}\nfunction compare2Level(l1, l2) {\n    return function(a, b) {\n        return a[l1] === b[l1] ? a[l2] - b[l2] : a[l1] - b[l1];\n    };\n}\nfunction onAnimationsComplete(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    chart.notifyPlugins('afterRender');\n    callback(animationOptions && animationOptions.onComplete, [\n        context\n    ], chart);\n}\nfunction onAnimationProgress(context) {\n    const chart = context.chart;\n    const animationOptions = chart.options.animation;\n    callback(animationOptions && animationOptions.onProgress, [\n        context\n    ], chart);\n}\n function getCanvas(item) {\n    if (_isDomSupported() && typeof item === 'string') {\n        item = document.getElementById(item);\n    } else if (item && item.length) {\n        item = item[0];\n    }\n    if (item && item.canvas) {\n        item = item.canvas;\n    }\n    return item;\n}\nconst instances = {};\nconst getChart = (key)=>{\n    const canvas = getCanvas(key);\n    return Object.values(instances).filter((c)=>c.canvas === canvas).pop();\n};\nfunction moveNumericKeys(obj, start, move) {\n    const keys = Object.keys(obj);\n    for (const key of keys){\n        const intKey = +key;\n        if (intKey >= start) {\n            const value = obj[key];\n            delete obj[key];\n            if (move > 0 || intKey > start) {\n                obj[intKey + move] = value;\n            }\n        }\n    }\n}\n function determineLastEvent(e, lastEvent, inChartArea, isClick) {\n    if (!inChartArea || e.type === 'mouseout') {\n        return null;\n    }\n    if (isClick) {\n        return lastEvent;\n    }\n    return e;\n}\nfunction getDatasetArea(meta) {\n    const { xScale , yScale  } = meta;\n    if (xScale && yScale) {\n        return {\n            left: xScale.left,\n            right: xScale.right,\n            top: yScale.top,\n            bottom: yScale.bottom\n        };\n    }\n}\nclass Chart {\n    static defaults = defaults;\n    static instances = instances;\n    static overrides = overrides;\n    static registry = registry;\n    static version = version;\n    static getChart = getChart;\n    static register(...items) {\n        registry.add(...items);\n        invalidatePlugins();\n    }\n    static unregister(...items) {\n        registry.remove(...items);\n        invalidatePlugins();\n    }\n    constructor(item, userConfig){\n        const config = this.config = new Config(userConfig);\n        const initialCanvas = getCanvas(item);\n        const existingChart = getChart(initialCanvas);\n        if (existingChart) {\n            throw new Error('Canvas is already in use. Chart with ID \\'' + existingChart.id + '\\'' + ' must be destroyed before the canvas with ID \\'' + existingChart.canvas.id + '\\' can be reused.');\n        }\n        const options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        this.platform = new (config.platform || _detectPlatform(initialCanvas))();\n        this.platform.updateConfig(config);\n        const context = this.platform.acquireContext(initialCanvas, options.aspectRatio);\n        const canvas = context && context.canvas;\n        const height = canvas && canvas.height;\n        const width = canvas && canvas.width;\n        this.id = uid();\n        this.ctx = context;\n        this.canvas = canvas;\n        this.width = width;\n        this.height = height;\n        this._options = options;\n        this._aspectRatio = this.aspectRatio;\n        this._layers = [];\n        this._metasets = [];\n        this._stacks = undefined;\n        this.boxes = [];\n        this.currentDevicePixelRatio = undefined;\n        this.chartArea = undefined;\n        this._active = [];\n        this._lastEvent = undefined;\n        this._listeners = {};\n         this._responsiveListeners = undefined;\n        this._sortedMetasets = [];\n        this.scales = {};\n        this._plugins = new PluginService();\n        this.$proxies = {};\n        this._hiddenIndices = {};\n        this.attached = false;\n        this._animationsDisabled = undefined;\n        this.$context = undefined;\n        this._doResize = debounce((mode)=>this.update(mode), options.resizeDelay || 0);\n        this._dataChanges = [];\n        instances[this.id] = this;\n        if (!context || !canvas) {\n            console.error(\"Failed to create chart: can't acquire context from the given item\");\n            return;\n        }\n        animator.listen(this, 'complete', onAnimationsComplete);\n        animator.listen(this, 'progress', onAnimationProgress);\n        this._initialize();\n        if (this.attached) {\n            this.update();\n        }\n    }\n    get aspectRatio() {\n        const { options: { aspectRatio , maintainAspectRatio  } , width , height , _aspectRatio  } = this;\n        if (!isNullOrUndef(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (maintainAspectRatio && _aspectRatio) {\n            return _aspectRatio;\n        }\n        return height ? width / height : null;\n    }\n    get data() {\n        return this.config.data;\n    }\n    set data(data) {\n        this.config.data = data;\n    }\n    get options() {\n        return this._options;\n    }\n    set options(options) {\n        this.config.options = options;\n    }\n    get registry() {\n        return registry;\n    }\n _initialize() {\n        this.notifyPlugins('beforeInit');\n        if (this.options.responsive) {\n            this.resize();\n        } else {\n            retinaScale(this, this.options.devicePixelRatio);\n        }\n        this.bindEvents();\n        this.notifyPlugins('afterInit');\n        return this;\n    }\n    clear() {\n        clearCanvas(this.canvas, this.ctx);\n        return this;\n    }\n    stop() {\n        animator.stop(this);\n        return this;\n    }\n resize(width, height) {\n        if (!animator.running(this)) {\n            this._resize(width, height);\n        } else {\n            this._resizeBeforeDraw = {\n                width,\n                height\n            };\n        }\n    }\n    _resize(width, height) {\n        const options = this.options;\n        const canvas = this.canvas;\n        const aspectRatio = options.maintainAspectRatio && this.aspectRatio;\n        const newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);\n        const newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();\n        const mode = this.width ? 'resize' : 'attach';\n        this.width = newSize.width;\n        this.height = newSize.height;\n        this._aspectRatio = this.aspectRatio;\n        if (!retinaScale(this, newRatio, true)) {\n            return;\n        }\n        this.notifyPlugins('resize', {\n            size: newSize\n        });\n        callback(options.onResize, [\n            this,\n            newSize\n        ], this);\n        if (this.attached) {\n            if (this._doResize(mode)) {\n                this.render();\n            }\n        }\n    }\n    ensureScalesHaveIDs() {\n        const options = this.options;\n        const scalesOptions = options.scales || {};\n        each(scalesOptions, (axisOptions, axisID)=>{\n            axisOptions.id = axisID;\n        });\n    }\n buildOrUpdateScales() {\n        const options = this.options;\n        const scaleOpts = options.scales;\n        const scales = this.scales;\n        const updated = Object.keys(scales).reduce((obj, id)=>{\n            obj[id] = false;\n            return obj;\n        }, {});\n        let items = [];\n        if (scaleOpts) {\n            items = items.concat(Object.keys(scaleOpts).map((id)=>{\n                const scaleOptions = scaleOpts[id];\n                const axis = determineAxis(id, scaleOptions);\n                const isRadial = axis === 'r';\n                const isHorizontal = axis === 'x';\n                return {\n                    options: scaleOptions,\n                    dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',\n                    dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'\n                };\n            }));\n        }\n        each(items, (item)=>{\n            const scaleOptions = item.options;\n            const id = scaleOptions.id;\n            const axis = determineAxis(id, scaleOptions);\n            const scaleType = valueOrDefault(scaleOptions.type, item.dtype);\n            if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {\n                scaleOptions.position = item.dposition;\n            }\n            updated[id] = true;\n            let scale = null;\n            if (id in scales && scales[id].type === scaleType) {\n                scale = scales[id];\n            } else {\n                const scaleClass = registry.getScale(scaleType);\n                scale = new scaleClass({\n                    id,\n                    type: scaleType,\n                    ctx: this.ctx,\n                    chart: this\n                });\n                scales[scale.id] = scale;\n            }\n            scale.init(scaleOptions, options);\n        });\n        each(updated, (hasUpdated, id)=>{\n            if (!hasUpdated) {\n                delete scales[id];\n            }\n        });\n        each(scales, (scale)=>{\n            layouts.configure(this, scale, scale.options);\n            layouts.addBox(this, scale);\n        });\n    }\n _updateMetasets() {\n        const metasets = this._metasets;\n        const numData = this.data.datasets.length;\n        const numMeta = metasets.length;\n        metasets.sort((a, b)=>a.index - b.index);\n        if (numMeta > numData) {\n            for(let i = numData; i < numMeta; ++i){\n                this._destroyDatasetMeta(i);\n            }\n            metasets.splice(numData, numMeta - numData);\n        }\n        this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));\n    }\n _removeUnreferencedMetasets() {\n        const { _metasets: metasets , data: { datasets  }  } = this;\n        if (metasets.length > datasets.length) {\n            delete this._stacks;\n        }\n        metasets.forEach((meta, index)=>{\n            if (datasets.filter((x)=>x === meta._dataset).length === 0) {\n                this._destroyDatasetMeta(index);\n            }\n        });\n    }\n    buildOrUpdateControllers() {\n        const newControllers = [];\n        const datasets = this.data.datasets;\n        let i, ilen;\n        this._removeUnreferencedMetasets();\n        for(i = 0, ilen = datasets.length; i < ilen; i++){\n            const dataset = datasets[i];\n            let meta = this.getDatasetMeta(i);\n            const type = dataset.type || this.config.type;\n            if (meta.type && meta.type !== type) {\n                this._destroyDatasetMeta(i);\n                meta = this.getDatasetMeta(i);\n            }\n            meta.type = type;\n            meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);\n            meta.order = dataset.order || 0;\n            meta.index = i;\n            meta.label = '' + dataset.label;\n            meta.visible = this.isDatasetVisible(i);\n            if (meta.controller) {\n                meta.controller.updateIndex(i);\n                meta.controller.linkScales();\n            } else {\n                const ControllerClass = registry.getController(type);\n                const { datasetElementType , dataElementType  } = defaults.datasets[type];\n                Object.assign(ControllerClass, {\n                    dataElementType: registry.getElement(dataElementType),\n                    datasetElementType: datasetElementType && registry.getElement(datasetElementType)\n                });\n                meta.controller = new ControllerClass(this, i);\n                newControllers.push(meta.controller);\n            }\n        }\n        this._updateMetasets();\n        return newControllers;\n    }\n _resetElements() {\n        each(this.data.datasets, (dataset, datasetIndex)=>{\n            this.getDatasetMeta(datasetIndex).controller.reset();\n        }, this);\n    }\n reset() {\n        this._resetElements();\n        this.notifyPlugins('reset');\n    }\n    update(mode) {\n        const config = this.config;\n        config.update();\n        const options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());\n        const animsDisabled = this._animationsDisabled = !options.animation;\n        this._updateScales();\n        this._checkEventBindings();\n        this._updateHiddenIndices();\n        this._plugins.invalidate();\n        if (this.notifyPlugins('beforeUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const newControllers = this.buildOrUpdateControllers();\n        this.notifyPlugins('beforeElementsUpdate');\n        let minPadding = 0;\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; i++){\n            const { controller  } = this.getDatasetMeta(i);\n            const reset = !animsDisabled && newControllers.indexOf(controller) === -1;\n            controller.buildOrUpdateElements(reset);\n            minPadding = Math.max(+controller.getMaxOverflow(), minPadding);\n        }\n        minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;\n        this._updateLayout(minPadding);\n        if (!animsDisabled) {\n            each(newControllers, (controller)=>{\n                controller.reset();\n            });\n        }\n        this._updateDatasets(mode);\n        this.notifyPlugins('afterUpdate', {\n            mode\n        });\n        this._layers.sort(compare2Level('z', '_idx'));\n        const { _active , _lastEvent  } = this;\n        if (_lastEvent) {\n            this._eventHandler(_lastEvent, true);\n        } else if (_active.length) {\n            this._updateHoverStyles(_active, _active, true);\n        }\n        this.render();\n    }\n _updateScales() {\n        each(this.scales, (scale)=>{\n            layouts.removeBox(this, scale);\n        });\n        this.ensureScalesHaveIDs();\n        this.buildOrUpdateScales();\n    }\n _checkEventBindings() {\n        const options = this.options;\n        const existingEvents = new Set(Object.keys(this._listeners));\n        const newEvents = new Set(options.events);\n        if (!setsEqual(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {\n            this.unbindEvents();\n            this.bindEvents();\n        }\n    }\n _updateHiddenIndices() {\n        const { _hiddenIndices  } = this;\n        const changes = this._getUniformDataChanges() || [];\n        for (const { method , start , count  } of changes){\n            const move = method === '_removeElements' ? -count : count;\n            moveNumericKeys(_hiddenIndices, start, move);\n        }\n    }\n _getUniformDataChanges() {\n        const _dataChanges = this._dataChanges;\n        if (!_dataChanges || !_dataChanges.length) {\n            return;\n        }\n        this._dataChanges = [];\n        const datasetCount = this.data.datasets.length;\n        const makeSet = (idx)=>new Set(_dataChanges.filter((c)=>c[0] === idx).map((c, i)=>i + ',' + c.splice(1).join(',')));\n        const changeSet = makeSet(0);\n        for(let i = 1; i < datasetCount; i++){\n            if (!setsEqual(changeSet, makeSet(i))) {\n                return;\n            }\n        }\n        return Array.from(changeSet).map((c)=>c.split(',')).map((a)=>({\n                method: a[1],\n                start: +a[2],\n                count: +a[3]\n            }));\n    }\n _updateLayout(minPadding) {\n        if (this.notifyPlugins('beforeLayout', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        layouts.update(this, this.width, this.height, minPadding);\n        const area = this.chartArea;\n        const noArea = area.width <= 0 || area.height <= 0;\n        this._layers = [];\n        each(this.boxes, (box)=>{\n            if (noArea && box.position === 'chartArea') {\n                return;\n            }\n            if (box.configure) {\n                box.configure();\n            }\n            this._layers.push(...box._layers());\n        }, this);\n        this._layers.forEach((item, index)=>{\n            item._idx = index;\n        });\n        this.notifyPlugins('afterLayout');\n    }\n _updateDatasets(mode) {\n        if (this.notifyPlugins('beforeDatasetsUpdate', {\n            mode,\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        for(let i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this.getDatasetMeta(i).controller.configure();\n        }\n        for(let i1 = 0, ilen1 = this.data.datasets.length; i1 < ilen1; ++i1){\n            this._updateDataset(i1, isFunction(mode) ? mode({\n                datasetIndex: i1\n            }) : mode);\n        }\n        this.notifyPlugins('afterDatasetsUpdate', {\n            mode\n        });\n    }\n _updateDataset(index, mode) {\n        const meta = this.getDatasetMeta(index);\n        const args = {\n            meta,\n            index,\n            mode,\n            cancelable: true\n        };\n        if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {\n            return;\n        }\n        meta.controller._update(mode);\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetUpdate', args);\n    }\n    render() {\n        if (this.notifyPlugins('beforeRender', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        if (animator.has(this)) {\n            if (this.attached && !animator.running(this)) {\n                animator.start(this);\n            }\n        } else {\n            this.draw();\n            onAnimationsComplete({\n                chart: this\n            });\n        }\n    }\n    draw() {\n        let i;\n        if (this._resizeBeforeDraw) {\n            const { width , height  } = this._resizeBeforeDraw;\n            this._resize(width, height);\n            this._resizeBeforeDraw = null;\n        }\n        this.clear();\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        if (this.notifyPlugins('beforeDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const layers = this._layers;\n        for(i = 0; i < layers.length && layers[i].z <= 0; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this._drawDatasets();\n        for(; i < layers.length; ++i){\n            layers[i].draw(this.chartArea);\n        }\n        this.notifyPlugins('afterDraw');\n    }\n _getSortedDatasetMetas(filterVisible) {\n        const metasets = this._sortedMetasets;\n        const result = [];\n        let i, ilen;\n        for(i = 0, ilen = metasets.length; i < ilen; ++i){\n            const meta = metasets[i];\n            if (!filterVisible || meta.visible) {\n                result.push(meta);\n            }\n        }\n        return result;\n    }\n getSortedVisibleDatasetMetas() {\n        return this._getSortedDatasetMetas(true);\n    }\n _drawDatasets() {\n        if (this.notifyPlugins('beforeDatasetsDraw', {\n            cancelable: true\n        }) === false) {\n            return;\n        }\n        const metasets = this.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            this._drawDataset(metasets[i]);\n        }\n        this.notifyPlugins('afterDatasetsDraw');\n    }\n _drawDataset(meta) {\n        const ctx = this.ctx;\n        const clip = meta._clip;\n        const useClip = !clip.disabled;\n        const area = getDatasetArea(meta) || this.chartArea;\n        const args = {\n            meta,\n            index: meta.index,\n            cancelable: true\n        };\n        if (this.notifyPlugins('beforeDatasetDraw', args) === false) {\n            return;\n        }\n        if (useClip) {\n            clipArea(ctx, {\n                left: clip.left === false ? 0 : area.left - clip.left,\n                right: clip.right === false ? this.width : area.right + clip.right,\n                top: clip.top === false ? 0 : area.top - clip.top,\n                bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom\n            });\n        }\n        meta.controller.draw();\n        if (useClip) {\n            unclipArea(ctx);\n        }\n        args.cancelable = false;\n        this.notifyPlugins('afterDatasetDraw', args);\n    }\n isPointInArea(point) {\n        return _isPointInArea(point, this.chartArea, this._minPadding);\n    }\n    getElementsAtEventForMode(e, mode, options, useFinalPosition) {\n        const method = Interaction.modes[mode];\n        if (typeof method === 'function') {\n            return method(this, e, options, useFinalPosition);\n        }\n        return [];\n    }\n    getDatasetMeta(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        const metasets = this._metasets;\n        let meta = metasets.filter((x)=>x && x._dataset === dataset).pop();\n        if (!meta) {\n            meta = {\n                type: null,\n                data: [],\n                dataset: null,\n                controller: null,\n                hidden: null,\n                xAxisID: null,\n                yAxisID: null,\n                order: dataset && dataset.order || 0,\n                index: datasetIndex,\n                _dataset: dataset,\n                _parsed: [],\n                _sorted: false\n            };\n            metasets.push(meta);\n        }\n        return meta;\n    }\n    getContext() {\n        return this.$context || (this.$context = createContext(null, {\n            chart: this,\n            type: 'chart'\n        }));\n    }\n    getVisibleDatasetCount() {\n        return this.getSortedVisibleDatasetMetas().length;\n    }\n    isDatasetVisible(datasetIndex) {\n        const dataset = this.data.datasets[datasetIndex];\n        if (!dataset) {\n            return false;\n        }\n        const meta = this.getDatasetMeta(datasetIndex);\n        return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;\n    }\n    setDatasetVisibility(datasetIndex, visible) {\n        const meta = this.getDatasetMeta(datasetIndex);\n        meta.hidden = !visible;\n    }\n    toggleDataVisibility(index) {\n        this._hiddenIndices[index] = !this._hiddenIndices[index];\n    }\n    getDataVisibility(index) {\n        return !this._hiddenIndices[index];\n    }\n _updateVisibility(datasetIndex, dataIndex, visible) {\n        const mode = visible ? 'show' : 'hide';\n        const meta = this.getDatasetMeta(datasetIndex);\n        const anims = meta.controller._resolveAnimations(undefined, mode);\n        if (defined(dataIndex)) {\n            meta.data[dataIndex].hidden = !visible;\n            this.update();\n        } else {\n            this.setDatasetVisibility(datasetIndex, visible);\n            anims.update(meta, {\n                visible\n            });\n            this.update((ctx)=>ctx.datasetIndex === datasetIndex ? mode : undefined);\n        }\n    }\n    hide(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, false);\n    }\n    show(datasetIndex, dataIndex) {\n        this._updateVisibility(datasetIndex, dataIndex, true);\n    }\n _destroyDatasetMeta(datasetIndex) {\n        const meta = this._metasets[datasetIndex];\n        if (meta && meta.controller) {\n            meta.controller._destroy();\n        }\n        delete this._metasets[datasetIndex];\n    }\n    _stop() {\n        let i, ilen;\n        this.stop();\n        animator.remove(this);\n        for(i = 0, ilen = this.data.datasets.length; i < ilen; ++i){\n            this._destroyDatasetMeta(i);\n        }\n    }\n    destroy() {\n        this.notifyPlugins('beforeDestroy');\n        const { canvas , ctx  } = this;\n        this._stop();\n        this.config.clearCache();\n        if (canvas) {\n            this.unbindEvents();\n            clearCanvas(canvas, ctx);\n            this.platform.releaseContext(ctx);\n            this.canvas = null;\n            this.ctx = null;\n        }\n        delete instances[this.id];\n        this.notifyPlugins('afterDestroy');\n    }\n    toBase64Image(...args) {\n        return this.canvas.toDataURL(...args);\n    }\n bindEvents() {\n        this.bindUserEvents();\n        if (this.options.responsive) {\n            this.bindResponsiveEvents();\n        } else {\n            this.attached = true;\n        }\n    }\n bindUserEvents() {\n        const listeners = this._listeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const listener = (e, x, y)=>{\n            e.offsetX = x;\n            e.offsetY = y;\n            this._eventHandler(e);\n        };\n        each(this.options.events, (type)=>_add(type, listener));\n    }\n bindResponsiveEvents() {\n        if (!this._responsiveListeners) {\n            this._responsiveListeners = {};\n        }\n        const listeners = this._responsiveListeners;\n        const platform = this.platform;\n        const _add = (type, listener)=>{\n            platform.addEventListener(this, type, listener);\n            listeners[type] = listener;\n        };\n        const _remove = (type, listener)=>{\n            if (listeners[type]) {\n                platform.removeEventListener(this, type, listener);\n                delete listeners[type];\n            }\n        };\n        const listener = (width, height)=>{\n            if (this.canvas) {\n                this.resize(width, height);\n            }\n        };\n        let detached;\n        const attached = ()=>{\n            _remove('attach', attached);\n            this.attached = true;\n            this.resize();\n            _add('resize', listener);\n            _add('detach', detached);\n        };\n        detached = ()=>{\n            this.attached = false;\n            _remove('resize', listener);\n            this._stop();\n            this._resize(0, 0);\n            _add('attach', attached);\n        };\n        if (platform.isAttached(this.canvas)) {\n            attached();\n        } else {\n            detached();\n        }\n    }\n unbindEvents() {\n        each(this._listeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._listeners = {};\n        each(this._responsiveListeners, (listener, type)=>{\n            this.platform.removeEventListener(this, type, listener);\n        });\n        this._responsiveListeners = undefined;\n    }\n    updateHoverStyle(items, mode, enabled) {\n        const prefix = enabled ? 'set' : 'remove';\n        let meta, item, i, ilen;\n        if (mode === 'dataset') {\n            meta = this.getDatasetMeta(items[0].datasetIndex);\n            meta.controller['_' + prefix + 'DatasetHoverStyle']();\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            item = items[i];\n            const controller = item && this.getDatasetMeta(item.datasetIndex).controller;\n            if (controller) {\n                controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);\n            }\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements) {\n        const lastActive = this._active || [];\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('No dataset found at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed) {\n            this._active = active;\n            this._lastEvent = null;\n            this._updateHoverStyles(active, lastActive);\n        }\n    }\n notifyPlugins(hook, args, filter) {\n        return this._plugins.notify(this, hook, args, filter);\n    }\n isPluginEnabled(pluginId) {\n        return this._plugins._cache.filter((p)=>p.plugin.id === pluginId).length === 1;\n    }\n _updateHoverStyles(active, lastActive, replay) {\n        const hoverOptions = this.options.hover;\n        const diff = (a, b)=>a.filter((x)=>!b.some((y)=>x.datasetIndex === y.datasetIndex && x.index === y.index));\n        const deactivated = diff(lastActive, active);\n        const activated = replay ? active : diff(active, lastActive);\n        if (deactivated.length) {\n            this.updateHoverStyle(deactivated, hoverOptions.mode, false);\n        }\n        if (activated.length && hoverOptions.mode) {\n            this.updateHoverStyle(activated, hoverOptions.mode, true);\n        }\n    }\n _eventHandler(e, replay) {\n        const args = {\n            event: e,\n            replay,\n            cancelable: true,\n            inChartArea: this.isPointInArea(e)\n        };\n        const eventFilter = (plugin)=>(plugin.options.events || this.options.events).includes(e.native.type);\n        if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {\n            return;\n        }\n        const changed = this._handleEvent(e, replay, args.inChartArea);\n        args.cancelable = false;\n        this.notifyPlugins('afterEvent', args, eventFilter);\n        if (changed || args.changed) {\n            this.render();\n        }\n        return this;\n    }\n _handleEvent(e, replay, inChartArea) {\n        const { _active: lastActive = [] , options  } = this;\n        const useFinalPosition = replay;\n        const active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);\n        const isClick = _isClickEvent(e);\n        const lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);\n        if (inChartArea) {\n            this._lastEvent = null;\n            callback(options.onHover, [\n                e,\n                active,\n                this\n            ], this);\n            if (isClick) {\n                callback(options.onClick, [\n                    e,\n                    active,\n                    this\n                ], this);\n            }\n        }\n        const changed = !_elementsEqual(active, lastActive);\n        if (changed || replay) {\n            this._active = active;\n            this._updateHoverStyles(active, lastActive, replay);\n        }\n        this._lastEvent = lastEvent;\n        return changed;\n    }\n _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive;\n        }\n        const hoverOptions = this.options.hover;\n        return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);\n    }\n}\nfunction invalidatePlugins() {\n    return each(Chart.instances, (chart)=>chart._plugins.invalidate());\n}\nvar Chart$1 = Chart;\n\nfunction clipArc(ctx, element, endAngle) {\n    const { startAngle , pixelMargin , x , y , outerRadius , innerRadius  } = element;\n    let angleMargin = pixelMargin / outerRadius;\n    // Draw an inner border by clipping the arc and drawing a double-width border\n    // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders\n    ctx.beginPath();\n    ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);\n    if (innerRadius > pixelMargin) {\n        angleMargin = pixelMargin / innerRadius;\n        ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);\n    } else {\n        ctx.arc(x, y, pixelMargin, endAngle + HALF_PI, startAngle - HALF_PI);\n    }\n    ctx.closePath();\n    ctx.clip();\n}\nfunction toRadiusCorners(value) {\n    return _readValueToProps(value, [\n        'outerStart',\n        'outerEnd',\n        'innerStart',\n        'innerEnd'\n    ]);\n}\n/**\n * Parse border radius from the provided options\n */ function parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {\n    const o = toRadiusCorners(arc.options.borderRadius);\n    const halfThickness = (outerRadius - innerRadius) / 2;\n    const innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);\n    // Outer limits are complicated. We want to compute the available angular distance at\n    // a radius of outerRadius - borderRadius because for small angular distances, this term limits.\n    // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.\n    //\n    // If the borderRadius is large, that value can become negative.\n    // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius\n    // we know that the thickness term will dominate and compute the limits at that point\n    const computeOuterLimit = (val)=>{\n        const outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;\n        return _limitValue(val, 0, Math.min(halfThickness, outerArcLimit));\n    };\n    return {\n        outerStart: computeOuterLimit(o.outerStart),\n        outerEnd: computeOuterLimit(o.outerEnd),\n        innerStart: _limitValue(o.innerStart, 0, innerLimit),\n        innerEnd: _limitValue(o.innerEnd, 0, innerLimit)\n    };\n}\n/**\n * Convert (r, ) to (x, y)\n */ function rThetaToXY(r, theta, x, y) {\n    return {\n        x: x + r * Math.cos(theta),\n        y: y + r * Math.sin(theta)\n    };\n}\n/**\n * Path the arc, respecting border radius by separating into left and right halves.\n *\n *   Start      End\n *\n *    1--->a--->2    Outer\n *   /           \\\n *   8           3\n *   |           |\n *   |           |\n *   7           4\n *   \\           /\n *    6<---b<---5    Inner\n */ function pathArc(ctx, element, offset, spacing, end, circular) {\n    const { x , y , startAngle: start , pixelMargin , innerRadius: innerR  } = element;\n    const outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);\n    const innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;\n    let spacingOffset = 0;\n    const alpha = end - start;\n    if (spacing) {\n        // When spacing is present, it is the same for all items\n        // So we adjust the start and end angle of the arc such that\n        // the distance is the same as it would be without the spacing\n        const noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;\n        const noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;\n        const avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;\n        const adjustedAngle = avNogSpacingRadius !== 0 ? alpha * avNogSpacingRadius / (avNogSpacingRadius + spacing) : alpha;\n        spacingOffset = (alpha - adjustedAngle) / 2;\n    }\n    const beta = Math.max(0.001, alpha * outerRadius - offset / PI) / outerRadius;\n    const angleOffset = (alpha - beta) / 2;\n    const startAngle = start + angleOffset + spacingOffset;\n    const endAngle = end - angleOffset - spacingOffset;\n    const { outerStart , outerEnd , innerStart , innerEnd  } = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle);\n    const outerStartAdjustedRadius = outerRadius - outerStart;\n    const outerEndAdjustedRadius = outerRadius - outerEnd;\n    const outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;\n    const outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;\n    const innerStartAdjustedRadius = innerRadius + innerStart;\n    const innerEndAdjustedRadius = innerRadius + innerEnd;\n    const innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;\n    const innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;\n    ctx.beginPath();\n    if (circular) {\n        // The first arc segments from point 1 to point a to point 2\n        const outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;\n        ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);\n        ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);\n        // The corner segment from point 2 to point 3\n        if (outerEnd > 0) {\n            const pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + HALF_PI);\n        }\n        // The line from point 3 to point 4\n        const p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);\n        ctx.lineTo(p4.x, p4.y);\n        // The corner segment from point 4 to point 5\n        if (innerEnd > 0) {\n            const pCenter1 = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);\n            ctx.arc(pCenter1.x, pCenter1.y, innerEnd, endAngle + HALF_PI, innerEndAdjustedAngle + Math.PI);\n        }\n        // The inner arc from point 5 to point b to point 6\n        const innerMidAdjustedAngle = (endAngle - innerEnd / innerRadius + (startAngle + innerStart / innerRadius)) / 2;\n        ctx.arc(x, y, innerRadius, endAngle - innerEnd / innerRadius, innerMidAdjustedAngle, true);\n        ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + innerStart / innerRadius, true);\n        // The corner segment from point 6 to point 7\n        if (innerStart > 0) {\n            const pCenter2 = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter2.x, pCenter2.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - HALF_PI);\n        }\n        // The line from point 7 to point 8\n        const p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);\n        ctx.lineTo(p8.x, p8.y);\n        // The corner segment from point 8 to point 1\n        if (outerStart > 0) {\n            const pCenter3 = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);\n            ctx.arc(pCenter3.x, pCenter3.y, outerStart, startAngle - HALF_PI, outerStartAdjustedAngle);\n        }\n    } else {\n        ctx.moveTo(x, y);\n        const outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;\n        const outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerStartX, outerStartY);\n        const outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;\n        const outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;\n        ctx.lineTo(outerEndX, outerEndY);\n    }\n    ctx.closePath();\n}\nfunction drawArc(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference  } = element;\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.fill();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    pathArc(ctx, element, offset, spacing, endAngle, circular);\n    ctx.fill();\n    return endAngle;\n}\nfunction drawBorder(ctx, element, offset, spacing, circular) {\n    const { fullCircles , startAngle , circumference , options  } = element;\n    const { borderWidth , borderJoinStyle  } = options;\n    const inner = options.borderAlign === 'inner';\n    if (!borderWidth) {\n        return;\n    }\n    if (inner) {\n        ctx.lineWidth = borderWidth * 2;\n        ctx.lineJoin = borderJoinStyle || 'round';\n    } else {\n        ctx.lineWidth = borderWidth;\n        ctx.lineJoin = borderJoinStyle || 'bevel';\n    }\n    let endAngle = element.endAngle;\n    if (fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        for(let i = 0; i < fullCircles; ++i){\n            ctx.stroke();\n        }\n        if (!isNaN(circumference)) {\n            endAngle = startAngle + (circumference % TAU || TAU);\n        }\n    }\n    if (inner) {\n        clipArc(ctx, element, endAngle);\n    }\n    if (!fullCircles) {\n        pathArc(ctx, element, offset, spacing, endAngle, circular);\n        ctx.stroke();\n    }\n}\nclass ArcElement extends Element {\n    static id = 'arc';\n    static defaults = {\n        borderAlign: 'center',\n        borderColor: '#fff',\n        borderJoinStyle: undefined,\n        borderRadius: 0,\n        borderWidth: 2,\n        offset: 0,\n        spacing: 0,\n        angle: undefined,\n        circular: true\n    };\n    static defaultRoutes = {\n        backgroundColor: 'backgroundColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.circumference = undefined;\n        this.startAngle = undefined;\n        this.endAngle = undefined;\n        this.innerRadius = undefined;\n        this.outerRadius = undefined;\n        this.pixelMargin = 0;\n        this.fullCircles = 0;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(chartX, chartY, useFinalPosition) {\n        const point = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        const { angle , distance  } = getAngleFromPoint(point, {\n            x: chartX,\n            y: chartY\n        });\n        const { startAngle , endAngle , innerRadius , outerRadius , circumference  } = this.getProps([\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius',\n            'circumference'\n        ], useFinalPosition);\n        const rAdjust = this.options.spacing / 2;\n        const _circumference = valueOrDefault(circumference, endAngle - startAngle);\n        const betweenAngles = _circumference >= TAU || _angleBetween(angle, startAngle, endAngle);\n        const withinRadius = _isBetween(distance, innerRadius + rAdjust, outerRadius + rAdjust);\n        return betweenAngles && withinRadius;\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , startAngle , endAngle , innerRadius , outerRadius  } = this.getProps([\n            'x',\n            'y',\n            'startAngle',\n            'endAngle',\n            'innerRadius',\n            'outerRadius',\n            'circumference', \n        ], useFinalPosition);\n        const { offset , spacing  } = this.options;\n        const halfAngle = (startAngle + endAngle) / 2;\n        const halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;\n        return {\n            x: x + Math.cos(halfAngle) * halfRadius,\n            y: y + Math.sin(halfAngle) * halfRadius\n        };\n    }\n    tooltipPosition(useFinalPosition) {\n        return this.getCenterPoint(useFinalPosition);\n    }\n    draw(ctx) {\n        const { options , circumference  } = this;\n        const offset = (options.offset || 0) / 4;\n        const spacing = (options.spacing || 0) / 2;\n        const circular = options.circular;\n        this.pixelMargin = options.borderAlign === 'inner' ? 0.33 : 0;\n        this.fullCircles = circumference > TAU ? Math.floor(circumference / TAU) : 0;\n        if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {\n            return;\n        }\n        ctx.save();\n        const halfAngle = (this.startAngle + this.endAngle) / 2;\n        ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);\n        const fix = 1 - Math.sin(Math.min(PI, circumference || 0));\n        const radiusOffset = offset * fix;\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        drawArc(ctx, this, radiusOffset, spacing, circular);\n        drawBorder(ctx, this, radiusOffset, spacing, circular);\n        ctx.restore();\n    }\n}\n\nfunction setStyle(ctx, options, style = options) {\n    ctx.lineCap = valueOrDefault(style.borderCapStyle, options.borderCapStyle);\n    ctx.setLineDash(valueOrDefault(style.borderDash, options.borderDash));\n    ctx.lineDashOffset = valueOrDefault(style.borderDashOffset, options.borderDashOffset);\n    ctx.lineJoin = valueOrDefault(style.borderJoinStyle, options.borderJoinStyle);\n    ctx.lineWidth = valueOrDefault(style.borderWidth, options.borderWidth);\n    ctx.strokeStyle = valueOrDefault(style.borderColor, options.borderColor);\n}\nfunction lineTo(ctx, previous, target) {\n    ctx.lineTo(target.x, target.y);\n}\nfunction getLineMethod(options) {\n    if (options.stepped) {\n        return _steppedLineTo;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierCurveTo;\n    }\n    return lineTo;\n}\nfunction pathVars(points, segment, params = {}) {\n    const count = points.length;\n    const { start: paramsStart = 0 , end: paramsEnd = count - 1  } = params;\n    const { start: segmentStart , end: segmentEnd  } = segment;\n    const start = Math.max(paramsStart, segmentStart);\n    const end = Math.min(paramsEnd, segmentEnd);\n    const outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;\n    return {\n        count,\n        start,\n        loop: segment.loop,\n        ilen: end < start && !outside ? count + end - start : end - start\n    };\n}\n function pathSegment(ctx, line, segment, params) {\n    const { points , options  } = line;\n    const { count , start , loop , ilen  } = pathVars(points, segment, params);\n    const lineMethod = getLineMethod(options);\n    let { move =true , reverse  } = params || {};\n    let i, point, prev;\n    for(i = 0; i <= ilen; ++i){\n        point = points[(start + (reverse ? ilen - i : i)) % count];\n        if (point.skip) {\n            continue;\n        } else if (move) {\n            ctx.moveTo(point.x, point.y);\n            move = false;\n        } else {\n            lineMethod(ctx, prev, point, reverse, options.stepped);\n        }\n        prev = point;\n    }\n    if (loop) {\n        point = points[(start + (reverse ? ilen : 0)) % count];\n        lineMethod(ctx, prev, point, reverse, options.stepped);\n    }\n    return !!loop;\n}\n function fastPathSegment(ctx, line, segment, params) {\n    const points = line.points;\n    const { count , start , ilen  } = pathVars(points, segment, params);\n    const { move =true , reverse  } = params || {};\n    let avgX = 0;\n    let countX = 0;\n    let i, point, prevX, minY, maxY, lastY;\n    const pointIndex = (index)=>(start + (reverse ? ilen - index : index)) % count;\n    const drawX = ()=>{\n        if (minY !== maxY) {\n            ctx.lineTo(avgX, maxY);\n            ctx.lineTo(avgX, minY);\n            ctx.lineTo(avgX, lastY);\n        }\n    };\n    if (move) {\n        point = points[pointIndex(0)];\n        ctx.moveTo(point.x, point.y);\n    }\n    for(i = 0; i <= ilen; ++i){\n        point = points[pointIndex(i)];\n        if (point.skip) {\n            continue;\n        }\n        const x = point.x;\n        const y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n            } else if (y > maxY) {\n                maxY = y;\n            }\n            avgX = (countX * avgX + x) / ++countX;\n        } else {\n            drawX();\n            ctx.lineTo(x, y);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n        }\n        lastY = y;\n    }\n    drawX();\n}\n function _getSegmentMethod(line) {\n    const opts = line.options;\n    const borderDash = opts.borderDash && opts.borderDash.length;\n    const useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;\n    return useFastPath ? fastPathSegment : pathSegment;\n}\n function _getInterpolationMethod(options) {\n    if (options.stepped) {\n        return _steppedInterpolation;\n    }\n    if (options.tension || options.cubicInterpolationMode === 'monotone') {\n        return _bezierInterpolation;\n    }\n    return _pointInLine;\n}\nfunction strokePathWithCache(ctx, line, start, count) {\n    let path = line._path;\n    if (!path) {\n        path = line._path = new Path2D();\n        if (line.path(path, start, count)) {\n            path.closePath();\n        }\n    }\n    setStyle(ctx, line.options);\n    ctx.stroke(path);\n}\nfunction strokePathDirect(ctx, line, start, count) {\n    const { segments , options  } = line;\n    const segmentMethod = _getSegmentMethod(line);\n    for (const segment of segments){\n        setStyle(ctx, options, segment.style);\n        ctx.beginPath();\n        if (segmentMethod(ctx, line, segment, {\n            start,\n            end: start + count - 1\n        })) {\n            ctx.closePath();\n        }\n        ctx.stroke();\n    }\n}\nconst usePath2D = typeof Path2D === 'function';\nfunction draw(ctx, line, start, count) {\n    if (usePath2D && !line.options.segment) {\n        strokePathWithCache(ctx, line, start, count);\n    } else {\n        strokePathDirect(ctx, line, start, count);\n    }\n}\nclass LineElement extends Element {\n    static id = 'line';\n static defaults = {\n        borderCapStyle: 'butt',\n        borderDash: [],\n        borderDashOffset: 0,\n        borderJoinStyle: 'miter',\n        borderWidth: 3,\n        capBezierPoints: true,\n        cubicInterpolationMode: 'default',\n        fill: false,\n        spanGaps: false,\n        stepped: false,\n        tension: 0\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    static descriptors = {\n        _scriptable: true,\n        _indexable: (name)=>name !== 'borderDash' && name !== 'fill'\n    };\n    constructor(cfg){\n        super();\n        this.animated = true;\n        this.options = undefined;\n        this._chart = undefined;\n        this._loop = undefined;\n        this._fullLoop = undefined;\n        this._path = undefined;\n        this._points = undefined;\n        this._segments = undefined;\n        this._decimated = false;\n        this._pointsUpdated = false;\n        this._datasetIndex = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    updateControlPoints(chartArea, indexAxis) {\n        const options = this.options;\n        if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {\n            const loop = options.spanGaps ? this._loop : this._fullLoop;\n            _updateBezierControlPoints(this._points, options, chartArea, loop, indexAxis);\n            this._pointsUpdated = true;\n        }\n    }\n    set points(points) {\n        this._points = points;\n        delete this._segments;\n        delete this._path;\n        this._pointsUpdated = false;\n    }\n    get points() {\n        return this._points;\n    }\n    get segments() {\n        return this._segments || (this._segments = _computeSegments(this, this.options.segment));\n    }\n first() {\n        const segments = this.segments;\n        const points = this.points;\n        return segments.length && points[segments[0].start];\n    }\n last() {\n        const segments = this.segments;\n        const points = this.points;\n        const count = segments.length;\n        return count && points[segments[count - 1].end];\n    }\n interpolate(point, property) {\n        const options = this.options;\n        const value = point[property];\n        const points = this.points;\n        const segments = _boundSegments(this, {\n            property,\n            start: value,\n            end: value\n        });\n        if (!segments.length) {\n            return;\n        }\n        const result = [];\n        const _interpolate = _getInterpolationMethod(options);\n        let i, ilen;\n        for(i = 0, ilen = segments.length; i < ilen; ++i){\n            const { start , end  } = segments[i];\n            const p1 = points[start];\n            const p2 = points[end];\n            if (p1 === p2) {\n                result.push(p1);\n                continue;\n            }\n            const t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));\n            const interpolated = _interpolate(p1, p2, t, options.stepped);\n            interpolated[property] = point[property];\n            result.push(interpolated);\n        }\n        return result.length === 1 ? result[0] : result;\n    }\n pathSegment(ctx, segment, params) {\n        const segmentMethod = _getSegmentMethod(this);\n        return segmentMethod(ctx, this, segment, params);\n    }\n path(ctx, start, count) {\n        const segments = this.segments;\n        const segmentMethod = _getSegmentMethod(this);\n        let loop = this._loop;\n        start = start || 0;\n        count = count || this.points.length - start;\n        for (const segment of segments){\n            loop &= segmentMethod(ctx, this, segment, {\n                start,\n                end: start + count - 1\n            });\n        }\n        return !!loop;\n    }\n draw(ctx, chartArea, start, count) {\n        const options = this.options || {};\n        const points = this.points || [];\n        if (points.length && options.borderWidth) {\n            ctx.save();\n            draw(ctx, this, start, count);\n            ctx.restore();\n        }\n        if (this.animated) {\n            this._pointsUpdated = false;\n            this._path = undefined;\n        }\n    }\n}\n\nfunction inRange$1(el, pos, axis, useFinalPosition) {\n    const options = el.options;\n    const { [axis]: value  } = el.getProps([\n        axis\n    ], useFinalPosition);\n    return Math.abs(pos - value) < options.radius + options.hitRadius;\n}\nclass PointElement extends Element {\n    static id = 'point';\n    /**\n   * @type {any}\n   */ static defaults = {\n        borderWidth: 1,\n        hitRadius: 1,\n        hoverBorderWidth: 1,\n        hoverRadius: 4,\n        pointStyle: 'circle',\n        radius: 3,\n        rotation: 0\n    };\n    /**\n   * @type {any}\n   */ static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.parsed = undefined;\n        this.skip = undefined;\n        this.stop = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        const options = this.options;\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2) < Math.pow(options.hitRadius + options.radius, 2);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange$1(this, mouseX, 'x', useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange$1(this, mouseY, 'y', useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y  } = this.getProps([\n            'x',\n            'y'\n        ], useFinalPosition);\n        return {\n            x,\n            y\n        };\n    }\n    size(options) {\n        options = options || this.options || {};\n        let radius = options.radius || 0;\n        radius = Math.max(radius, radius && options.hoverRadius || 0);\n        const borderWidth = radius && options.borderWidth || 0;\n        return (radius + borderWidth) * 2;\n    }\n    draw(ctx, area) {\n        const options = this.options;\n        if (this.skip || options.radius < 0.1 || !_isPointInArea(this, area, this.size(options) / 2)) {\n            return;\n        }\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.fillStyle = options.backgroundColor;\n        drawPoint(ctx, options, this.x, this.y);\n    }\n    getRange() {\n        const options = this.options || {};\n        // @ts-expect-error Fallbacks should never be hit in practice\n        return options.radius + options.hitRadius;\n    }\n}\n\nfunction getBarBounds(bar, useFinalPosition) {\n    const { x , y , base , width , height  } =  bar.getProps([\n        'x',\n        'y',\n        'base',\n        'width',\n        'height'\n    ], useFinalPosition);\n    let left, right, top, bottom, half;\n    if (bar.horizontal) {\n        half = height / 2;\n        left = Math.min(x, base);\n        right = Math.max(x, base);\n        top = y - half;\n        bottom = y + half;\n    } else {\n        half = width / 2;\n        left = x - half;\n        right = x + half;\n        top = Math.min(y, base);\n        bottom = Math.max(y, base);\n    }\n    return {\n        left,\n        top,\n        right,\n        bottom\n    };\n}\nfunction skipOrLimit(skip, value, min, max) {\n    return skip ? 0 : _limitValue(value, min, max);\n}\nfunction parseBorderWidth(bar, maxW, maxH) {\n    const value = bar.options.borderWidth;\n    const skip = bar.borderSkipped;\n    const o = toTRBL(value);\n    return {\n        t: skipOrLimit(skip.top, o.top, 0, maxH),\n        r: skipOrLimit(skip.right, o.right, 0, maxW),\n        b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),\n        l: skipOrLimit(skip.left, o.left, 0, maxW)\n    };\n}\nfunction parseBorderRadius(bar, maxW, maxH) {\n    const { enableBorderRadius  } = bar.getProps([\n        'enableBorderRadius'\n    ]);\n    const value = bar.options.borderRadius;\n    const o = toTRBLCorners(value);\n    const maxR = Math.min(maxW, maxH);\n    const skip = bar.borderSkipped;\n    const enableBorder = enableBorderRadius || isObject(value);\n    return {\n        topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),\n        topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),\n        bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),\n        bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)\n    };\n}\nfunction boundingRects(bar) {\n    const bounds = getBarBounds(bar);\n    const width = bounds.right - bounds.left;\n    const height = bounds.bottom - bounds.top;\n    const border = parseBorderWidth(bar, width / 2, height / 2);\n    const radius = parseBorderRadius(bar, width / 2, height / 2);\n    return {\n        outer: {\n            x: bounds.left,\n            y: bounds.top,\n            w: width,\n            h: height,\n            radius\n        },\n        inner: {\n            x: bounds.left + border.l,\n            y: bounds.top + border.t,\n            w: width - border.l - border.r,\n            h: height - border.t - border.b,\n            radius: {\n                topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),\n                topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),\n                bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),\n                bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r))\n            }\n        }\n    };\n}\nfunction inRange(bar, x, y, useFinalPosition) {\n    const skipX = x === null;\n    const skipY = y === null;\n    const skipBoth = skipX && skipY;\n    const bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);\n    return bounds && (skipX || _isBetween(x, bounds.left, bounds.right)) && (skipY || _isBetween(y, bounds.top, bounds.bottom));\n}\nfunction hasRadius(radius) {\n    return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;\n}\n function addNormalRectPath(ctx, rect) {\n    ctx.rect(rect.x, rect.y, rect.w, rect.h);\n}\nfunction inflateRect(rect, amount, refRect = {}) {\n    const x = rect.x !== refRect.x ? -amount : 0;\n    const y = rect.y !== refRect.y ? -amount : 0;\n    const w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;\n    const h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;\n    return {\n        x: rect.x + x,\n        y: rect.y + y,\n        w: rect.w + w,\n        h: rect.h + h,\n        radius: rect.radius\n    };\n}\nclass BarElement extends Element {\n    static id = 'bar';\n static defaults = {\n        borderSkipped: 'start',\n        borderWidth: 0,\n        borderRadius: 0,\n        inflateAmount: 'auto',\n        pointStyle: undefined\n    };\n static defaultRoutes = {\n        backgroundColor: 'backgroundColor',\n        borderColor: 'borderColor'\n    };\n    constructor(cfg){\n        super();\n        this.options = undefined;\n        this.horizontal = undefined;\n        this.base = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.inflateAmount = undefined;\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    draw(ctx) {\n        const { inflateAmount , options: { borderColor , backgroundColor  }  } = this;\n        const { inner , outer  } = boundingRects(this);\n        const addRectPath = hasRadius(outer.radius) ? addRoundedRectPath : addNormalRectPath;\n        ctx.save();\n        if (outer.w !== inner.w || outer.h !== inner.h) {\n            ctx.beginPath();\n            addRectPath(ctx, inflateRect(outer, inflateAmount, inner));\n            ctx.clip();\n            addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));\n            ctx.fillStyle = borderColor;\n            ctx.fill('evenodd');\n        }\n        ctx.beginPath();\n        addRectPath(ctx, inflateRect(inner, inflateAmount));\n        ctx.fillStyle = backgroundColor;\n        ctx.fill();\n        ctx.restore();\n    }\n    inRange(mouseX, mouseY, useFinalPosition) {\n        return inRange(this, mouseX, mouseY, useFinalPosition);\n    }\n    inXRange(mouseX, useFinalPosition) {\n        return inRange(this, mouseX, null, useFinalPosition);\n    }\n    inYRange(mouseY, useFinalPosition) {\n        return inRange(this, null, mouseY, useFinalPosition);\n    }\n    getCenterPoint(useFinalPosition) {\n        const { x , y , base , horizontal  } =  this.getProps([\n            'x',\n            'y',\n            'base',\n            'horizontal'\n        ], useFinalPosition);\n        return {\n            x: horizontal ? (x + base) / 2 : x,\n            y: horizontal ? y : (y + base) / 2\n        };\n    }\n    getRange(axis) {\n        return axis === 'x' ? this.width / 2 : this.height / 2;\n    }\n}\n\nvar elements = /*#__PURE__*/Object.freeze({\n__proto__: null,\nArcElement: ArcElement,\nLineElement: LineElement,\nPointElement: PointElement,\nBarElement: BarElement\n});\n\nconst BORDER_COLORS = [\n    'rgb(54, 162, 235)',\n    'rgb(255, 99, 132)',\n    'rgb(255, 159, 64)',\n    'rgb(255, 205, 86)',\n    'rgb(75, 192, 192)',\n    'rgb(153, 102, 255)',\n    'rgb(201, 203, 207)' // grey\n];\n// Border colors with 50% transparency\nconst BACKGROUND_COLORS = /* #__PURE__ */ BORDER_COLORS.map((color)=>color.replace('rgb(', 'rgba(').replace(')', ', 0.5)'));\nfunction getBorderColor(i) {\n    return BORDER_COLORS[i % BORDER_COLORS.length];\n}\nfunction getBackgroundColor(i) {\n    return BACKGROUND_COLORS[i % BACKGROUND_COLORS.length];\n}\nfunction createDefaultDatasetColorizer() {\n    return (dataset, i)=>{\n        dataset.borderColor = getBorderColor(i);\n        dataset.backgroundColor = getBackgroundColor(i);\n    };\n}\nfunction createDoughnutDatasetColorizer() {\n    let i = 0;\n    return (dataset)=>{\n        dataset.backgroundColor = dataset.data.map(()=>getBorderColor(i++));\n    };\n}\nfunction createPolarAreaDatasetColorizer() {\n    let i = 0;\n    return (dataset)=>{\n        dataset.backgroundColor = dataset.data.map(()=>getBackgroundColor(i++));\n    };\n}\nfunction getColorizer(type) {\n    if (type === 'doughnut' || type === 'pie') {\n        return createDoughnutDatasetColorizer();\n    } else if (type === 'polarArea') {\n        return createPolarAreaDatasetColorizer();\n    }\n    return createDefaultDatasetColorizer();\n}\nfunction containsColorsDefinitions(descriptors) {\n    let k;\n    for(k in descriptors){\n        if (descriptors[k].borderColor || descriptors[k].backgroundColor) {\n            return true;\n        }\n    }\n    return false;\n}\nvar plugin_colors = {\n    id: 'colors',\n    defaults: {\n        enabled: true\n    },\n    beforeLayout (chart, _args, options) {\n        if (!options.enabled) {\n            return;\n        }\n        const { type , options: { elements  } , data: { datasets  }  } = chart.config;\n        if (containsColorsDefinitions(datasets) || elements && containsColorsDefinitions(elements)) {\n            return;\n        }\n        const colorizer = getColorizer(type);\n        datasets.forEach(colorizer);\n    }\n};\n\nfunction lttbDecimation(data, start, count, availableWidth, options) {\n const samples = options.samples || availableWidth;\n    if (samples >= count) {\n        return data.slice(start, start + count);\n    }\n    const decimated = [];\n    const bucketWidth = (count - 2) / (samples - 2);\n    let sampledIndex = 0;\n    const endIndex = start + count - 1;\n    let a = start;\n    let i, maxAreaPoint, maxArea, area, nextA;\n    decimated[sampledIndex++] = data[a];\n    for(i = 0; i < samples - 2; i++){\n        let avgX = 0;\n        let avgY = 0;\n        let j;\n        const avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;\n        const avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;\n        const avgRangeLength = avgRangeEnd - avgRangeStart;\n        for(j = avgRangeStart; j < avgRangeEnd; j++){\n            avgX += data[j].x;\n            avgY += data[j].y;\n        }\n        avgX /= avgRangeLength;\n        avgY /= avgRangeLength;\n        const rangeOffs = Math.floor(i * bucketWidth) + 1 + start;\n        const rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;\n        const { x: pointAx , y: pointAy  } = data[a];\n        maxArea = area = -1;\n        for(j = rangeOffs; j < rangeTo; j++){\n            area = 0.5 * Math.abs((pointAx - avgX) * (data[j].y - pointAy) - (pointAx - data[j].x) * (avgY - pointAy));\n            if (area > maxArea) {\n                maxArea = area;\n                maxAreaPoint = data[j];\n                nextA = j;\n            }\n        }\n        decimated[sampledIndex++] = maxAreaPoint;\n        a = nextA;\n    }\n    decimated[sampledIndex++] = data[endIndex];\n    return decimated;\n}\nfunction minMaxDecimation(data, start, count, availableWidth) {\n    let avgX = 0;\n    let countX = 0;\n    let i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;\n    const decimated = [];\n    const endIndex = start + count - 1;\n    const xMin = data[start].x;\n    const xMax = data[endIndex].x;\n    const dx = xMax - xMin;\n    for(i = start; i < start + count; ++i){\n        point = data[i];\n        x = (point.x - xMin) / dx * availableWidth;\n        y = point.y;\n        const truncX = x | 0;\n        if (truncX === prevX) {\n            if (y < minY) {\n                minY = y;\n                minIndex = i;\n            } else if (y > maxY) {\n                maxY = y;\n                maxIndex = i;\n            }\n            avgX = (countX * avgX + point.x) / ++countX;\n        } else {\n            const lastIndex = i - 1;\n            if (!isNullOrUndef(minIndex) && !isNullOrUndef(maxIndex)) {\n                const intermediateIndex1 = Math.min(minIndex, maxIndex);\n                const intermediateIndex2 = Math.max(minIndex, maxIndex);\n                if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex1],\n                        x: avgX\n                    });\n                }\n                if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {\n                    decimated.push({\n                        ...data[intermediateIndex2],\n                        x: avgX\n                    });\n                }\n            }\n            if (i > 0 && lastIndex !== startIndex) {\n                decimated.push(data[lastIndex]);\n            }\n            decimated.push(point);\n            prevX = truncX;\n            countX = 0;\n            minY = maxY = y;\n            minIndex = maxIndex = startIndex = i;\n        }\n    }\n    return decimated;\n}\nfunction cleanDecimatedDataset(dataset) {\n    if (dataset._decimated) {\n        const data = dataset._data;\n        delete dataset._decimated;\n        delete dataset._data;\n        Object.defineProperty(dataset, 'data', {\n            value: data\n        });\n    }\n}\nfunction cleanDecimatedData(chart) {\n    chart.data.datasets.forEach((dataset)=>{\n        cleanDecimatedDataset(dataset);\n    });\n}\nfunction getStartAndCountOfVisiblePointsSimplified(meta, points) {\n    const pointCount = points.length;\n    let start = 0;\n    let count;\n    const { iScale  } = meta;\n    const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n    if (minDefined) {\n        start = _limitValue(_lookupByKey(points, iScale.axis, min).lo, 0, pointCount - 1);\n    }\n    if (maxDefined) {\n        count = _limitValue(_lookupByKey(points, iScale.axis, max).hi + 1, start, pointCount) - start;\n    } else {\n        count = pointCount - start;\n    }\n    return {\n        start,\n        count\n    };\n}\nvar plugin_decimation = {\n    id: 'decimation',\n    defaults: {\n        algorithm: 'min-max',\n        enabled: false\n    },\n    beforeElementsUpdate: (chart, args, options)=>{\n        if (!options.enabled) {\n            cleanDecimatedData(chart);\n            return;\n        }\n        const availableWidth = chart.width;\n        chart.data.datasets.forEach((dataset, datasetIndex)=>{\n            const { _data , indexAxis  } = dataset;\n            const meta = chart.getDatasetMeta(datasetIndex);\n            const data = _data || dataset.data;\n            if (resolve([\n                indexAxis,\n                chart.options.indexAxis\n            ]) === 'y') {\n                return;\n            }\n            if (!meta.controller.supportsDecimation) {\n                return;\n            }\n            const xAxis = chart.scales[meta.xAxisID];\n            if (xAxis.type !== 'linear' && xAxis.type !== 'time') {\n                return;\n            }\n            if (chart.options.parsing) {\n                return;\n            }\n            let { start , count  } = getStartAndCountOfVisiblePointsSimplified(meta, data);\n            const threshold = options.threshold || 4 * availableWidth;\n            if (count <= threshold) {\n                cleanDecimatedDataset(dataset);\n                return;\n            }\n            if (isNullOrUndef(_data)) {\n                dataset._data = data;\n                delete dataset.data;\n                Object.defineProperty(dataset, 'data', {\n                    configurable: true,\n                    enumerable: true,\n                    get: function() {\n                        return this._decimated;\n                    },\n                    set: function(d) {\n                        this._data = d;\n                    }\n                });\n            }\n            let decimated;\n            switch(options.algorithm){\n                case 'lttb':\n                    decimated = lttbDecimation(data, start, count, availableWidth, options);\n                    break;\n                case 'min-max':\n                    decimated = minMaxDecimation(data, start, count, availableWidth);\n                    break;\n                default:\n                    throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`);\n            }\n            dataset._decimated = decimated;\n        });\n    },\n    destroy (chart) {\n        cleanDecimatedData(chart);\n    }\n};\n\nfunction _segments(line, target, property) {\n    const segments = line.segments;\n    const points = line.points;\n    const tpoints = target.points;\n    const parts = [];\n    for (const segment of segments){\n        let { start , end  } = segment;\n        end = _findSegmentEnd(start, end, points);\n        const bounds = _getBounds(property, points[start], points[end], segment.loop);\n        if (!target.segments) {\n            parts.push({\n                source: segment,\n                target: bounds,\n                start: points[start],\n                end: points[end]\n            });\n            continue;\n        }\n        const targetSegments = _boundSegments(target, bounds);\n        for (const tgt of targetSegments){\n            const subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);\n            const fillSources = _boundSegment(segment, points, subBounds);\n            for (const fillSource of fillSources){\n                parts.push({\n                    source: fillSource,\n                    target: tgt,\n                    start: {\n                        [property]: _getEdge(bounds, subBounds, 'start', Math.max)\n                    },\n                    end: {\n                        [property]: _getEdge(bounds, subBounds, 'end', Math.min)\n                    }\n                });\n            }\n        }\n    }\n    return parts;\n}\nfunction _getBounds(property, first, last, loop) {\n    if (loop) {\n        return;\n    }\n    let start = first[property];\n    let end = last[property];\n    if (property === 'angle') {\n        start = _normalizeAngle(start);\n        end = _normalizeAngle(end);\n    }\n    return {\n        property,\n        start,\n        end\n    };\n}\nfunction _pointsFromSegments(boundary, line) {\n    const { x =null , y =null  } = boundary || {};\n    const linePoints = line.points;\n    const points = [];\n    line.segments.forEach(({ start , end  })=>{\n        end = _findSegmentEnd(start, end, linePoints);\n        const first = linePoints[start];\n        const last = linePoints[end];\n        if (y !== null) {\n            points.push({\n                x: first.x,\n                y\n            });\n            points.push({\n                x: last.x,\n                y\n            });\n        } else if (x !== null) {\n            points.push({\n                x,\n                y: first.y\n            });\n            points.push({\n                x,\n                y: last.y\n            });\n        }\n    });\n    return points;\n}\nfunction _findSegmentEnd(start, end, points) {\n    for(; end > start; end--){\n        const point = points[end];\n        if (!isNaN(point.x) && !isNaN(point.y)) {\n            break;\n        }\n    }\n    return end;\n}\nfunction _getEdge(a, b, prop, fn) {\n    if (a && b) {\n        return fn(a[prop], b[prop]);\n    }\n    return a ? a[prop] : b ? b[prop] : 0;\n}\n\nfunction _createBoundaryLine(boundary, line) {\n    let points = [];\n    let _loop = false;\n    if (isArray(boundary)) {\n        _loop = true;\n        points = boundary;\n    } else {\n        points = _pointsFromSegments(boundary, line);\n    }\n    return points.length ? new LineElement({\n        points,\n        options: {\n            tension: 0\n        },\n        _loop,\n        _fullLoop: _loop\n    }) : null;\n}\nfunction _shouldApplyFill(source) {\n    return source && source.fill !== false;\n}\n\nfunction _resolveTarget(sources, index, propagate) {\n    const source = sources[index];\n    let fill = source.fill;\n    const visited = [\n        index\n    ];\n    let target;\n    if (!propagate) {\n        return fill;\n    }\n    while(fill !== false && visited.indexOf(fill) === -1){\n        if (!isNumberFinite(fill)) {\n            return fill;\n        }\n        target = sources[fill];\n        if (!target) {\n            return false;\n        }\n        if (target.visible) {\n            return fill;\n        }\n        visited.push(fill);\n        fill = target.fill;\n    }\n    return false;\n}\n function _decodeFill(line, index, count) {\n     const fill = parseFillOption(line);\n    if (isObject(fill)) {\n        return isNaN(fill.value) ? false : fill;\n    }\n    let target = parseFloat(fill);\n    if (isNumberFinite(target) && Math.floor(target) === target) {\n        return decodeTargetIndex(fill[0], index, target, count);\n    }\n    return [\n        'origin',\n        'start',\n        'end',\n        'stack',\n        'shape'\n    ].indexOf(fill) >= 0 && fill;\n}\nfunction decodeTargetIndex(firstCh, index, target, count) {\n    if (firstCh === '-' || firstCh === '+') {\n        target = index + target;\n    }\n    if (target === index || target < 0 || target >= count) {\n        return false;\n    }\n    return target;\n}\n function _getTargetPixel(fill, scale) {\n    let pixel = null;\n    if (fill === 'start') {\n        pixel = scale.bottom;\n    } else if (fill === 'end') {\n        pixel = scale.top;\n    } else if (isObject(fill)) {\n        pixel = scale.getPixelForValue(fill.value);\n    } else if (scale.getBasePixel) {\n        pixel = scale.getBasePixel();\n    }\n    return pixel;\n}\n function _getTargetValue(fill, scale, startValue) {\n    let value;\n    if (fill === 'start') {\n        value = startValue;\n    } else if (fill === 'end') {\n        value = scale.options.reverse ? scale.min : scale.max;\n    } else if (isObject(fill)) {\n        value = fill.value;\n    } else {\n        value = scale.getBaseValue();\n    }\n    return value;\n}\n function parseFillOption(line) {\n    const options = line.options;\n    const fillOption = options.fill;\n    let fill = valueOrDefault(fillOption && fillOption.target, fillOption);\n    if (fill === undefined) {\n        fill = !!options.backgroundColor;\n    }\n    if (fill === false || fill === null) {\n        return false;\n    }\n    if (fill === true) {\n        return 'origin';\n    }\n    return fill;\n}\n\nfunction _buildStackLine(source) {\n    const { scale , index , line  } = source;\n    const points = [];\n    const segments = line.segments;\n    const sourcePoints = line.points;\n    const linesBelow = getLinesBelow(scale, index);\n    linesBelow.push(_createBoundaryLine({\n        x: null,\n        y: scale.bottom\n    }, line));\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        for(let j = segment.start; j <= segment.end; j++){\n            addPointsBelow(points, sourcePoints[j], linesBelow);\n        }\n    }\n    return new LineElement({\n        points,\n        options: {}\n    });\n}\n function getLinesBelow(scale, index) {\n    const below = [];\n    const metas = scale.getMatchingVisibleMetas('line');\n    for(let i = 0; i < metas.length; i++){\n        const meta = metas[i];\n        if (meta.index === index) {\n            break;\n        }\n        if (!meta.hidden) {\n            below.unshift(meta.dataset);\n        }\n    }\n    return below;\n}\n function addPointsBelow(points, sourcePoint, linesBelow) {\n    const postponed = [];\n    for(let j = 0; j < linesBelow.length; j++){\n        const line = linesBelow[j];\n        const { first , last , point  } = findPoint(line, sourcePoint, 'x');\n        if (!point || first && last) {\n            continue;\n        }\n        if (first) {\n            postponed.unshift(point);\n        } else {\n            points.push(point);\n            if (!last) {\n                break;\n            }\n        }\n    }\n    points.push(...postponed);\n}\n function findPoint(line, sourcePoint, property) {\n    const point = line.interpolate(sourcePoint, property);\n    if (!point) {\n        return {};\n    }\n    const pointValue = point[property];\n    const segments = line.segments;\n    const linePoints = line.points;\n    let first = false;\n    let last = false;\n    for(let i = 0; i < segments.length; i++){\n        const segment = segments[i];\n        const firstValue = linePoints[segment.start][property];\n        const lastValue = linePoints[segment.end][property];\n        if (_isBetween(pointValue, firstValue, lastValue)) {\n            first = pointValue === firstValue;\n            last = pointValue === lastValue;\n            break;\n        }\n    }\n    return {\n        first,\n        last,\n        point\n    };\n}\n\nclass simpleArc {\n    constructor(opts){\n        this.x = opts.x;\n        this.y = opts.y;\n        this.radius = opts.radius;\n    }\n    pathSegment(ctx, bounds, opts) {\n        const { x , y , radius  } = this;\n        bounds = bounds || {\n            start: 0,\n            end: TAU\n        };\n        ctx.arc(x, y, radius, bounds.end, bounds.start, true);\n        return !opts.bounds;\n    }\n    interpolate(point) {\n        const { x , y , radius  } = this;\n        const angle = point.angle;\n        return {\n            x: x + Math.cos(angle) * radius,\n            y: y + Math.sin(angle) * radius,\n            angle\n        };\n    }\n}\n\nfunction _getTarget(source) {\n    const { chart , fill , line  } = source;\n    if (isNumberFinite(fill)) {\n        return getLineByIndex(chart, fill);\n    }\n    if (fill === 'stack') {\n        return _buildStackLine(source);\n    }\n    if (fill === 'shape') {\n        return true;\n    }\n    const boundary = computeBoundary(source);\n    if (boundary instanceof simpleArc) {\n        return boundary;\n    }\n    return _createBoundaryLine(boundary, line);\n}\n function getLineByIndex(chart, index) {\n    const meta = chart.getDatasetMeta(index);\n    const visible = meta && chart.isDatasetVisible(index);\n    return visible ? meta.dataset : null;\n}\nfunction computeBoundary(source) {\n    const scale = source.scale || {};\n    if (scale.getPointPositionForValue) {\n        return computeCircularBoundary(source);\n    }\n    return computeLinearBoundary(source);\n}\nfunction computeLinearBoundary(source) {\n    const { scale ={} , fill  } = source;\n    const pixel = _getTargetPixel(fill, scale);\n    if (isNumberFinite(pixel)) {\n        const horizontal = scale.isHorizontal();\n        return {\n            x: horizontal ? pixel : null,\n            y: horizontal ? null : pixel\n        };\n    }\n    return null;\n}\nfunction computeCircularBoundary(source) {\n    const { scale , fill  } = source;\n    const options = scale.options;\n    const length = scale.getLabels().length;\n    const start = options.reverse ? scale.max : scale.min;\n    const value = _getTargetValue(fill, scale, start);\n    const target = [];\n    if (options.grid.circular) {\n        const center = scale.getPointPositionForValue(0, start);\n        return new simpleArc({\n            x: center.x,\n            y: center.y,\n            radius: scale.getDistanceFromCenterForValue(value)\n        });\n    }\n    for(let i = 0; i < length; ++i){\n        target.push(scale.getPointPositionForValue(i, value));\n    }\n    return target;\n}\n\nfunction _drawfill(ctx, source, area) {\n    const target = _getTarget(source);\n    const { line , scale , axis  } = source;\n    const lineOpts = line.options;\n    const fillOption = lineOpts.fill;\n    const color = lineOpts.backgroundColor;\n    const { above =color , below =color  } = fillOption || {};\n    if (target && line.points.length) {\n        clipArea(ctx, area);\n        doFill(ctx, {\n            line,\n            target,\n            above,\n            below,\n            area,\n            scale,\n            axis\n        });\n        unclipArea(ctx);\n    }\n}\nfunction doFill(ctx, cfg) {\n    const { line , target , above , below , area , scale  } = cfg;\n    const property = line._loop ? 'angle' : cfg.axis;\n    ctx.save();\n    if (property === 'x' && below !== above) {\n        clipVertical(ctx, target, area.top);\n        fill(ctx, {\n            line,\n            target,\n            color: above,\n            scale,\n            property\n        });\n        ctx.restore();\n        ctx.save();\n        clipVertical(ctx, target, area.bottom);\n    }\n    fill(ctx, {\n        line,\n        target,\n        color: below,\n        scale,\n        property\n    });\n    ctx.restore();\n}\nfunction clipVertical(ctx, target, clipY) {\n    const { segments , points  } = target;\n    let first = true;\n    let lineLoop = false;\n    ctx.beginPath();\n    for (const segment of segments){\n        const { start , end  } = segment;\n        const firstPoint = points[start];\n        const lastPoint = points[_findSegmentEnd(start, end, points)];\n        if (first) {\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            first = false;\n        } else {\n            ctx.lineTo(firstPoint.x, clipY);\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n        }\n        lineLoop = !!target.pathSegment(ctx, segment, {\n            move: lineLoop\n        });\n        if (lineLoop) {\n            ctx.closePath();\n        } else {\n            ctx.lineTo(lastPoint.x, clipY);\n        }\n    }\n    ctx.lineTo(target.first().x, clipY);\n    ctx.closePath();\n    ctx.clip();\n}\nfunction fill(ctx, cfg) {\n    const { line , target , property , color , scale  } = cfg;\n    const segments = _segments(line, target, property);\n    for (const { source: src , target: tgt , start , end  } of segments){\n        const { style: { backgroundColor =color  } = {}  } = src;\n        const notShape = target !== true;\n        ctx.save();\n        ctx.fillStyle = backgroundColor;\n        clipBounds(ctx, scale, notShape && _getBounds(property, start, end));\n        ctx.beginPath();\n        const lineLoop = !!line.pathSegment(ctx, src);\n        let loop;\n        if (notShape) {\n            if (lineLoop) {\n                ctx.closePath();\n            } else {\n                interpolatedLineTo(ctx, target, end, property);\n            }\n            const targetLoop = !!target.pathSegment(ctx, tgt, {\n                move: lineLoop,\n                reverse: true\n            });\n            loop = lineLoop && targetLoop;\n            if (!loop) {\n                interpolatedLineTo(ctx, target, start, property);\n            }\n        }\n        ctx.closePath();\n        ctx.fill(loop ? 'evenodd' : 'nonzero');\n        ctx.restore();\n    }\n}\nfunction clipBounds(ctx, scale, bounds) {\n    const { top , bottom  } = scale.chart.chartArea;\n    const { property , start , end  } = bounds || {};\n    if (property === 'x') {\n        ctx.beginPath();\n        ctx.rect(start, top, end - start, bottom - top);\n        ctx.clip();\n    }\n}\nfunction interpolatedLineTo(ctx, target, point, property) {\n    const interpolatedPoint = target.interpolate(point, property);\n    if (interpolatedPoint) {\n        ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);\n    }\n}\n\nvar index = {\n    id: 'filler',\n    afterDatasetsUpdate (chart, _args, options) {\n        const count = (chart.data.datasets || []).length;\n        const sources = [];\n        let meta, i, line, source;\n        for(i = 0; i < count; ++i){\n            meta = chart.getDatasetMeta(i);\n            line = meta.dataset;\n            source = null;\n            if (line && line.options && line instanceof LineElement) {\n                source = {\n                    visible: chart.isDatasetVisible(i),\n                    index: i,\n                    fill: _decodeFill(line, i, count),\n                    chart,\n                    axis: meta.controller.options.indexAxis,\n                    scale: meta.vScale,\n                    line\n                };\n            }\n            meta.$filler = source;\n            sources.push(source);\n        }\n        for(i = 0; i < count; ++i){\n            source = sources[i];\n            if (!source || source.fill === false) {\n                continue;\n            }\n            source.fill = _resolveTarget(sources, i, options.propagate);\n        }\n    },\n    beforeDraw (chart, _args, options) {\n        const draw = options.drawTime === 'beforeDraw';\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        const area = chart.chartArea;\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (!source) {\n                continue;\n            }\n            source.line.updateControlPoints(area, source.axis);\n            if (draw && source.fill) {\n                _drawfill(chart.ctx, source, area);\n            }\n        }\n    },\n    beforeDatasetsDraw (chart, _args, options) {\n        if (options.drawTime !== 'beforeDatasetsDraw') {\n            return;\n        }\n        const metasets = chart.getSortedVisibleDatasetMetas();\n        for(let i = metasets.length - 1; i >= 0; --i){\n            const source = metasets[i].$filler;\n            if (_shouldApplyFill(source)) {\n                _drawfill(chart.ctx, source, chart.chartArea);\n            }\n        }\n    },\n    beforeDatasetDraw (chart, args, options) {\n        const source = args.meta.$filler;\n        if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {\n            return;\n        }\n        _drawfill(chart.ctx, source, chart.chartArea);\n    },\n    defaults: {\n        propagate: true,\n        drawTime: 'beforeDatasetDraw'\n    }\n};\n\nconst getBoxSize = (labelOpts, fontSize)=>{\n    let { boxHeight =fontSize , boxWidth =fontSize  } = labelOpts;\n    if (labelOpts.usePointStyle) {\n        boxHeight = Math.min(boxHeight, fontSize);\n        boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);\n    }\n    return {\n        boxWidth,\n        boxHeight,\n        itemHeight: Math.max(fontSize, boxHeight)\n    };\n};\nconst itemsEqual = (a, b)=>a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;\nclass Legend extends Element {\n constructor(config){\n        super();\n        this._added = false;\n        this.legendHitBoxes = [];\n this._hoveredItem = null;\n        this.doughnutMode = false;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this.legendItems = undefined;\n        this.columnSizes = undefined;\n        this.lineWidths = undefined;\n        this.maxHeight = undefined;\n        this.maxWidth = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this._margins = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight, margins) {\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n        this._margins = margins;\n        this.setDimensions();\n        this.buildLabels();\n        this.fit();\n    }\n    setDimensions() {\n        if (this.isHorizontal()) {\n            this.width = this.maxWidth;\n            this.left = this._margins.left;\n            this.right = this.width;\n        } else {\n            this.height = this.maxHeight;\n            this.top = this._margins.top;\n            this.bottom = this.height;\n        }\n    }\n    buildLabels() {\n        const labelOpts = this.options.labels || {};\n        let legendItems = callback(labelOpts.generateLabels, [\n            this.chart\n        ], this) || [];\n        if (labelOpts.filter) {\n            legendItems = legendItems.filter((item)=>labelOpts.filter(item, this.chart.data));\n        }\n        if (labelOpts.sort) {\n            legendItems = legendItems.sort((a, b)=>labelOpts.sort(a, b, this.chart.data));\n        }\n        if (this.options.reverse) {\n            legendItems.reverse();\n        }\n        this.legendItems = legendItems;\n    }\n    fit() {\n        const { options , ctx  } = this;\n        if (!options.display) {\n            this.width = this.height = 0;\n            return;\n        }\n        const labelOpts = options.labels;\n        const labelFont = toFont(labelOpts.font);\n        const fontSize = labelFont.size;\n        const titleHeight = this._computeTitleHeight();\n        const { boxWidth , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        let width, height;\n        ctx.font = labelFont.string;\n        if (this.isHorizontal()) {\n            width = this.maxWidth;\n            height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;\n        } else {\n            height = this.maxHeight;\n            width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;\n        }\n        this.width = Math.min(width, options.maxWidth || this.maxWidth);\n        this.height = Math.min(height, options.maxHeight || this.maxHeight);\n    }\n _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {\n        const { ctx , maxWidth , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const lineWidths = this.lineWidths = [\n            0\n        ];\n        const lineHeight = itemHeight + padding;\n        let totalHeight = titleHeight;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        let row = -1;\n        let top = -lineHeight;\n        this.legendItems.forEach((legendItem, i)=>{\n            const itemWidth = boxWidth + fontSize / 2 + ctx.measureText(legendItem.text).width;\n            if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {\n                totalHeight += lineHeight;\n                lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;\n                top += lineHeight;\n                row++;\n            }\n            hitboxes[i] = {\n                left: 0,\n                top,\n                row,\n                width: itemWidth,\n                height: itemHeight\n            };\n            lineWidths[lineWidths.length - 1] += itemWidth + padding;\n        });\n        return totalHeight;\n    }\n    _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {\n        const { ctx , maxHeight , options: { labels: { padding  }  }  } = this;\n        const hitboxes = this.legendHitBoxes = [];\n        const columnSizes = this.columnSizes = [];\n        const heightLimit = maxHeight - titleHeight;\n        let totalWidth = padding;\n        let currentColWidth = 0;\n        let currentColHeight = 0;\n        let left = 0;\n        let col = 0;\n        this.legendItems.forEach((legendItem, i)=>{\n            const { itemWidth , itemHeight  } = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight);\n            if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {\n                totalWidth += currentColWidth + padding;\n                columnSizes.push({\n                    width: currentColWidth,\n                    height: currentColHeight\n                });\n                left += currentColWidth + padding;\n                col++;\n                currentColWidth = currentColHeight = 0;\n            }\n            hitboxes[i] = {\n                left,\n                top: currentColHeight,\n                col,\n                width: itemWidth,\n                height: itemHeight\n            };\n            currentColWidth = Math.max(currentColWidth, itemWidth);\n            currentColHeight += itemHeight + padding;\n        });\n        totalWidth += currentColWidth;\n        columnSizes.push({\n            width: currentColWidth,\n            height: currentColHeight\n        });\n        return totalWidth;\n    }\n    adjustHitBoxes() {\n        if (!this.options.display) {\n            return;\n        }\n        const titleHeight = this._computeTitleHeight();\n        const { legendHitBoxes: hitboxes , options: { align , labels: { padding  } , rtl  }  } = this;\n        const rtlHelper = getRtlAdapter(rtl, this.left, this.width);\n        if (this.isHorizontal()) {\n            let row = 0;\n            let left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n            for (const hitbox of hitboxes){\n                if (row !== hitbox.row) {\n                    row = hitbox.row;\n                    left = _alignStartEnd(align, this.left + padding, this.right - this.lineWidths[row]);\n                }\n                hitbox.top += this.top + titleHeight + padding;\n                hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);\n                left += hitbox.width + padding;\n            }\n        } else {\n            let col = 0;\n            let top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n            for (const hitbox1 of hitboxes){\n                if (hitbox1.col !== col) {\n                    col = hitbox1.col;\n                    top = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);\n                }\n                hitbox1.top = top;\n                hitbox1.left += this.left + padding;\n                hitbox1.left = rtlHelper.leftForLtr(rtlHelper.x(hitbox1.left), hitbox1.width);\n                top += hitbox1.height + padding;\n            }\n        }\n    }\n    isHorizontal() {\n        return this.options.position === 'top' || this.options.position === 'bottom';\n    }\n    draw() {\n        if (this.options.display) {\n            const ctx = this.ctx;\n            clipArea(ctx, this);\n            this._draw();\n            unclipArea(ctx);\n        }\n    }\n _draw() {\n        const { options: opts , columnSizes , lineWidths , ctx  } = this;\n        const { align , labels: labelOpts  } = opts;\n        const defaultColor = defaults.color;\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const labelFont = toFont(labelOpts.font);\n        const { padding  } = labelOpts;\n        const fontSize = labelFont.size;\n        const halfFontSize = fontSize / 2;\n        let cursor;\n        this.drawTitle();\n        ctx.textAlign = rtlHelper.textAlign('left');\n        ctx.textBaseline = 'middle';\n        ctx.lineWidth = 0.5;\n        ctx.font = labelFont.string;\n        const { boxWidth , boxHeight , itemHeight  } = getBoxSize(labelOpts, fontSize);\n        const drawLegendBox = function(x, y, legendItem) {\n            if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {\n                return;\n            }\n            ctx.save();\n            const lineWidth = valueOrDefault(legendItem.lineWidth, 1);\n            ctx.fillStyle = valueOrDefault(legendItem.fillStyle, defaultColor);\n            ctx.lineCap = valueOrDefault(legendItem.lineCap, 'butt');\n            ctx.lineDashOffset = valueOrDefault(legendItem.lineDashOffset, 0);\n            ctx.lineJoin = valueOrDefault(legendItem.lineJoin, 'miter');\n            ctx.lineWidth = lineWidth;\n            ctx.strokeStyle = valueOrDefault(legendItem.strokeStyle, defaultColor);\n            ctx.setLineDash(valueOrDefault(legendItem.lineDash, []));\n            if (labelOpts.usePointStyle) {\n                const drawOptions = {\n                    radius: boxHeight * Math.SQRT2 / 2,\n                    pointStyle: legendItem.pointStyle,\n                    rotation: legendItem.rotation,\n                    borderWidth: lineWidth\n                };\n                const centerX = rtlHelper.xPlus(x, boxWidth / 2);\n                const centerY = y + halfFontSize;\n                drawPointLegend(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);\n            } else {\n                const yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);\n                const xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);\n                const borderRadius = toTRBLCorners(legendItem.borderRadius);\n                ctx.beginPath();\n                if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                    addRoundedRectPath(ctx, {\n                        x: xBoxLeft,\n                        y: yBoxTop,\n                        w: boxWidth,\n                        h: boxHeight,\n                        radius: borderRadius\n                    });\n                } else {\n                    ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);\n                }\n                ctx.fill();\n                if (lineWidth !== 0) {\n                    ctx.stroke();\n                }\n            }\n            ctx.restore();\n        };\n        const fillText = function(x, y, legendItem) {\n            renderText(ctx, legendItem.text, x, y + itemHeight / 2, labelFont, {\n                strikethrough: legendItem.hidden,\n                textAlign: rtlHelper.textAlign(legendItem.textAlign)\n            });\n        };\n        const isHorizontal = this.isHorizontal();\n        const titleHeight = this._computeTitleHeight();\n        if (isHorizontal) {\n            cursor = {\n                x: _alignStartEnd(align, this.left + padding, this.right - lineWidths[0]),\n                y: this.top + padding + titleHeight,\n                line: 0\n            };\n        } else {\n            cursor = {\n                x: this.left + padding,\n                y: _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),\n                line: 0\n            };\n        }\n        overrideTextDirection(this.ctx, opts.textDirection);\n        const lineHeight = itemHeight + padding;\n        this.legendItems.forEach((legendItem, i)=>{\n            ctx.strokeStyle = legendItem.fontColor;\n            ctx.fillStyle = legendItem.fontColor;\n            const textWidth = ctx.measureText(legendItem.text).width;\n            const textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));\n            const width = boxWidth + halfFontSize + textWidth;\n            let x = cursor.x;\n            let y = cursor.y;\n            rtlHelper.setWidth(this.width);\n            if (isHorizontal) {\n                if (i > 0 && x + width + padding > this.right) {\n                    y = cursor.y += lineHeight;\n                    cursor.line++;\n                    x = cursor.x = _alignStartEnd(align, this.left + padding, this.right - lineWidths[cursor.line]);\n                }\n            } else if (i > 0 && y + lineHeight > this.bottom) {\n                x = cursor.x = x + columnSizes[cursor.line].width + padding;\n                cursor.line++;\n                y = cursor.y = _alignStartEnd(align, this.top + titleHeight + padding, this.bottom - columnSizes[cursor.line].height);\n            }\n            const realX = rtlHelper.x(x);\n            drawLegendBox(realX, y, legendItem);\n            x = _textX(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : this.right, opts.rtl);\n            fillText(rtlHelper.x(x), y, legendItem);\n            if (isHorizontal) {\n                cursor.x += width + padding;\n            } else if (typeof legendItem.text !== 'string') {\n                const fontLineHeight = labelFont.lineHeight;\n                cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight);\n            } else {\n                cursor.y += lineHeight;\n            }\n        });\n        restoreTextDirection(this.ctx, opts.textDirection);\n    }\n drawTitle() {\n        const opts = this.options;\n        const titleOpts = opts.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        if (!titleOpts.display) {\n            return;\n        }\n        const rtlHelper = getRtlAdapter(opts.rtl, this.left, this.width);\n        const ctx = this.ctx;\n        const position = titleOpts.position;\n        const halfFontSize = titleFont.size / 2;\n        const topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;\n        let y;\n        let left = this.left;\n        let maxWidth = this.width;\n        if (this.isHorizontal()) {\n            maxWidth = Math.max(...this.lineWidths);\n            y = this.top + topPaddingPlusHalfFontSize;\n            left = _alignStartEnd(opts.align, left, this.right - maxWidth);\n        } else {\n            const maxHeight = this.columnSizes.reduce((acc, size)=>Math.max(acc, size.height), 0);\n            y = topPaddingPlusHalfFontSize + _alignStartEnd(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());\n        }\n        const x = _alignStartEnd(position, left, left + maxWidth);\n        ctx.textAlign = rtlHelper.textAlign(_toLeftRightCenter(position));\n        ctx.textBaseline = 'middle';\n        ctx.strokeStyle = titleOpts.color;\n        ctx.fillStyle = titleOpts.color;\n        ctx.font = titleFont.string;\n        renderText(ctx, titleOpts.text, x, y, titleFont);\n    }\n _computeTitleHeight() {\n        const titleOpts = this.options.title;\n        const titleFont = toFont(titleOpts.font);\n        const titlePadding = toPadding(titleOpts.padding);\n        return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;\n    }\n _getLegendItemAt(x, y) {\n        let i, hitBox, lh;\n        if (_isBetween(x, this.left, this.right) && _isBetween(y, this.top, this.bottom)) {\n            lh = this.legendHitBoxes;\n            for(i = 0; i < lh.length; ++i){\n                hitBox = lh[i];\n                if (_isBetween(x, hitBox.left, hitBox.left + hitBox.width) && _isBetween(y, hitBox.top, hitBox.top + hitBox.height)) {\n                    return this.legendItems[i];\n                }\n            }\n        }\n        return null;\n    }\n handleEvent(e) {\n        const opts = this.options;\n        if (!isListened(e.type, opts)) {\n            return;\n        }\n        const hoveredItem = this._getLegendItemAt(e.x, e.y);\n        if (e.type === 'mousemove' || e.type === 'mouseout') {\n            const previous = this._hoveredItem;\n            const sameItem = itemsEqual(previous, hoveredItem);\n            if (previous && !sameItem) {\n                callback(opts.onLeave, [\n                    e,\n                    previous,\n                    this\n                ], this);\n            }\n            this._hoveredItem = hoveredItem;\n            if (hoveredItem && !sameItem) {\n                callback(opts.onHover, [\n                    e,\n                    hoveredItem,\n                    this\n                ], this);\n            }\n        } else if (hoveredItem) {\n            callback(opts.onClick, [\n                e,\n                hoveredItem,\n                this\n            ], this);\n        }\n    }\n}\nfunction calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {\n    const itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);\n    const itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);\n    return {\n        itemWidth,\n        itemHeight\n    };\n}\nfunction calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {\n    let legendItemText = legendItem.text;\n    if (legendItemText && typeof legendItemText !== 'string') {\n        legendItemText = legendItemText.reduce((a, b)=>a.length > b.length ? a : b);\n    }\n    return boxWidth + labelFont.size / 2 + ctx.measureText(legendItemText).width;\n}\nfunction calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {\n    let itemHeight = _itemHeight;\n    if (typeof legendItem.text !== 'string') {\n        itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);\n    }\n    return itemHeight;\n}\nfunction calculateLegendItemHeight(legendItem, fontLineHeight) {\n    const labelHeight = legendItem.text ? legendItem.text.length + 0.5 : 0;\n    return fontLineHeight * labelHeight;\n}\nfunction isListened(type, opts) {\n    if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {\n        return true;\n    }\n    if (opts.onClick && (type === 'click' || type === 'mouseup')) {\n        return true;\n    }\n    return false;\n}\nvar plugin_legend = {\n    id: 'legend',\n _element: Legend,\n    start (chart, _args, options) {\n        const legend = chart.legend = new Legend({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, legend, options);\n        layouts.addBox(chart, legend);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, chart.legend);\n        delete chart.legend;\n    },\n    beforeUpdate (chart, _args, options) {\n        const legend = chart.legend;\n        layouts.configure(chart, legend, options);\n        legend.options = options;\n    },\n    afterUpdate (chart) {\n        const legend = chart.legend;\n        legend.buildLabels();\n        legend.adjustHitBoxes();\n    },\n    afterEvent (chart, args) {\n        if (!args.replay) {\n            chart.legend.handleEvent(args.event);\n        }\n    },\n    defaults: {\n        display: true,\n        position: 'top',\n        align: 'center',\n        fullSize: true,\n        reverse: false,\n        weight: 1000,\n        onClick (e, legendItem, legend) {\n            const index = legendItem.datasetIndex;\n            const ci = legend.chart;\n            if (ci.isDatasetVisible(index)) {\n                ci.hide(index);\n                legendItem.hidden = true;\n            } else {\n                ci.show(index);\n                legendItem.hidden = false;\n            }\n        },\n        onHover: null,\n        onLeave: null,\n        labels: {\n            color: (ctx)=>ctx.chart.options.color,\n            boxWidth: 40,\n            padding: 10,\n            generateLabels (chart) {\n                const datasets = chart.data.datasets;\n                const { labels: { usePointStyle , pointStyle , textAlign , color , useBorderRadius , borderRadius  }  } = chart.legend.options;\n                return chart._getSortedDatasetMetas().map((meta)=>{\n                    const style = meta.controller.getStyle(usePointStyle ? 0 : undefined);\n                    const borderWidth = toPadding(style.borderWidth);\n                    return {\n                        text: datasets[meta.index].label,\n                        fillStyle: style.backgroundColor,\n                        fontColor: color,\n                        hidden: !meta.visible,\n                        lineCap: style.borderCapStyle,\n                        lineDash: style.borderDash,\n                        lineDashOffset: style.borderDashOffset,\n                        lineJoin: style.borderJoinStyle,\n                        lineWidth: (borderWidth.width + borderWidth.height) / 4,\n                        strokeStyle: style.borderColor,\n                        pointStyle: pointStyle || style.pointStyle,\n                        rotation: style.rotation,\n                        textAlign: textAlign || style.textAlign,\n                        borderRadius: useBorderRadius && (borderRadius || style.borderRadius),\n                        datasetIndex: meta.index\n                    };\n                }, this);\n            }\n        },\n        title: {\n            color: (ctx)=>ctx.chart.options.color,\n            display: false,\n            position: 'center',\n            text: ''\n        }\n    },\n    descriptors: {\n        _scriptable: (name)=>!name.startsWith('on'),\n        labels: {\n            _scriptable: (name)=>![\n                    'generateLabels',\n                    'filter',\n                    'sort'\n                ].includes(name)\n        }\n    }\n};\n\nclass Title extends Element {\n constructor(config){\n        super();\n        this.chart = config.chart;\n        this.options = config.options;\n        this.ctx = config.ctx;\n        this._padding = undefined;\n        this.top = undefined;\n        this.bottom = undefined;\n        this.left = undefined;\n        this.right = undefined;\n        this.width = undefined;\n        this.height = undefined;\n        this.position = undefined;\n        this.weight = undefined;\n        this.fullSize = undefined;\n    }\n    update(maxWidth, maxHeight) {\n        const opts = this.options;\n        this.left = 0;\n        this.top = 0;\n        if (!opts.display) {\n            this.width = this.height = this.right = this.bottom = 0;\n            return;\n        }\n        this.width = this.right = maxWidth;\n        this.height = this.bottom = maxHeight;\n        const lineCount = isArray(opts.text) ? opts.text.length : 1;\n        this._padding = toPadding(opts.padding);\n        const textSize = lineCount * toFont(opts.font).lineHeight + this._padding.height;\n        if (this.isHorizontal()) {\n            this.height = textSize;\n        } else {\n            this.width = textSize;\n        }\n    }\n    isHorizontal() {\n        const pos = this.options.position;\n        return pos === 'top' || pos === 'bottom';\n    }\n    _drawArgs(offset) {\n        const { top , left , bottom , right , options  } = this;\n        const align = options.align;\n        let rotation = 0;\n        let maxWidth, titleX, titleY;\n        if (this.isHorizontal()) {\n            titleX = _alignStartEnd(align, left, right);\n            titleY = top + offset;\n            maxWidth = right - left;\n        } else {\n            if (options.position === 'left') {\n                titleX = left + offset;\n                titleY = _alignStartEnd(align, bottom, top);\n                rotation = PI * -0.5;\n            } else {\n                titleX = right - offset;\n                titleY = _alignStartEnd(align, top, bottom);\n                rotation = PI * 0.5;\n            }\n            maxWidth = bottom - top;\n        }\n        return {\n            titleX,\n            titleY,\n            maxWidth,\n            rotation\n        };\n    }\n    draw() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        if (!opts.display) {\n            return;\n        }\n        const fontOpts = toFont(opts.font);\n        const lineHeight = fontOpts.lineHeight;\n        const offset = lineHeight / 2 + this._padding.top;\n        const { titleX , titleY , maxWidth , rotation  } = this._drawArgs(offset);\n        renderText(ctx, opts.text, 0, 0, fontOpts, {\n            color: opts.color,\n            maxWidth,\n            rotation,\n            textAlign: _toLeftRightCenter(opts.align),\n            textBaseline: 'middle',\n            translation: [\n                titleX,\n                titleY\n            ]\n        });\n    }\n}\nfunction createTitle(chart, titleOpts) {\n    const title = new Title({\n        ctx: chart.ctx,\n        options: titleOpts,\n        chart\n    });\n    layouts.configure(chart, title, titleOpts);\n    layouts.addBox(chart, title);\n    chart.titleBlock = title;\n}\nvar plugin_title = {\n    id: 'title',\n _element: Title,\n    start (chart, _args, options) {\n        createTitle(chart, options);\n    },\n    stop (chart) {\n        const titleBlock = chart.titleBlock;\n        layouts.removeBox(chart, titleBlock);\n        delete chart.titleBlock;\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = chart.titleBlock;\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'bold'\n        },\n        fullSize: true,\n        padding: 10,\n        position: 'top',\n        text: '',\n        weight: 2000\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst map = new WeakMap();\nvar plugin_subtitle = {\n    id: 'subtitle',\n    start (chart, _args, options) {\n        const title = new Title({\n            ctx: chart.ctx,\n            options,\n            chart\n        });\n        layouts.configure(chart, title, options);\n        layouts.addBox(chart, title);\n        map.set(chart, title);\n    },\n    stop (chart) {\n        layouts.removeBox(chart, map.get(chart));\n        map.delete(chart);\n    },\n    beforeUpdate (chart, _args, options) {\n        const title = map.get(chart);\n        layouts.configure(chart, title, options);\n        title.options = options;\n    },\n    defaults: {\n        align: 'center',\n        display: false,\n        font: {\n            weight: 'normal'\n        },\n        fullSize: true,\n        padding: 0,\n        position: 'top',\n        text: '',\n        weight: 1500\n    },\n    defaultRoutes: {\n        color: 'color'\n    },\n    descriptors: {\n        _scriptable: true,\n        _indexable: false\n    }\n};\n\nconst positioners = {\n average (items) {\n        if (!items.length) {\n            return false;\n        }\n        let i, len;\n        let x = 0;\n        let y = 0;\n        let count = 0;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const pos = el.tooltipPosition();\n                x += pos.x;\n                y += pos.y;\n                ++count;\n            }\n        }\n        return {\n            x: x / count,\n            y: y / count\n        };\n    },\n nearest (items, eventPosition) {\n        if (!items.length) {\n            return false;\n        }\n        let x = eventPosition.x;\n        let y = eventPosition.y;\n        let minDistance = Number.POSITIVE_INFINITY;\n        let i, len, nearestElement;\n        for(i = 0, len = items.length; i < len; ++i){\n            const el = items[i].element;\n            if (el && el.hasValue()) {\n                const center = el.getCenterPoint();\n                const d = distanceBetweenPoints(eventPosition, center);\n                if (d < minDistance) {\n                    minDistance = d;\n                    nearestElement = el;\n                }\n            }\n        }\n        if (nearestElement) {\n            const tp = nearestElement.tooltipPosition();\n            x = tp.x;\n            y = tp.y;\n        }\n        return {\n            x,\n            y\n        };\n    }\n};\nfunction pushOrConcat(base, toPush) {\n    if (toPush) {\n        if (isArray(toPush)) {\n            Array.prototype.push.apply(base, toPush);\n        } else {\n            base.push(toPush);\n        }\n    }\n    return base;\n}\n function splitNewlines(str) {\n    if ((typeof str === 'string' || str instanceof String) && str.indexOf('\\n') > -1) {\n        return str.split('\\n');\n    }\n    return str;\n}\n function createTooltipItem(chart, item) {\n    const { element , datasetIndex , index  } = item;\n    const controller = chart.getDatasetMeta(datasetIndex).controller;\n    const { label , value  } = controller.getLabelAndValue(index);\n    return {\n        chart,\n        label,\n        parsed: controller.getParsed(index),\n        raw: chart.data.datasets[datasetIndex].data[index],\n        formattedValue: value,\n        dataset: controller.getDataset(),\n        dataIndex: index,\n        datasetIndex,\n        element\n    };\n}\n function getTooltipSize(tooltip, options) {\n    const ctx = tooltip.chart.ctx;\n    const { body , footer , title  } = tooltip;\n    const { boxWidth , boxHeight  } = options;\n    const bodyFont = toFont(options.bodyFont);\n    const titleFont = toFont(options.titleFont);\n    const footerFont = toFont(options.footerFont);\n    const titleLineCount = title.length;\n    const footerLineCount = footer.length;\n    const bodyLineItemCount = body.length;\n    const padding = toPadding(options.padding);\n    let height = padding.height;\n    let width = 0;\n    let combinedBodyLength = body.reduce((count, bodyItem)=>count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length, 0);\n    combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;\n    if (titleLineCount) {\n        height += titleLineCount * titleFont.lineHeight + (titleLineCount - 1) * options.titleSpacing + options.titleMarginBottom;\n    }\n    if (combinedBodyLength) {\n        const bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;\n        height += bodyLineItemCount * bodyLineHeight + (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight + (combinedBodyLength - 1) * options.bodySpacing;\n    }\n    if (footerLineCount) {\n        height += options.footerMarginTop + footerLineCount * footerFont.lineHeight + (footerLineCount - 1) * options.footerSpacing;\n    }\n    let widthPadding = 0;\n    const maxLineWidth = function(line) {\n        width = Math.max(width, ctx.measureText(line).width + widthPadding);\n    };\n    ctx.save();\n    ctx.font = titleFont.string;\n    each(tooltip.title, maxLineWidth);\n    ctx.font = bodyFont.string;\n    each(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);\n    widthPadding = options.displayColors ? boxWidth + 2 + options.boxPadding : 0;\n    each(body, (bodyItem)=>{\n        each(bodyItem.before, maxLineWidth);\n        each(bodyItem.lines, maxLineWidth);\n        each(bodyItem.after, maxLineWidth);\n    });\n    widthPadding = 0;\n    ctx.font = footerFont.string;\n    each(tooltip.footer, maxLineWidth);\n    ctx.restore();\n    width += padding.width;\n    return {\n        width,\n        height\n    };\n}\nfunction determineYAlign(chart, size) {\n    const { y , height  } = size;\n    if (y < height / 2) {\n        return 'top';\n    } else if (y > chart.height - height / 2) {\n        return 'bottom';\n    }\n    return 'center';\n}\nfunction doesNotFitWithAlign(xAlign, chart, options, size) {\n    const { x , width  } = size;\n    const caret = options.caretSize + options.caretPadding;\n    if (xAlign === 'left' && x + width + caret > chart.width) {\n        return true;\n    }\n    if (xAlign === 'right' && x - width - caret < 0) {\n        return true;\n    }\n}\nfunction determineXAlign(chart, options, size, yAlign) {\n    const { x , width  } = size;\n    const { width: chartWidth , chartArea: { left , right  }  } = chart;\n    let xAlign = 'center';\n    if (yAlign === 'center') {\n        xAlign = x <= (left + right) / 2 ? 'left' : 'right';\n    } else if (x <= width / 2) {\n        xAlign = 'left';\n    } else if (x >= chartWidth - width / 2) {\n        xAlign = 'right';\n    }\n    if (doesNotFitWithAlign(xAlign, chart, options, size)) {\n        xAlign = 'center';\n    }\n    return xAlign;\n}\n function determineAlignment(chart, options, size) {\n    const yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);\n    return {\n        xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),\n        yAlign\n    };\n}\nfunction alignX(size, xAlign) {\n    let { x , width  } = size;\n    if (xAlign === 'right') {\n        x -= width;\n    } else if (xAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nfunction alignY(size, yAlign, paddingAndSize) {\n    let { y , height  } = size;\n    if (yAlign === 'top') {\n        y += paddingAndSize;\n    } else if (yAlign === 'bottom') {\n        y -= height + paddingAndSize;\n    } else {\n        y -= height / 2;\n    }\n    return y;\n}\n function getBackgroundPoint(options, size, alignment, chart) {\n    const { caretSize , caretPadding , cornerRadius  } = options;\n    const { xAlign , yAlign  } = alignment;\n    const paddingAndSize = caretSize + caretPadding;\n    const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n    let x = alignX(size, xAlign);\n    const y = alignY(size, yAlign, paddingAndSize);\n    if (yAlign === 'center') {\n        if (xAlign === 'left') {\n            x += paddingAndSize;\n        } else if (xAlign === 'right') {\n            x -= paddingAndSize;\n        }\n    } else if (xAlign === 'left') {\n        x -= Math.max(topLeft, bottomLeft) + caretSize;\n    } else if (xAlign === 'right') {\n        x += Math.max(topRight, bottomRight) + caretSize;\n    }\n    return {\n        x: _limitValue(x, 0, chart.width - size.width),\n        y: _limitValue(y, 0, chart.height - size.height)\n    };\n}\nfunction getAlignedX(tooltip, align, options) {\n    const padding = toPadding(options.padding);\n    return align === 'center' ? tooltip.x + tooltip.width / 2 : align === 'right' ? tooltip.x + tooltip.width - padding.right : tooltip.x + padding.left;\n}\n function getBeforeAfterBodyLines(callback) {\n    return pushOrConcat([], splitNewlines(callback));\n}\nfunction createTooltipContext(parent, tooltip, tooltipItems) {\n    return createContext(parent, {\n        tooltip,\n        tooltipItems,\n        type: 'tooltip'\n    });\n}\nfunction overrideCallbacks(callbacks, context) {\n    const override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;\n    return override ? callbacks.override(override) : callbacks;\n}\nconst defaultCallbacks = {\n    beforeTitle: noop,\n    title (tooltipItems) {\n        if (tooltipItems.length > 0) {\n            const item = tooltipItems[0];\n            const labels = item.chart.data.labels;\n            const labelCount = labels ? labels.length : 0;\n            if (this && this.options && this.options.mode === 'dataset') {\n                return item.dataset.label || '';\n            } else if (item.label) {\n                return item.label;\n            } else if (labelCount > 0 && item.dataIndex < labelCount) {\n                return labels[item.dataIndex];\n            }\n        }\n        return '';\n    },\n    afterTitle: noop,\n    beforeBody: noop,\n    beforeLabel: noop,\n    label (tooltipItem) {\n        if (this && this.options && this.options.mode === 'dataset') {\n            return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;\n        }\n        let label = tooltipItem.dataset.label || '';\n        if (label) {\n            label += ': ';\n        }\n        const value = tooltipItem.formattedValue;\n        if (!isNullOrUndef(value)) {\n            label += value;\n        }\n        return label;\n    },\n    labelColor (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            borderColor: options.borderColor,\n            backgroundColor: options.backgroundColor,\n            borderWidth: options.borderWidth,\n            borderDash: options.borderDash,\n            borderDashOffset: options.borderDashOffset,\n            borderRadius: 0\n        };\n    },\n    labelTextColor () {\n        return this.options.bodyColor;\n    },\n    labelPointStyle (tooltipItem) {\n        const meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);\n        const options = meta.controller.getStyle(tooltipItem.dataIndex);\n        return {\n            pointStyle: options.pointStyle,\n            rotation: options.rotation\n        };\n    },\n    afterLabel: noop,\n    afterBody: noop,\n    beforeFooter: noop,\n    footer: noop,\n    afterFooter: noop\n};\n function invokeCallbackWithFallback(callbacks, name, ctx, arg) {\n    const result = callbacks[name].call(ctx, arg);\n    if (typeof result === 'undefined') {\n        return defaultCallbacks[name].call(ctx, arg);\n    }\n    return result;\n}\nclass Tooltip extends Element {\n static positioners = positioners;\n    constructor(config){\n        super();\n        this.opacity = 0;\n        this._active = [];\n        this._eventPosition = undefined;\n        this._size = undefined;\n        this._cachedAnimations = undefined;\n        this._tooltipItems = [];\n        this.$animations = undefined;\n        this.$context = undefined;\n        this.chart = config.chart;\n        this.options = config.options;\n        this.dataPoints = undefined;\n        this.title = undefined;\n        this.beforeBody = undefined;\n        this.body = undefined;\n        this.afterBody = undefined;\n        this.footer = undefined;\n        this.xAlign = undefined;\n        this.yAlign = undefined;\n        this.x = undefined;\n        this.y = undefined;\n        this.height = undefined;\n        this.width = undefined;\n        this.caretX = undefined;\n        this.caretY = undefined;\n        this.labelColors = undefined;\n        this.labelPointStyles = undefined;\n        this.labelTextColors = undefined;\n    }\n    initialize(options) {\n        this.options = options;\n        this._cachedAnimations = undefined;\n        this.$context = undefined;\n    }\n _resolveAnimations() {\n        const cached = this._cachedAnimations;\n        if (cached) {\n            return cached;\n        }\n        const chart = this.chart;\n        const options = this.options.setContext(this.getContext());\n        const opts = options.enabled && chart.options.animation && options.animations;\n        const animations = new Animations(this.chart, opts);\n        if (opts._cacheable) {\n            this._cachedAnimations = Object.freeze(animations);\n        }\n        return animations;\n    }\n getContext() {\n        return this.$context || (this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));\n    }\n    getTitle(context, options) {\n        const { callbacks  } = options;\n        const beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);\n        const title = invokeCallbackWithFallback(callbacks, 'title', this, context);\n        const afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeTitle));\n        lines = pushOrConcat(lines, splitNewlines(title));\n        lines = pushOrConcat(lines, splitNewlines(afterTitle));\n        return lines;\n    }\n    getBeforeBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems));\n    }\n    getBody(tooltipItems, options) {\n        const { callbacks  } = options;\n        const bodyItems = [];\n        each(tooltipItems, (context)=>{\n            const bodyItem = {\n                before: [],\n                lines: [],\n                after: []\n            };\n            const scoped = overrideCallbacks(callbacks, context);\n            pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', this, context)));\n            pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', this, context));\n            pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', this, context)));\n            bodyItems.push(bodyItem);\n        });\n        return bodyItems;\n    }\n    getAfterBody(tooltipItems, options) {\n        return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems));\n    }\n    getFooter(tooltipItems, options) {\n        const { callbacks  } = options;\n        const beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);\n        const footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);\n        const afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);\n        let lines = [];\n        lines = pushOrConcat(lines, splitNewlines(beforeFooter));\n        lines = pushOrConcat(lines, splitNewlines(footer));\n        lines = pushOrConcat(lines, splitNewlines(afterFooter));\n        return lines;\n    }\n _createItems(options) {\n        const active = this._active;\n        const data = this.chart.data;\n        const labelColors = [];\n        const labelPointStyles = [];\n        const labelTextColors = [];\n        let tooltipItems = [];\n        let i, len;\n        for(i = 0, len = active.length; i < len; ++i){\n            tooltipItems.push(createTooltipItem(this.chart, active[i]));\n        }\n        if (options.filter) {\n            tooltipItems = tooltipItems.filter((element, index, array)=>options.filter(element, index, array, data));\n        }\n        if (options.itemSort) {\n            tooltipItems = tooltipItems.sort((a, b)=>options.itemSort(a, b, data));\n        }\n        each(tooltipItems, (context)=>{\n            const scoped = overrideCallbacks(options.callbacks, context);\n            labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', this, context));\n            labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', this, context));\n            labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', this, context));\n        });\n        this.labelColors = labelColors;\n        this.labelPointStyles = labelPointStyles;\n        this.labelTextColors = labelTextColors;\n        this.dataPoints = tooltipItems;\n        return tooltipItems;\n    }\n    update(changed, replay) {\n        const options = this.options.setContext(this.getContext());\n        const active = this._active;\n        let properties;\n        let tooltipItems = [];\n        if (!active.length) {\n            if (this.opacity !== 0) {\n                properties = {\n                    opacity: 0\n                };\n            }\n        } else {\n            const position = positioners[options.position].call(this, active, this._eventPosition);\n            tooltipItems = this._createItems(options);\n            this.title = this.getTitle(tooltipItems, options);\n            this.beforeBody = this.getBeforeBody(tooltipItems, options);\n            this.body = this.getBody(tooltipItems, options);\n            this.afterBody = this.getAfterBody(tooltipItems, options);\n            this.footer = this.getFooter(tooltipItems, options);\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, size);\n            const alignment = determineAlignment(this.chart, options, positionAndSize);\n            const backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);\n            this.xAlign = alignment.xAlign;\n            this.yAlign = alignment.yAlign;\n            properties = {\n                opacity: 1,\n                x: backgroundPoint.x,\n                y: backgroundPoint.y,\n                width: size.width,\n                height: size.height,\n                caretX: position.x,\n                caretY: position.y\n            };\n        }\n        this._tooltipItems = tooltipItems;\n        this.$context = undefined;\n        if (properties) {\n            this._resolveAnimations().update(this, properties);\n        }\n        if (changed && options.external) {\n            options.external.call(this, {\n                chart: this.chart,\n                tooltip: this,\n                replay\n            });\n        }\n    }\n    drawCaret(tooltipPoint, ctx, size, options) {\n        const caretPosition = this.getCaretPosition(tooltipPoint, size, options);\n        ctx.lineTo(caretPosition.x1, caretPosition.y1);\n        ctx.lineTo(caretPosition.x2, caretPosition.y2);\n        ctx.lineTo(caretPosition.x3, caretPosition.y3);\n    }\n    getCaretPosition(tooltipPoint, size, options) {\n        const { xAlign , yAlign  } = this;\n        const { caretSize , cornerRadius  } = options;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(cornerRadius);\n        const { x: ptX , y: ptY  } = tooltipPoint;\n        const { width , height  } = size;\n        let x1, x2, x3, y1, y2, y3;\n        if (yAlign === 'center') {\n            y2 = ptY + height / 2;\n            if (xAlign === 'left') {\n                x1 = ptX;\n                x2 = x1 - caretSize;\n                y1 = y2 + caretSize;\n                y3 = y2 - caretSize;\n            } else {\n                x1 = ptX + width;\n                x2 = x1 + caretSize;\n                y1 = y2 - caretSize;\n                y3 = y2 + caretSize;\n            }\n            x3 = x1;\n        } else {\n            if (xAlign === 'left') {\n                x2 = ptX + Math.max(topLeft, bottomLeft) + caretSize;\n            } else if (xAlign === 'right') {\n                x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;\n            } else {\n                x2 = this.caretX;\n            }\n            if (yAlign === 'top') {\n                y1 = ptY;\n                y2 = y1 - caretSize;\n                x1 = x2 - caretSize;\n                x3 = x2 + caretSize;\n            } else {\n                y1 = ptY + height;\n                y2 = y1 + caretSize;\n                x1 = x2 + caretSize;\n                x3 = x2 - caretSize;\n            }\n            y3 = y1;\n        }\n        return {\n            x1,\n            x2,\n            x3,\n            y1,\n            y2,\n            y3\n        };\n    }\n    drawTitle(pt, ctx, options) {\n        const title = this.title;\n        const length = title.length;\n        let titleFont, titleSpacing, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.titleAlign, options);\n            ctx.textAlign = rtlHelper.textAlign(options.titleAlign);\n            ctx.textBaseline = 'middle';\n            titleFont = toFont(options.titleFont);\n            titleSpacing = options.titleSpacing;\n            ctx.fillStyle = options.titleColor;\n            ctx.font = titleFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);\n                pt.y += titleFont.lineHeight + titleSpacing;\n                if (i + 1 === length) {\n                    pt.y += options.titleMarginBottom - titleSpacing;\n                }\n            }\n        }\n    }\n _drawColorBox(ctx, pt, i, rtlHelper, options) {\n        const labelColors = this.labelColors[i];\n        const labelPointStyle = this.labelPointStyles[i];\n        const { boxHeight , boxWidth , boxPadding  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        const colorX = getAlignedX(this, 'left', options);\n        const rtlColorX = rtlHelper.x(colorX);\n        const yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;\n        const colorY = pt.y + yOffSet;\n        if (options.usePointStyle) {\n            const drawOptions = {\n                radius: Math.min(boxWidth, boxHeight) / 2,\n                pointStyle: labelPointStyle.pointStyle,\n                rotation: labelPointStyle.rotation,\n                borderWidth: 1\n            };\n            const centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;\n            const centerY = colorY + boxHeight / 2;\n            ctx.strokeStyle = options.multiKeyBackground;\n            ctx.fillStyle = options.multiKeyBackground;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n            ctx.strokeStyle = labelColors.borderColor;\n            ctx.fillStyle = labelColors.backgroundColor;\n            drawPoint(ctx, drawOptions, centerX, centerY);\n        } else {\n            ctx.lineWidth = isObject(labelColors.borderWidth) ? Math.max(...Object.values(labelColors.borderWidth)) : labelColors.borderWidth || 1;\n            ctx.strokeStyle = labelColors.borderColor;\n            ctx.setLineDash(labelColors.borderDash || []);\n            ctx.lineDashOffset = labelColors.borderDashOffset || 0;\n            const outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth - boxPadding);\n            const innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - boxPadding - 2);\n            const borderRadius = toTRBLCorners(labelColors.borderRadius);\n            if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                ctx.beginPath();\n                ctx.fillStyle = options.multiKeyBackground;\n                addRoundedRectPath(ctx, {\n                    x: outerX,\n                    y: colorY,\n                    w: boxWidth,\n                    h: boxHeight,\n                    radius: borderRadius\n                });\n                ctx.fill();\n                ctx.stroke();\n                ctx.fillStyle = labelColors.backgroundColor;\n                ctx.beginPath();\n                addRoundedRectPath(ctx, {\n                    x: innerX,\n                    y: colorY + 1,\n                    w: boxWidth - 2,\n                    h: boxHeight - 2,\n                    radius: borderRadius\n                });\n                ctx.fill();\n            } else {\n                ctx.fillStyle = options.multiKeyBackground;\n                ctx.fillRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);\n                ctx.fillStyle = labelColors.backgroundColor;\n                ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);\n            }\n        }\n        ctx.fillStyle = this.labelTextColors[i];\n    }\n    drawBody(pt, ctx, options) {\n        const { body  } = this;\n        const { bodySpacing , bodyAlign , displayColors , boxHeight , boxWidth , boxPadding  } = options;\n        const bodyFont = toFont(options.bodyFont);\n        let bodyLineHeight = bodyFont.lineHeight;\n        let xLinePadding = 0;\n        const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n        const fillLineOfText = function(line) {\n            ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);\n            pt.y += bodyLineHeight + bodySpacing;\n        };\n        const bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);\n        let bodyItem, textColor, lines, i, j, ilen, jlen;\n        ctx.textAlign = bodyAlign;\n        ctx.textBaseline = 'middle';\n        ctx.font = bodyFont.string;\n        pt.x = getAlignedX(this, bodyAlignForCalculation, options);\n        ctx.fillStyle = options.bodyColor;\n        each(this.beforeBody, fillLineOfText);\n        xLinePadding = displayColors && bodyAlignForCalculation !== 'right' ? bodyAlign === 'center' ? boxWidth / 2 + boxPadding : boxWidth + 2 + boxPadding : 0;\n        for(i = 0, ilen = body.length; i < ilen; ++i){\n            bodyItem = body[i];\n            textColor = this.labelTextColors[i];\n            ctx.fillStyle = textColor;\n            each(bodyItem.before, fillLineOfText);\n            lines = bodyItem.lines;\n            if (displayColors && lines.length) {\n                this._drawColorBox(ctx, pt, i, rtlHelper, options);\n                bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);\n            }\n            for(j = 0, jlen = lines.length; j < jlen; ++j){\n                fillLineOfText(lines[j]);\n                bodyLineHeight = bodyFont.lineHeight;\n            }\n            each(bodyItem.after, fillLineOfText);\n        }\n        xLinePadding = 0;\n        bodyLineHeight = bodyFont.lineHeight;\n        each(this.afterBody, fillLineOfText);\n        pt.y -= bodySpacing;\n    }\n    drawFooter(pt, ctx, options) {\n        const footer = this.footer;\n        const length = footer.length;\n        let footerFont, i;\n        if (length) {\n            const rtlHelper = getRtlAdapter(options.rtl, this.x, this.width);\n            pt.x = getAlignedX(this, options.footerAlign, options);\n            pt.y += options.footerMarginTop;\n            ctx.textAlign = rtlHelper.textAlign(options.footerAlign);\n            ctx.textBaseline = 'middle';\n            footerFont = toFont(options.footerFont);\n            ctx.fillStyle = options.footerColor;\n            ctx.font = footerFont.string;\n            for(i = 0; i < length; ++i){\n                ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);\n                pt.y += footerFont.lineHeight + options.footerSpacing;\n            }\n        }\n    }\n    drawBackground(pt, ctx, tooltipSize, options) {\n        const { xAlign , yAlign  } = this;\n        const { x , y  } = pt;\n        const { width , height  } = tooltipSize;\n        const { topLeft , topRight , bottomLeft , bottomRight  } = toTRBLCorners(options.cornerRadius);\n        ctx.fillStyle = options.backgroundColor;\n        ctx.strokeStyle = options.borderColor;\n        ctx.lineWidth = options.borderWidth;\n        ctx.beginPath();\n        ctx.moveTo(x + topLeft, y);\n        if (yAlign === 'top') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width - topRight, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);\n        if (yAlign === 'center' && xAlign === 'right') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + width, y + height - bottomRight);\n        ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);\n        if (yAlign === 'bottom') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x + bottomLeft, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);\n        if (yAlign === 'center' && xAlign === 'left') {\n            this.drawCaret(pt, ctx, tooltipSize, options);\n        }\n        ctx.lineTo(x, y + topLeft);\n        ctx.quadraticCurveTo(x, y, x + topLeft, y);\n        ctx.closePath();\n        ctx.fill();\n        if (options.borderWidth > 0) {\n            ctx.stroke();\n        }\n    }\n _updateAnimationTarget(options) {\n        const chart = this.chart;\n        const anims = this.$animations;\n        const animX = anims && anims.x;\n        const animY = anims && anims.y;\n        if (animX || animY) {\n            const position = positioners[options.position].call(this, this._active, this._eventPosition);\n            if (!position) {\n                return;\n            }\n            const size = this._size = getTooltipSize(this, options);\n            const positionAndSize = Object.assign({}, position, this._size);\n            const alignment = determineAlignment(chart, options, positionAndSize);\n            const point = getBackgroundPoint(options, positionAndSize, alignment, chart);\n            if (animX._to !== point.x || animY._to !== point.y) {\n                this.xAlign = alignment.xAlign;\n                this.yAlign = alignment.yAlign;\n                this.width = size.width;\n                this.height = size.height;\n                this.caretX = position.x;\n                this.caretY = position.y;\n                this._resolveAnimations().update(this, point);\n            }\n        }\n    }\n _willRender() {\n        return !!this.opacity;\n    }\n    draw(ctx) {\n        const options = this.options.setContext(this.getContext());\n        let opacity = this.opacity;\n        if (!opacity) {\n            return;\n        }\n        this._updateAnimationTarget(options);\n        const tooltipSize = {\n            width: this.width,\n            height: this.height\n        };\n        const pt = {\n            x: this.x,\n            y: this.y\n        };\n        opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;\n        const padding = toPadding(options.padding);\n        const hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;\n        if (options.enabled && hasTooltipContent) {\n            ctx.save();\n            ctx.globalAlpha = opacity;\n            this.drawBackground(pt, ctx, tooltipSize, options);\n            overrideTextDirection(ctx, options.textDirection);\n            pt.y += padding.top;\n            this.drawTitle(pt, ctx, options);\n            this.drawBody(pt, ctx, options);\n            this.drawFooter(pt, ctx, options);\n            restoreTextDirection(ctx, options.textDirection);\n            ctx.restore();\n        }\n    }\n getActiveElements() {\n        return this._active || [];\n    }\n setActiveElements(activeElements, eventPosition) {\n        const lastActive = this._active;\n        const active = activeElements.map(({ datasetIndex , index  })=>{\n            const meta = this.chart.getDatasetMeta(datasetIndex);\n            if (!meta) {\n                throw new Error('Cannot find a dataset at index ' + datasetIndex);\n            }\n            return {\n                datasetIndex,\n                element: meta.data[index],\n                index\n            };\n        });\n        const changed = !_elementsEqual(lastActive, active);\n        const positionChanged = this._positionChanged(active, eventPosition);\n        if (changed || positionChanged) {\n            this._active = active;\n            this._eventPosition = eventPosition;\n            this._ignoreReplayEvents = true;\n            this.update(true);\n        }\n    }\n handleEvent(e, replay, inChartArea = true) {\n        if (replay && this._ignoreReplayEvents) {\n            return false;\n        }\n        this._ignoreReplayEvents = false;\n        const options = this.options;\n        const lastActive = this._active || [];\n        const active = this._getActiveElements(e, lastActive, replay, inChartArea);\n        const positionChanged = this._positionChanged(active, e);\n        const changed = replay || !_elementsEqual(active, lastActive) || positionChanged;\n        if (changed) {\n            this._active = active;\n            if (options.enabled || options.external) {\n                this._eventPosition = {\n                    x: e.x,\n                    y: e.y\n                };\n                this.update(true, replay);\n            }\n        }\n        return changed;\n    }\n _getActiveElements(e, lastActive, replay, inChartArea) {\n        const options = this.options;\n        if (e.type === 'mouseout') {\n            return [];\n        }\n        if (!inChartArea) {\n            return lastActive;\n        }\n        const active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);\n        if (options.reverse) {\n            active.reverse();\n        }\n        return active;\n    }\n _positionChanged(active, e) {\n        const { caretX , caretY , options  } = this;\n        const position = positioners[options.position].call(this, active, e);\n        return position !== false && (caretX !== position.x || caretY !== position.y);\n    }\n}\nvar plugin_tooltip = {\n    id: 'tooltip',\n    _element: Tooltip,\n    positioners,\n    afterInit (chart, _args, options) {\n        if (options) {\n            chart.tooltip = new Tooltip({\n                chart,\n                options\n            });\n        }\n    },\n    beforeUpdate (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    reset (chart, _args, options) {\n        if (chart.tooltip) {\n            chart.tooltip.initialize(options);\n        }\n    },\n    afterDraw (chart) {\n        const tooltip = chart.tooltip;\n        if (tooltip && tooltip._willRender()) {\n            const args = {\n                tooltip\n            };\n            if (chart.notifyPlugins('beforeTooltipDraw', {\n                ...args,\n                cancelable: true\n            }) === false) {\n                return;\n            }\n            tooltip.draw(chart.ctx);\n            chart.notifyPlugins('afterTooltipDraw', args);\n        }\n    },\n    afterEvent (chart, args) {\n        if (chart.tooltip) {\n            const useFinalPosition = args.replay;\n            if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {\n                args.changed = true;\n            }\n        }\n    },\n    defaults: {\n        enabled: true,\n        external: null,\n        position: 'average',\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        titleColor: '#fff',\n        titleFont: {\n            weight: 'bold'\n        },\n        titleSpacing: 2,\n        titleMarginBottom: 6,\n        titleAlign: 'left',\n        bodyColor: '#fff',\n        bodySpacing: 2,\n        bodyFont: {},\n        bodyAlign: 'left',\n        footerColor: '#fff',\n        footerSpacing: 2,\n        footerMarginTop: 6,\n        footerFont: {\n            weight: 'bold'\n        },\n        footerAlign: 'left',\n        padding: 6,\n        caretPadding: 2,\n        caretSize: 5,\n        cornerRadius: 6,\n        boxHeight: (ctx, opts)=>opts.bodyFont.size,\n        boxWidth: (ctx, opts)=>opts.bodyFont.size,\n        multiKeyBackground: '#fff',\n        displayColors: true,\n        boxPadding: 0,\n        borderColor: 'rgba(0,0,0,0)',\n        borderWidth: 0,\n        animation: {\n            duration: 400,\n            easing: 'easeOutQuart'\n        },\n        animations: {\n            numbers: {\n                type: 'number',\n                properties: [\n                    'x',\n                    'y',\n                    'width',\n                    'height',\n                    'caretX',\n                    'caretY'\n                ]\n            },\n            opacity: {\n                easing: 'linear',\n                duration: 200\n            }\n        },\n        callbacks: defaultCallbacks\n    },\n    defaultRoutes: {\n        bodyFont: 'font',\n        footerFont: 'font',\n        titleFont: 'font'\n    },\n    descriptors: {\n        _scriptable: (name)=>name !== 'filter' && name !== 'itemSort' && name !== 'external',\n        _indexable: false,\n        callbacks: {\n            _scriptable: false,\n            _indexable: false\n        },\n        animation: {\n            _fallback: false\n        },\n        animations: {\n            _fallback: 'animation'\n        }\n    },\n    additionalOptionScopes: [\n        'interaction'\n    ]\n};\n\nvar plugins = /*#__PURE__*/Object.freeze({\n__proto__: null,\nColors: plugin_colors,\nDecimation: plugin_decimation,\nFiller: index,\nLegend: plugin_legend,\nSubTitle: plugin_subtitle,\nTitle: plugin_title,\nTooltip: plugin_tooltip\n});\n\nconst addIfString = (labels, raw, index, addedLabels)=>{\n    if (typeof raw === 'string') {\n        index = labels.push(raw) - 1;\n        addedLabels.unshift({\n            index,\n            label: raw\n        });\n    } else if (isNaN(raw)) {\n        index = null;\n    }\n    return index;\n};\nfunction findOrAddLabel(labels, raw, index, addedLabels) {\n    const first = labels.indexOf(raw);\n    if (first === -1) {\n        return addIfString(labels, raw, index, addedLabels);\n    }\n    const last = labels.lastIndexOf(raw);\n    return first !== last ? index : first;\n}\nconst validIndex = (index, max)=>index === null ? null : _limitValue(Math.round(index), 0, max);\nfunction _getLabelForValue(value) {\n    const labels = this.getLabels();\n    if (value >= 0 && value < labels.length) {\n        return labels[value];\n    }\n    return value;\n}\nclass CategoryScale extends Scale {\n    static id = 'category';\n static defaults = {\n        ticks: {\n            callback: _getLabelForValue\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this._startValue = undefined;\n        this._valueRange = 0;\n        this._addedLabels = [];\n    }\n    init(scaleOptions) {\n        const added = this._addedLabels;\n        if (added.length) {\n            const labels = this.getLabels();\n            for (const { index , label  } of added){\n                if (labels[index] === label) {\n                    labels.splice(index, 1);\n                }\n            }\n            this._addedLabels = [];\n        }\n        super.init(scaleOptions);\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        const labels = this.getLabels();\n        index = isFinite(index) && labels[index] === raw ? index : findOrAddLabel(labels, raw, valueOrDefault(index, raw), this._addedLabels);\n        return validIndex(index, labels.length - 1);\n    }\n    determineDataLimits() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this.getMinMax(true);\n        if (this.options.bounds === 'ticks') {\n            if (!minDefined) {\n                min = 0;\n            }\n            if (!maxDefined) {\n                max = this.getLabels().length - 1;\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const min = this.min;\n        const max = this.max;\n        const offset = this.options.offset;\n        const ticks = [];\n        let labels = this.getLabels();\n        labels = min === 0 && max === labels.length - 1 ? labels : labels.slice(min, max + 1);\n        this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);\n        this._startValue = this.min - (offset ? 0.5 : 0);\n        for(let value = min; value <= max; value++){\n            ticks.push({\n                value\n            });\n        }\n        return ticks;\n    }\n    getLabelForValue(value) {\n        return _getLabelForValue.call(this, value);\n    }\n configure() {\n        super.configure();\n        if (!this.isHorizontal()) {\n            this._reversePixels = !this._reversePixels;\n        }\n    }\n    getPixelForValue(value) {\n        if (typeof value !== 'number') {\n            value = this.parse(value);\n        }\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getPixelForTick(index) {\n        const ticks = this.ticks;\n        if (index < 0 || index > ticks.length - 1) {\n            return null;\n        }\n        return this.getPixelForValue(ticks[index].value);\n    }\n    getValueForPixel(pixel) {\n        return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);\n    }\n    getBasePixel() {\n        return this.bottom;\n    }\n}\n\nfunction generateTicks$1(generationOptions, dataRange) {\n    const ticks = [];\n    const MIN_SPACING = 1e-14;\n    const { bounds , step , min , max , precision , count , maxTicks , maxDigits , includeBounds  } = generationOptions;\n    const unit = step || 1;\n    const maxSpaces = maxTicks - 1;\n    const { min: rmin , max: rmax  } = dataRange;\n    const minDefined = !isNullOrUndef(min);\n    const maxDefined = !isNullOrUndef(max);\n    const countDefined = !isNullOrUndef(count);\n    const minSpacing = (rmax - rmin) / (maxDigits + 1);\n    let spacing = niceNum((rmax - rmin) / maxSpaces / unit) * unit;\n    let factor, niceMin, niceMax, numSpaces;\n    if (spacing < MIN_SPACING && !minDefined && !maxDefined) {\n        return [\n            {\n                value: rmin\n            },\n            {\n                value: rmax\n            }\n        ];\n    }\n    numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);\n    if (numSpaces > maxSpaces) {\n        spacing = niceNum(numSpaces * spacing / maxSpaces / unit) * unit;\n    }\n    if (!isNullOrUndef(precision)) {\n        factor = Math.pow(10, precision);\n        spacing = Math.ceil(spacing * factor) / factor;\n    }\n    if (bounds === 'ticks') {\n        niceMin = Math.floor(rmin / spacing) * spacing;\n        niceMax = Math.ceil(rmax / spacing) * spacing;\n    } else {\n        niceMin = rmin;\n        niceMax = rmax;\n    }\n    if (minDefined && maxDefined && step && almostWhole((max - min) / step, spacing / 1000)) {\n        numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));\n        spacing = (max - min) / numSpaces;\n        niceMin = min;\n        niceMax = max;\n    } else if (countDefined) {\n        niceMin = minDefined ? min : niceMin;\n        niceMax = maxDefined ? max : niceMax;\n        numSpaces = count - 1;\n        spacing = (niceMax - niceMin) / numSpaces;\n    } else {\n        numSpaces = (niceMax - niceMin) / spacing;\n        if (almostEquals(numSpaces, Math.round(numSpaces), spacing / 1000)) {\n            numSpaces = Math.round(numSpaces);\n        } else {\n            numSpaces = Math.ceil(numSpaces);\n        }\n    }\n    const decimalPlaces = Math.max(_decimalPlaces(spacing), _decimalPlaces(niceMin));\n    factor = Math.pow(10, isNullOrUndef(precision) ? decimalPlaces : precision);\n    niceMin = Math.round(niceMin * factor) / factor;\n    niceMax = Math.round(niceMax * factor) / factor;\n    let j = 0;\n    if (minDefined) {\n        if (includeBounds && niceMin !== min) {\n            ticks.push({\n                value: min\n            });\n            if (niceMin < min) {\n                j++;\n            }\n            if (almostEquals(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {\n                j++;\n            }\n        } else if (niceMin < min) {\n            j++;\n        }\n    }\n    for(; j < numSpaces; ++j){\n        ticks.push({\n            value: Math.round((niceMin + j * spacing) * factor) / factor\n        });\n    }\n    if (maxDefined && includeBounds && niceMax !== max) {\n        if (ticks.length && almostEquals(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {\n            ticks[ticks.length - 1].value = max;\n        } else {\n            ticks.push({\n                value: max\n            });\n        }\n    } else if (!maxDefined || niceMax === max) {\n        ticks.push({\n            value: niceMax\n        });\n    }\n    return ticks;\n}\nfunction relativeLabelSize(value, minSpacing, { horizontal , minRotation  }) {\n    const rad = toRadians(minRotation);\n    const ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;\n    const length = 0.75 * minSpacing * ('' + value).length;\n    return Math.min(minSpacing / ratio, length);\n}\nclass LinearScaleBase extends Scale {\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n         this._endValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        if (isNullOrUndef(raw)) {\n            return null;\n        }\n        if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {\n            return null;\n        }\n        return +raw;\n    }\n    handleTickRangeOptions() {\n        const { beginAtZero  } = this.options;\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let { min , max  } = this;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (beginAtZero) {\n            const minSign = sign(min);\n            const maxSign = sign(max);\n            if (minSign < 0 && maxSign < 0) {\n                setMax(0);\n            } else if (minSign > 0 && maxSign > 0) {\n                setMin(0);\n            }\n        }\n        if (min === max) {\n            let offset = max === 0 ? 1 : Math.abs(max * 0.05);\n            setMax(max + offset);\n            if (!beginAtZero) {\n                setMin(min - offset);\n            }\n        }\n        this.min = min;\n        this.max = max;\n    }\n    getTickLimit() {\n        const tickOpts = this.options.ticks;\n        let { maxTicksLimit , stepSize  } = tickOpts;\n        let maxTicks;\n        if (stepSize) {\n            maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;\n            if (maxTicks > 1000) {\n                console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`);\n                maxTicks = 1000;\n            }\n        } else {\n            maxTicks = this.computeTickLimit();\n            maxTicksLimit = maxTicksLimit || 11;\n        }\n        if (maxTicksLimit) {\n            maxTicks = Math.min(maxTicksLimit, maxTicks);\n        }\n        return maxTicks;\n    }\n computeTickLimit() {\n        return Number.POSITIVE_INFINITY;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        let maxTicks = this.getTickLimit();\n        maxTicks = Math.max(2, maxTicks);\n        const numericGeneratorOptions = {\n            maxTicks,\n            bounds: opts.bounds,\n            min: opts.min,\n            max: opts.max,\n            precision: tickOpts.precision,\n            step: tickOpts.stepSize,\n            count: tickOpts.count,\n            maxDigits: this._maxDigits(),\n            horizontal: this.isHorizontal(),\n            minRotation: tickOpts.minRotation || 0,\n            includeBounds: tickOpts.includeBounds !== false\n        };\n        const dataRange = this._range || this;\n        const ticks = generateTicks$1(numericGeneratorOptions, dataRange);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n configure() {\n        const ticks = this.ticks;\n        let start = this.min;\n        let end = this.max;\n        super.configure();\n        if (this.options.offset && ticks.length) {\n            const offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;\n            start -= offset;\n            end += offset;\n        }\n        this._startValue = start;\n        this._endValue = end;\n        this._valueRange = end - start;\n    }\n    getLabelForValue(value) {\n        return formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n}\n\nclass LinearScale extends LinearScaleBase {\n    static id = 'linear';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.numeric\n        }\n    };\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? min : 0;\n        this.max = isNumberFinite(max) ? max : 1;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        const horizontal = this.isHorizontal();\n        const length = horizontal ? this.width : this.height;\n        const minRotation = toRadians(this.options.ticks.minRotation);\n        const ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;\n        const tickFont = this._resolveTickFontOptions(0);\n        return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));\n    }\n    getPixelForValue(value) {\n        return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;\n    }\n}\n\nconst log10Floor = (v)=>Math.floor(log10(v));\nconst changeExponent = (v, m)=>Math.pow(10, log10Floor(v) + m);\nfunction isMajor(tickVal) {\n    const remain = tickVal / Math.pow(10, log10Floor(tickVal));\n    return remain === 1;\n}\nfunction steps(min, max, rangeExp) {\n    const rangeStep = Math.pow(10, rangeExp);\n    const start = Math.floor(min / rangeStep);\n    const end = Math.ceil(max / rangeStep);\n    return end - start;\n}\nfunction startExp(min, max) {\n    const range = max - min;\n    let rangeExp = log10Floor(range);\n    while(steps(min, max, rangeExp) > 10){\n        rangeExp++;\n    }\n    while(steps(min, max, rangeExp) < 10){\n        rangeExp--;\n    }\n    return Math.min(rangeExp, log10Floor(min));\n}\n function generateTicks(generationOptions, { min , max  }) {\n    min = finiteOrDefault(generationOptions.min, min);\n    const ticks = [];\n    const minExp = log10Floor(min);\n    let exp = startExp(min, max);\n    let precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;\n    const stepSize = Math.pow(10, exp);\n    const base = minExp > exp ? Math.pow(10, minExp) : 0;\n    const start = Math.round((min - base) * precision) / precision;\n    const offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;\n    let significand = Math.floor((start - offset) / Math.pow(10, exp));\n    let value = finiteOrDefault(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);\n    while(value < max){\n        ticks.push({\n            value,\n            major: isMajor(value),\n            significand\n        });\n        if (significand >= 10) {\n            significand = significand < 15 ? 15 : 20;\n        } else {\n            significand++;\n        }\n        if (significand >= 20) {\n            exp++;\n            significand = 2;\n            precision = exp >= 0 ? 1 : precision;\n        }\n        value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;\n    }\n    const lastTick = finiteOrDefault(generationOptions.max, value);\n    ticks.push({\n        value: lastTick,\n        major: isMajor(lastTick),\n        significand\n    });\n    return ticks;\n}\nclass LogarithmicScale extends Scale {\n    static id = 'logarithmic';\n static defaults = {\n        ticks: {\n            callback: Ticks.formatters.logarithmic,\n            major: {\n                enabled: true\n            }\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.start = undefined;\n         this.end = undefined;\n         this._startValue = undefined;\n        this._valueRange = 0;\n    }\n    parse(raw, index) {\n        const value = LinearScaleBase.prototype.parse.apply(this, [\n            raw,\n            index\n        ]);\n        if (value === 0) {\n            this._zero = true;\n            return undefined;\n        }\n        return isNumberFinite(value) && value > 0 ? value : null;\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(true);\n        this.min = isNumberFinite(min) ? Math.max(0, min) : null;\n        this.max = isNumberFinite(max) ? Math.max(0, max) : null;\n        if (this.options.beginAtZero) {\n            this._zero = true;\n        }\n        if (this._zero && this.min !== this._suggestedMin && !isNumberFinite(this._userMin)) {\n            this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);\n        }\n        this.handleTickRangeOptions();\n    }\n    handleTickRangeOptions() {\n        const { minDefined , maxDefined  } = this.getUserBounds();\n        let min = this.min;\n        let max = this.max;\n        const setMin = (v)=>min = minDefined ? min : v;\n        const setMax = (v)=>max = maxDefined ? max : v;\n        if (min === max) {\n            if (min <= 0) {\n                setMin(1);\n                setMax(10);\n            } else {\n                setMin(changeExponent(min, -1));\n                setMax(changeExponent(max, +1));\n            }\n        }\n        if (min <= 0) {\n            setMin(changeExponent(max, -1));\n        }\n        if (max <= 0) {\n            setMax(changeExponent(min, +1));\n        }\n        this.min = min;\n        this.max = max;\n    }\n    buildTicks() {\n        const opts = this.options;\n        const generationOptions = {\n            min: this._userMin,\n            max: this._userMax\n        };\n        const ticks = generateTicks(generationOptions, this);\n        if (opts.bounds === 'ticks') {\n            _setMinAndMaxByKey(ticks, this, 'value');\n        }\n        if (opts.reverse) {\n            ticks.reverse();\n            this.start = this.max;\n            this.end = this.min;\n        } else {\n            this.start = this.min;\n            this.end = this.max;\n        }\n        return ticks;\n    }\n getLabelForValue(value) {\n        return value === undefined ? '0' : formatNumber(value, this.chart.options.locale, this.options.ticks.format);\n    }\n configure() {\n        const start = this.min;\n        super.configure();\n        this._startValue = log10(start);\n        this._valueRange = log10(this.max) - log10(start);\n    }\n    getPixelForValue(value) {\n        if (value === undefined || value === 0) {\n            value = this.min;\n        }\n        if (value === null || isNaN(value)) {\n            return NaN;\n        }\n        return this.getPixelForDecimal(value === this.min ? 0 : (log10(value) - this._startValue) / this._valueRange);\n    }\n    getValueForPixel(pixel) {\n        const decimal = this.getDecimalForPixel(pixel);\n        return Math.pow(10, this._startValue + decimal * this._valueRange);\n    }\n}\n\nfunction getTickBackdropHeight(opts) {\n    const tickOpts = opts.ticks;\n    if (tickOpts.display && opts.display) {\n        const padding = toPadding(tickOpts.backdropPadding);\n        return valueOrDefault(tickOpts.font && tickOpts.font.size, defaults.font.size) + padding.height;\n    }\n    return 0;\n}\nfunction measureLabelSize(ctx, font, label) {\n    label = isArray(label) ? label : [\n        label\n    ];\n    return {\n        w: _longestText(ctx, font.string, label),\n        h: label.length * font.lineHeight\n    };\n}\nfunction determineLimits(angle, pos, size, min, max) {\n    if (angle === min || angle === max) {\n        return {\n            start: pos - size / 2,\n            end: pos + size / 2\n        };\n    } else if (angle < min || angle > max) {\n        return {\n            start: pos - size,\n            end: pos\n        };\n    }\n    return {\n        start: pos,\n        end: pos + size\n    };\n}\n function fitWithPointLabels(scale) {\n    const orig = {\n        l: scale.left + scale._padding.left,\n        r: scale.right - scale._padding.right,\n        t: scale.top + scale._padding.top,\n        b: scale.bottom - scale._padding.bottom\n    };\n    const limits = Object.assign({}, orig);\n    const labelSizes = [];\n    const padding = [];\n    const valueCount = scale._pointLabels.length;\n    const pointLabelOpts = scale.options.pointLabels;\n    const additionalAngle = pointLabelOpts.centerPointLabels ? PI / valueCount : 0;\n    for(let i = 0; i < valueCount; i++){\n        const opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));\n        padding[i] = opts.padding;\n        const pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);\n        const plFont = toFont(opts.font);\n        const textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);\n        labelSizes[i] = textSize;\n        const angleRadians = _normalizeAngle(scale.getIndexAngle(i) + additionalAngle);\n        const angle = Math.round(toDegrees(angleRadians));\n        const hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);\n        const vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);\n        updateLimits(limits, orig, angleRadians, hLimits, vLimits);\n    }\n    scale.setCenterPoint(orig.l - limits.l, limits.r - orig.r, orig.t - limits.t, limits.b - orig.b);\n    scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);\n}\nfunction updateLimits(limits, orig, angle, hLimits, vLimits) {\n    const sin = Math.abs(Math.sin(angle));\n    const cos = Math.abs(Math.cos(angle));\n    let x = 0;\n    let y = 0;\n    if (hLimits.start < orig.l) {\n        x = (orig.l - hLimits.start) / sin;\n        limits.l = Math.min(limits.l, orig.l - x);\n    } else if (hLimits.end > orig.r) {\n        x = (hLimits.end - orig.r) / sin;\n        limits.r = Math.max(limits.r, orig.r + x);\n    }\n    if (vLimits.start < orig.t) {\n        y = (orig.t - vLimits.start) / cos;\n        limits.t = Math.min(limits.t, orig.t - y);\n    } else if (vLimits.end > orig.b) {\n        y = (vLimits.end - orig.b) / cos;\n        limits.b = Math.max(limits.b, orig.b + y);\n    }\n}\nfunction buildPointLabelItems(scale, labelSizes, padding) {\n    const items = [];\n    const valueCount = scale._pointLabels.length;\n    const opts = scale.options;\n    const extra = getTickBackdropHeight(opts) / 2;\n    const outerDistance = scale.drawingArea;\n    const additionalAngle = opts.pointLabels.centerPointLabels ? PI / valueCount : 0;\n    for(let i = 0; i < valueCount; i++){\n        const pointLabelPosition = scale.getPointPosition(i, outerDistance + extra + padding[i], additionalAngle);\n        const angle = Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle + HALF_PI)));\n        const size = labelSizes[i];\n        const y = yForAngle(pointLabelPosition.y, size.h, angle);\n        const textAlign = getTextAlignForAngle(angle);\n        const left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);\n        items.push({\n            x: pointLabelPosition.x,\n            y,\n            textAlign,\n            left,\n            top: y,\n            right: left + size.w,\n            bottom: y + size.h\n        });\n    }\n    return items;\n}\nfunction getTextAlignForAngle(angle) {\n    if (angle === 0 || angle === 180) {\n        return 'center';\n    } else if (angle < 180) {\n        return 'left';\n    }\n    return 'right';\n}\nfunction leftForTextAlign(x, w, align) {\n    if (align === 'right') {\n        x -= w;\n    } else if (align === 'center') {\n        x -= w / 2;\n    }\n    return x;\n}\nfunction yForAngle(y, h, angle) {\n    if (angle === 90 || angle === 270) {\n        y -= h / 2;\n    } else if (angle > 270 || angle < 90) {\n        y -= h;\n    }\n    return y;\n}\nfunction drawPointLabels(scale, labelCount) {\n    const { ctx , options: { pointLabels  }  } = scale;\n    for(let i = labelCount - 1; i >= 0; i--){\n        const optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));\n        const plFont = toFont(optsAtIndex.font);\n        const { x , y , textAlign , left , top , right , bottom  } = scale._pointLabelItems[i];\n        const { backdropColor  } = optsAtIndex;\n        if (!isNullOrUndef(backdropColor)) {\n            const borderRadius = toTRBLCorners(optsAtIndex.borderRadius);\n            const padding = toPadding(optsAtIndex.backdropPadding);\n            ctx.fillStyle = backdropColor;\n            const backdropLeft = left - padding.left;\n            const backdropTop = top - padding.top;\n            const backdropWidth = right - left + padding.width;\n            const backdropHeight = bottom - top + padding.height;\n            if (Object.values(borderRadius).some((v)=>v !== 0)) {\n                ctx.beginPath();\n                addRoundedRectPath(ctx, {\n                    x: backdropLeft,\n                    y: backdropTop,\n                    w: backdropWidth,\n                    h: backdropHeight,\n                    radius: borderRadius\n                });\n                ctx.fill();\n            } else {\n                ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);\n            }\n        }\n        renderText(ctx, scale._pointLabels[i], x, y + plFont.lineHeight / 2, plFont, {\n            color: optsAtIndex.color,\n            textAlign: textAlign,\n            textBaseline: 'middle'\n        });\n    }\n}\nfunction pathRadiusLine(scale, radius, circular, labelCount) {\n    const { ctx  } = scale;\n    if (circular) {\n        ctx.arc(scale.xCenter, scale.yCenter, radius, 0, TAU);\n    } else {\n        let pointPosition = scale.getPointPosition(0, radius);\n        ctx.moveTo(pointPosition.x, pointPosition.y);\n        for(let i = 1; i < labelCount; i++){\n            pointPosition = scale.getPointPosition(i, radius);\n            ctx.lineTo(pointPosition.x, pointPosition.y);\n        }\n    }\n}\nfunction drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {\n    const ctx = scale.ctx;\n    const circular = gridLineOpts.circular;\n    const { color , lineWidth  } = gridLineOpts;\n    if (!circular && !labelCount || !color || !lineWidth || radius < 0) {\n        return;\n    }\n    ctx.save();\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.setLineDash(borderOpts.dash);\n    ctx.lineDashOffset = borderOpts.dashOffset;\n    ctx.beginPath();\n    pathRadiusLine(scale, radius, circular, labelCount);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n}\nfunction createPointLabelContext(parent, index, label) {\n    return createContext(parent, {\n        label,\n        index,\n        type: 'pointLabel'\n    });\n}\nclass RadialLinearScale extends LinearScaleBase {\n    static id = 'radialLinear';\n static defaults = {\n        display: true,\n        animate: true,\n        position: 'chartArea',\n        angleLines: {\n            display: true,\n            lineWidth: 1,\n            borderDash: [],\n            borderDashOffset: 0.0\n        },\n        grid: {\n            circular: false\n        },\n        startAngle: 0,\n        ticks: {\n            showLabelBackdrop: true,\n            callback: Ticks.formatters.numeric\n        },\n        pointLabels: {\n            backdropColor: undefined,\n            backdropPadding: 2,\n            display: true,\n            font: {\n                size: 10\n            },\n            callback (label) {\n                return label;\n            },\n            padding: 5,\n            centerPointLabels: false\n        }\n    };\n    static defaultRoutes = {\n        'angleLines.color': 'borderColor',\n        'pointLabels.color': 'color',\n        'ticks.color': 'color'\n    };\n    static descriptors = {\n        angleLines: {\n            _fallback: 'grid'\n        }\n    };\n    constructor(cfg){\n        super(cfg);\n         this.xCenter = undefined;\n         this.yCenter = undefined;\n         this.drawingArea = undefined;\n         this._pointLabels = [];\n        this._pointLabelItems = [];\n    }\n    setDimensions() {\n        const padding = this._padding = toPadding(getTickBackdropHeight(this.options) / 2);\n        const w = this.width = this.maxWidth - padding.width;\n        const h = this.height = this.maxHeight - padding.height;\n        this.xCenter = Math.floor(this.left + w / 2 + padding.left);\n        this.yCenter = Math.floor(this.top + h / 2 + padding.top);\n        this.drawingArea = Math.floor(Math.min(w, h) / 2);\n    }\n    determineDataLimits() {\n        const { min , max  } = this.getMinMax(false);\n        this.min = isNumberFinite(min) && !isNaN(min) ? min : 0;\n        this.max = isNumberFinite(max) && !isNaN(max) ? max : 0;\n        this.handleTickRangeOptions();\n    }\n computeTickLimit() {\n        return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));\n    }\n    generateTickLabels(ticks) {\n        LinearScaleBase.prototype.generateTickLabels.call(this, ticks);\n        this._pointLabels = this.getLabels().map((value, index)=>{\n            const label = callback(this.options.pointLabels.callback, [\n                value,\n                index\n            ], this);\n            return label || label === 0 ? label : '';\n        }).filter((v, i)=>this.chart.getDataVisibility(i));\n    }\n    fit() {\n        const opts = this.options;\n        if (opts.display && opts.pointLabels.display) {\n            fitWithPointLabels(this);\n        } else {\n            this.setCenterPoint(0, 0, 0, 0);\n        }\n    }\n    setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {\n        this.xCenter += Math.floor((leftMovement - rightMovement) / 2);\n        this.yCenter += Math.floor((topMovement - bottomMovement) / 2);\n        this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));\n    }\n    getIndexAngle(index) {\n        const angleMultiplier = TAU / (this._pointLabels.length || 1);\n        const startAngle = this.options.startAngle || 0;\n        return _normalizeAngle(index * angleMultiplier + toRadians(startAngle));\n    }\n    getDistanceFromCenterForValue(value) {\n        if (isNullOrUndef(value)) {\n            return NaN;\n        }\n        const scalingFactor = this.drawingArea / (this.max - this.min);\n        if (this.options.reverse) {\n            return (this.max - value) * scalingFactor;\n        }\n        return (value - this.min) * scalingFactor;\n    }\n    getValueForDistanceFromCenter(distance) {\n        if (isNullOrUndef(distance)) {\n            return NaN;\n        }\n        const scaledDistance = distance / (this.drawingArea / (this.max - this.min));\n        return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;\n    }\n    getPointLabelContext(index) {\n        const pointLabels = this._pointLabels || [];\n        if (index >= 0 && index < pointLabels.length) {\n            const pointLabel = pointLabels[index];\n            return createPointLabelContext(this.getContext(), index, pointLabel);\n        }\n    }\n    getPointPosition(index, distanceFromCenter, additionalAngle = 0) {\n        const angle = this.getIndexAngle(index) - HALF_PI + additionalAngle;\n        return {\n            x: Math.cos(angle) * distanceFromCenter + this.xCenter,\n            y: Math.sin(angle) * distanceFromCenter + this.yCenter,\n            angle\n        };\n    }\n    getPointPositionForValue(index, value) {\n        return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));\n    }\n    getBasePosition(index) {\n        return this.getPointPositionForValue(index || 0, this.getBaseValue());\n    }\n    getPointLabelPosition(index) {\n        const { left , top , right , bottom  } = this._pointLabelItems[index];\n        return {\n            left,\n            top,\n            right,\n            bottom\n        };\n    }\n drawBackground() {\n        const { backgroundColor , grid: { circular  }  } = this.options;\n        if (backgroundColor) {\n            const ctx = this.ctx;\n            ctx.save();\n            ctx.beginPath();\n            pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);\n            ctx.closePath();\n            ctx.fillStyle = backgroundColor;\n            ctx.fill();\n            ctx.restore();\n        }\n    }\n drawGrid() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const { angleLines , grid , border  } = opts;\n        const labelCount = this._pointLabels.length;\n        let i, offset, position;\n        if (opts.pointLabels.display) {\n            drawPointLabels(this, labelCount);\n        }\n        if (grid.display) {\n            this.ticks.forEach((tick, index)=>{\n                if (index !== 0) {\n                    offset = this.getDistanceFromCenterForValue(tick.value);\n                    const context = this.getContext(index);\n                    const optsAtIndex = grid.setContext(context);\n                    const optsAtIndexBorder = border.setContext(context);\n                    drawRadiusLine(this, optsAtIndex, offset, labelCount, optsAtIndexBorder);\n                }\n            });\n        }\n        if (angleLines.display) {\n            ctx.save();\n            for(i = labelCount - 1; i >= 0; i--){\n                const optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));\n                const { color , lineWidth  } = optsAtIndex;\n                if (!lineWidth || !color) {\n                    continue;\n                }\n                ctx.lineWidth = lineWidth;\n                ctx.strokeStyle = color;\n                ctx.setLineDash(optsAtIndex.borderDash);\n                ctx.lineDashOffset = optsAtIndex.borderDashOffset;\n                offset = this.getDistanceFromCenterForValue(opts.ticks.reverse ? this.min : this.max);\n                position = this.getPointPosition(i, offset);\n                ctx.beginPath();\n                ctx.moveTo(this.xCenter, this.yCenter);\n                ctx.lineTo(position.x, position.y);\n                ctx.stroke();\n            }\n            ctx.restore();\n        }\n    }\n drawBorder() {}\n drawLabels() {\n        const ctx = this.ctx;\n        const opts = this.options;\n        const tickOpts = opts.ticks;\n        if (!tickOpts.display) {\n            return;\n        }\n        const startAngle = this.getIndexAngle(0);\n        let offset, width;\n        ctx.save();\n        ctx.translate(this.xCenter, this.yCenter);\n        ctx.rotate(startAngle);\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        this.ticks.forEach((tick, index)=>{\n            if (index === 0 && !opts.reverse) {\n                return;\n            }\n            const optsAtIndex = tickOpts.setContext(this.getContext(index));\n            const tickFont = toFont(optsAtIndex.font);\n            offset = this.getDistanceFromCenterForValue(this.ticks[index].value);\n            if (optsAtIndex.showLabelBackdrop) {\n                ctx.font = tickFont.string;\n                width = ctx.measureText(tick.label).width;\n                ctx.fillStyle = optsAtIndex.backdropColor;\n                const padding = toPadding(optsAtIndex.backdropPadding);\n                ctx.fillRect(-width / 2 - padding.left, -offset - tickFont.size / 2 - padding.top, width + padding.width, tickFont.size + padding.height);\n            }\n            renderText(ctx, tick.label, 0, -offset, tickFont, {\n                color: optsAtIndex.color\n            });\n        });\n        ctx.restore();\n    }\n drawTitle() {}\n}\n\nconst INTERVALS = {\n    millisecond: {\n        common: true,\n        size: 1,\n        steps: 1000\n    },\n    second: {\n        common: true,\n        size: 1000,\n        steps: 60\n    },\n    minute: {\n        common: true,\n        size: 60000,\n        steps: 60\n    },\n    hour: {\n        common: true,\n        size: 3600000,\n        steps: 24\n    },\n    day: {\n        common: true,\n        size: 86400000,\n        steps: 30\n    },\n    week: {\n        common: false,\n        size: 604800000,\n        steps: 4\n    },\n    month: {\n        common: true,\n        size: 2.628e9,\n        steps: 12\n    },\n    quarter: {\n        common: false,\n        size: 7.884e9,\n        steps: 4\n    },\n    year: {\n        common: true,\n        size: 3.154e10\n    }\n};\n const UNITS =  /* #__PURE__ */ Object.keys(INTERVALS);\n function sorter(a, b) {\n    return a - b;\n}\n function parse(scale, input) {\n    if (isNullOrUndef(input)) {\n        return null;\n    }\n    const adapter = scale._adapter;\n    const { parser , round , isoWeekday  } = scale._parseOpts;\n    let value = input;\n    if (typeof parser === 'function') {\n        value = parser(value);\n    }\n    if (!isNumberFinite(value)) {\n        value = typeof parser === 'string' ? adapter.parse(value,  (parser)) : adapter.parse(value);\n    }\n    if (value === null) {\n        return null;\n    }\n    if (round) {\n        value = round === 'week' && (isNumber(isoWeekday) || isoWeekday === true) ? adapter.startOf(value, 'isoWeek', isoWeekday) : adapter.startOf(value, round);\n    }\n    return +value;\n}\n function determineUnitForAutoTicks(minUnit, min, max, capacity) {\n    const ilen = UNITS.length;\n    for(let i = UNITS.indexOf(minUnit); i < ilen - 1; ++i){\n        const interval = INTERVALS[UNITS[i]];\n        const factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;\n        if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {\n            return UNITS[i];\n        }\n    }\n    return UNITS[ilen - 1];\n}\n function determineUnitForFormatting(scale, numTicks, minUnit, min, max) {\n    for(let i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--){\n        const unit = UNITS[i];\n        if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {\n            return unit;\n        }\n    }\n    return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];\n}\n function determineMajorUnit(unit) {\n    for(let i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i){\n        if (INTERVALS[UNITS[i]].common) {\n            return UNITS[i];\n        }\n    }\n}\n function addTick(ticks, time, timestamps) {\n    if (!timestamps) {\n        ticks[time] = true;\n    } else if (timestamps.length) {\n        const { lo , hi  } = _lookup(timestamps, time);\n        const timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];\n        ticks[timestamp] = true;\n    }\n}\n function setMajorTicks(scale, ticks, map, majorUnit) {\n    const adapter = scale._adapter;\n    const first = +adapter.startOf(ticks[0].value, majorUnit);\n    const last = ticks[ticks.length - 1].value;\n    let major, index;\n    for(major = first; major <= last; major = +adapter.add(major, 1, majorUnit)){\n        index = map[major];\n        if (index >= 0) {\n            ticks[index].major = true;\n        }\n    }\n    return ticks;\n}\n function ticksFromTimestamps(scale, values, majorUnit) {\n    const ticks = [];\n     const map = {};\n    const ilen = values.length;\n    let i, value;\n    for(i = 0; i < ilen; ++i){\n        value = values[i];\n        map[value] = i;\n        ticks.push({\n            value,\n            major: false\n        });\n    }\n    return ilen === 0 || !majorUnit ? ticks : setMajorTicks(scale, ticks, map, majorUnit);\n}\nclass TimeScale extends Scale {\n    static id = 'time';\n static defaults = {\n bounds: 'data',\n        adapters: {},\n        time: {\n            parser: false,\n            unit: false,\n            round: false,\n            isoWeekday: false,\n            minUnit: 'millisecond',\n            displayFormats: {}\n        },\n        ticks: {\n source: 'auto',\n            callback: false,\n            major: {\n                enabled: false\n            }\n        }\n    };\n constructor(props){\n        super(props);\n         this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n         this._unit = 'day';\n         this._majorUnit = undefined;\n        this._offsets = {};\n        this._normalized = false;\n        this._parseOpts = undefined;\n    }\n    init(scaleOpts, opts = {}) {\n        const time = scaleOpts.time || (scaleOpts.time = {});\n         const adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);\n        adapter.init(opts);\n        mergeIf(time.displayFormats, adapter.formats());\n        this._parseOpts = {\n            parser: time.parser,\n            round: time.round,\n            isoWeekday: time.isoWeekday\n        };\n        super.init(scaleOpts);\n        this._normalized = opts.normalized;\n    }\n parse(raw, index) {\n        if (raw === undefined) {\n            return null;\n        }\n        return parse(this, raw);\n    }\n    beforeLayout() {\n        super.beforeLayout();\n        this._cache = {\n            data: [],\n            labels: [],\n            all: []\n        };\n    }\n    determineDataLimits() {\n        const options = this.options;\n        const adapter = this._adapter;\n        const unit = options.time.unit || 'day';\n        let { min , max , minDefined , maxDefined  } = this.getUserBounds();\n function _applyBounds(bounds) {\n            if (!minDefined && !isNaN(bounds.min)) {\n                min = Math.min(min, bounds.min);\n            }\n            if (!maxDefined && !isNaN(bounds.max)) {\n                max = Math.max(max, bounds.max);\n            }\n        }\n        if (!minDefined || !maxDefined) {\n            _applyBounds(this._getLabelBounds());\n            if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {\n                _applyBounds(this.getMinMax(false));\n            }\n        }\n        min = isNumberFinite(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);\n        max = isNumberFinite(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;\n        this.min = Math.min(min, max - 1);\n        this.max = Math.max(min + 1, max);\n    }\n _getLabelBounds() {\n        const arr = this.getLabelTimestamps();\n        let min = Number.POSITIVE_INFINITY;\n        let max = Number.NEGATIVE_INFINITY;\n        if (arr.length) {\n            min = arr[0];\n            max = arr[arr.length - 1];\n        }\n        return {\n            min,\n            max\n        };\n    }\n buildTicks() {\n        const options = this.options;\n        const timeOpts = options.time;\n        const tickOpts = options.ticks;\n        const timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();\n        if (options.bounds === 'ticks' && timestamps.length) {\n            this.min = this._userMin || timestamps[0];\n            this.max = this._userMax || timestamps[timestamps.length - 1];\n        }\n        const min = this.min;\n        const max = this.max;\n        const ticks = _filterBetween(timestamps, min, max);\n        this._unit = timeOpts.unit || (tickOpts.autoSkip ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min)) : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));\n        this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined : determineMajorUnit(this._unit);\n        this.initOffsets(timestamps);\n        if (options.reverse) {\n            ticks.reverse();\n        }\n        return ticksFromTimestamps(this, ticks, this._majorUnit);\n    }\n    afterAutoSkip() {\n        if (this.options.offsetAfterAutoskip) {\n            this.initOffsets(this.ticks.map((tick)=>+tick.value));\n        }\n    }\n initOffsets(timestamps = []) {\n        let start = 0;\n        let end = 0;\n        let first, last;\n        if (this.options.offset && timestamps.length) {\n            first = this.getDecimalForValue(timestamps[0]);\n            if (timestamps.length === 1) {\n                start = 1 - first;\n            } else {\n                start = (this.getDecimalForValue(timestamps[1]) - first) / 2;\n            }\n            last = this.getDecimalForValue(timestamps[timestamps.length - 1]);\n            if (timestamps.length === 1) {\n                end = last;\n            } else {\n                end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;\n            }\n        }\n        const limit = timestamps.length < 3 ? 0.5 : 0.25;\n        start = _limitValue(start, 0, limit);\n        end = _limitValue(end, 0, limit);\n        this._offsets = {\n            start,\n            end,\n            factor: 1 / (start + 1 + end)\n        };\n    }\n _generate() {\n        const adapter = this._adapter;\n        const min = this.min;\n        const max = this.max;\n        const options = this.options;\n        const timeOpts = options.time;\n        const minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));\n        const stepSize = valueOrDefault(options.ticks.stepSize, 1);\n        const weekday = minor === 'week' ? timeOpts.isoWeekday : false;\n        const hasWeekday = isNumber(weekday) || weekday === true;\n        const ticks = {};\n        let first = min;\n        let time, count;\n        if (hasWeekday) {\n            first = +adapter.startOf(first, 'isoWeek', weekday);\n        }\n        first = +adapter.startOf(first, hasWeekday ? 'day' : minor);\n        if (adapter.diff(max, min, minor) > 100000 * stepSize) {\n            throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);\n        }\n        const timestamps = options.ticks.source === 'data' && this.getDataTimestamps();\n        for(time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++){\n            addTick(ticks, time, timestamps);\n        }\n        if (time === max || options.bounds === 'ticks' || count === 1) {\n            addTick(ticks, time, timestamps);\n        }\n        return Object.keys(ticks).sort((a, b)=>a - b).map((x)=>+x);\n    }\n getLabelForValue(value) {\n        const adapter = this._adapter;\n        const timeOpts = this.options.time;\n        if (timeOpts.tooltipFormat) {\n            return adapter.format(value, timeOpts.tooltipFormat);\n        }\n        return adapter.format(value, timeOpts.displayFormats.datetime);\n    }\n _tickFormatFunction(time, index, ticks, format) {\n        const options = this.options;\n        const formatter = options.ticks.callback;\n        if (formatter) {\n            return callback(formatter, [\n                time,\n                index,\n                ticks\n            ], this);\n        }\n        const formats = options.time.displayFormats;\n        const unit = this._unit;\n        const majorUnit = this._majorUnit;\n        const minorFormat = unit && formats[unit];\n        const majorFormat = majorUnit && formats[majorUnit];\n        const tick = ticks[index];\n        const major = majorUnit && majorFormat && tick && tick.major;\n        return this._adapter.format(time, format || (major ? majorFormat : minorFormat));\n    }\n generateTickLabels(ticks) {\n        let i, ilen, tick;\n        for(i = 0, ilen = ticks.length; i < ilen; ++i){\n            tick = ticks[i];\n            tick.label = this._tickFormatFunction(tick.value, i, ticks);\n        }\n    }\n getDecimalForValue(value) {\n        return value === null ? NaN : (value - this.min) / (this.max - this.min);\n    }\n getPixelForValue(value) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForValue(value);\n        return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return this.min + pos * (this.max - this.min);\n    }\n _getLabelSize(label) {\n        const ticksOpts = this.options.ticks;\n        const tickLabelWidth = this.ctx.measureText(label).width;\n        const angle = toRadians(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);\n        const cosRotation = Math.cos(angle);\n        const sinRotation = Math.sin(angle);\n        const tickFontSize = this._resolveTickFontOptions(0).size;\n        return {\n            w: tickLabelWidth * cosRotation + tickFontSize * sinRotation,\n            h: tickLabelWidth * sinRotation + tickFontSize * cosRotation\n        };\n    }\n _getLabelCapacity(exampleTime) {\n        const timeOpts = this.options.time;\n        const displayFormats = timeOpts.displayFormats;\n        const format = displayFormats[timeOpts.unit] || displayFormats.millisecond;\n        const exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [\n            exampleTime\n        ], this._majorUnit), format);\n        const size = this._getLabelSize(exampleLabel);\n        const capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;\n        return capacity > 0 ? capacity : 1;\n    }\n getDataTimestamps() {\n        let timestamps = this._cache.data || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const metas = this.getMatchingVisibleMetas();\n        if (this._normalized && metas.length) {\n            return this._cache.data = metas[0].controller.getAllParsedValues(this);\n        }\n        for(i = 0, ilen = metas.length; i < ilen; ++i){\n            timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));\n        }\n        return this._cache.data = this.normalize(timestamps);\n    }\n getLabelTimestamps() {\n        const timestamps = this._cache.labels || [];\n        let i, ilen;\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const labels = this.getLabels();\n        for(i = 0, ilen = labels.length; i < ilen; ++i){\n            timestamps.push(parse(this, labels[i]));\n        }\n        return this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps);\n    }\n normalize(values) {\n        return _arrayUnique(values.sort(sorter));\n    }\n}\n\nfunction interpolate(table, val, reverse) {\n    let lo = 0;\n    let hi = table.length - 1;\n    let prevSource, nextSource, prevTarget, nextTarget;\n    if (reverse) {\n        if (val >= table[lo].pos && val <= table[hi].pos) {\n            ({ lo , hi  } = _lookupByKey(table, 'pos', val));\n        }\n        ({ pos: prevSource , time: prevTarget  } = table[lo]);\n        ({ pos: nextSource , time: nextTarget  } = table[hi]);\n    } else {\n        if (val >= table[lo].time && val <= table[hi].time) {\n            ({ lo , hi  } = _lookupByKey(table, 'time', val));\n        }\n        ({ time: prevSource , pos: prevTarget  } = table[lo]);\n        ({ time: nextSource , pos: nextTarget  } = table[hi]);\n    }\n    const span = nextSource - prevSource;\n    return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;\n}\nclass TimeSeriesScale extends TimeScale {\n    static id = 'timeseries';\n static defaults = TimeScale.defaults;\n constructor(props){\n        super(props);\n         this._table = [];\n         this._minPos = undefined;\n         this._tableRange = undefined;\n    }\n initOffsets() {\n        const timestamps = this._getTimestampsForTable();\n        const table = this._table = this.buildLookupTable(timestamps);\n        this._minPos = interpolate(table, this.min);\n        this._tableRange = interpolate(table, this.max) - this._minPos;\n        super.initOffsets(timestamps);\n    }\n buildLookupTable(timestamps) {\n        const { min , max  } = this;\n        const items = [];\n        const table = [];\n        let i, ilen, prev, curr, next;\n        for(i = 0, ilen = timestamps.length; i < ilen; ++i){\n            curr = timestamps[i];\n            if (curr >= min && curr <= max) {\n                items.push(curr);\n            }\n        }\n        if (items.length < 2) {\n            return [\n                {\n                    time: min,\n                    pos: 0\n                },\n                {\n                    time: max,\n                    pos: 1\n                }\n            ];\n        }\n        for(i = 0, ilen = items.length; i < ilen; ++i){\n            next = items[i + 1];\n            prev = items[i - 1];\n            curr = items[i];\n            if (Math.round((next + prev) / 2) !== curr) {\n                table.push({\n                    time: curr,\n                    pos: i / (ilen - 1)\n                });\n            }\n        }\n        return table;\n    }\n _getTimestampsForTable() {\n        let timestamps = this._cache.all || [];\n        if (timestamps.length) {\n            return timestamps;\n        }\n        const data = this.getDataTimestamps();\n        const label = this.getLabelTimestamps();\n        if (data.length && label.length) {\n            timestamps = this.normalize(data.concat(label));\n        } else {\n            timestamps = data.length ? data : label;\n        }\n        timestamps = this._cache.all = timestamps;\n        return timestamps;\n    }\n getDecimalForValue(value) {\n        return (interpolate(this._table, value) - this._minPos) / this._tableRange;\n    }\n getValueForPixel(pixel) {\n        const offsets = this._offsets;\n        const decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;\n        return interpolate(this._table, decimal * this._tableRange + this._minPos, true);\n    }\n}\nvar TimeSeriesScale$1 = TimeSeriesScale;\n\nvar scales = /*#__PURE__*/Object.freeze({\n__proto__: null,\nCategoryScale: CategoryScale,\nLinearScale: LinearScale,\nLogarithmicScale: LogarithmicScale,\nRadialLinearScale: RadialLinearScale,\nTimeScale: TimeScale,\nTimeSeriesScale: TimeSeriesScale$1\n});\n\nconst registerables = [\n    controllers,\n    elements,\n    plugins,\n    scales, \n];\n\nexport { Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart$1 as Chart, plugin_colors as Colors, DatasetController, plugin_decimation as Decimation, DomPlatform, DoughnutController, Element, index as Filler, Interaction, plugin_legend as Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, plugin_subtitle as SubTitle, TimeScale, TimeSeriesScale$1 as TimeSeriesScale, plugin_title as Title, plugin_tooltip as Tooltip, adapters as _adapters, _detectPlatform, animator, controllers, elements, layouts, plugins, registerables, registry, scales };\n//# sourceMappingURL=chart.js.map\n","/*!\n * Chart.js v4.0.1\n * https://www.chartjs.org\n * (c) 2022 Chart.js Contributors\n * Released under the MIT License\n */\n/**\n * @namespace Chart.helpers\n */ /**\n * An empty function that can be used, for example, for optional callback.\n */ function noop() {\n/* noop */ }\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */ const uid = (()=>{\n    let id = 0;\n    return ()=>id++;\n})();\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isNullOrUndef(value) {\n    return value === null || typeof value === 'undefined';\n}\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */ function isArray(value) {\n    if (Array.isArray && Array.isArray(value)) {\n        return true;\n    }\n    const type = Object.prototype.toString.call(value);\n    if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n        return true;\n    }\n    return false;\n}\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */ function isObject(value) {\n    return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */ function isNumberFinite(value) {\n    return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */ function finiteOrDefault(value, defaultValue) {\n    return isNumberFinite(value) ? value : defaultValue;\n}\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */ function valueOrDefault(value, defaultValue) {\n    return typeof value === 'undefined' ? defaultValue : value;\n}\nconst toPercentage = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 : +value / dimension;\nconst toDimension = (value, dimension)=>typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 * dimension : +value;\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */ function callback(fn, args, thisArg) {\n    if (fn && typeof fn.call === 'function') {\n        return fn.apply(thisArg, args);\n    }\n}\nfunction each(loopable, fn, thisArg, reverse) {\n    let i, len, keys;\n    if (isArray(loopable)) {\n        len = loopable.length;\n        if (reverse) {\n            for(i = len - 1; i >= 0; i--){\n                fn.call(thisArg, loopable[i], i);\n            }\n        } else {\n            for(i = 0; i < len; i++){\n                fn.call(thisArg, loopable[i], i);\n            }\n        }\n    } else if (isObject(loopable)) {\n        keys = Object.keys(loopable);\n        len = keys.length;\n        for(i = 0; i < len; i++){\n            fn.call(thisArg, loopable[keys[i]], keys[i]);\n        }\n    }\n}\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */ function _elementsEqual(a0, a1) {\n    let i, ilen, v0, v1;\n    if (!a0 || !a1 || a0.length !== a1.length) {\n        return false;\n    }\n    for(i = 0, ilen = a0.length; i < ilen; ++i){\n        v0 = a0[i];\n        v1 = a1[i];\n        if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */ function clone$1(source) {\n    if (isArray(source)) {\n        return source.map(clone$1);\n    }\n    if (isObject(source)) {\n        const target = Object.create(null);\n        const keys = Object.keys(source);\n        const klen = keys.length;\n        let k = 0;\n        for(; k < klen; ++k){\n            target[keys[k]] = clone$1(source[keys[k]]);\n        }\n        return target;\n    }\n    return source;\n}\nfunction isValidKey(key) {\n    return [\n        '__proto__',\n        'prototype',\n        'constructor'\n    ].indexOf(key) === -1;\n}\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */ function _merger(key, target, source, options) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        merge(tval, sval, options);\n    } else {\n        target[key] = clone$1(sval);\n    }\n}\nfunction merge(target, source, options) {\n    const sources = isArray(source) ? source : [\n        source\n    ];\n    const ilen = sources.length;\n    if (!isObject(target)) {\n        return target;\n    }\n    options = options || {};\n    const merger = options.merger || _merger;\n    let current;\n    for(let i = 0; i < ilen; ++i){\n        current = sources[i];\n        if (!isObject(current)) {\n            continue;\n        }\n        const keys = Object.keys(current);\n        for(let k = 0, klen = keys.length; k < klen; ++k){\n            merger(keys[k], target, current, options);\n        }\n    }\n    return target;\n}\nfunction mergeIf(target, source) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return merge(target, source, {\n        merger: _mergerIf\n    });\n}\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */ function _mergerIf(key, target, source) {\n    if (!isValidKey(key)) {\n        return;\n    }\n    const tval = target[key];\n    const sval = source[key];\n    if (isObject(tval) && isObject(sval)) {\n        mergeIf(tval, sval);\n    } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n        target[key] = clone$1(sval);\n    }\n}\n/**\n * @private\n */ function _deprecated(scope, value, previous, current) {\n    if (value !== undefined) {\n        console.warn(scope + ': \"' + previous + '\" is deprecated. Please use \"' + current + '\" instead');\n    }\n}\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n    // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n    '': (v)=>v,\n    // default resolvers\n    x: (o)=>o.x,\n    y: (o)=>o.y\n};\n/**\n * @private\n */ function _splitKey(key) {\n    const parts = key.split('.');\n    const keys = [];\n    let tmp = '';\n    for (const part of parts){\n        tmp += part;\n        if (tmp.endsWith('\\\\')) {\n            tmp = tmp.slice(0, -1) + '.';\n        } else {\n            keys.push(tmp);\n            tmp = '';\n        }\n    }\n    return keys;\n}\nfunction _getKeyResolver(key) {\n    const keys = _splitKey(key);\n    return (obj)=>{\n        for (const k of keys){\n            if (k === '') {\n                break;\n            }\n            obj = obj && obj[k];\n        }\n        return obj;\n    };\n}\nfunction resolveObjectKey(obj, key) {\n    const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n    return resolver(obj);\n}\n/**\n * @private\n */ function _capitalize(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst defined = (value)=>typeof value !== 'undefined';\nconst isFunction = (value)=>typeof value === 'function';\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nconst setsEqual = (a, b)=>{\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a){\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * @param e - The event\n * @private\n */ function _isClickEvent(e) {\n    return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */ const PI = Math.PI;\nconst TAU = 2 * PI;\nconst PITAU = TAU + PI;\nconst INFINITY = Number.POSITIVE_INFINITY;\nconst RAD_PER_DEG = PI / 180;\nconst HALF_PI = PI / 2;\nconst QUARTER_PI = PI / 4;\nconst TWO_THIRDS_PI = PI * 2 / 3;\nconst log10 = Math.log10;\nconst sign = Math.sign;\nfunction almostEquals(x, y, epsilon) {\n    return Math.abs(x - y) < epsilon;\n}\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */ function niceNum(range) {\n    const roundedRange = Math.round(range);\n    range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n    const niceRange = Math.pow(10, Math.floor(log10(range)));\n    const fraction = range / niceRange;\n    const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n    return niceFraction * niceRange;\n}\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */ function _factorize(value) {\n    const result = [];\n    const sqrt = Math.sqrt(value);\n    let i;\n    for(i = 1; i < sqrt; i++){\n        if (value % i === 0) {\n            result.push(i);\n            result.push(value / i);\n        }\n    }\n    if (sqrt === (sqrt | 0)) {\n        result.push(sqrt);\n    }\n    result.sort((a, b)=>a - b).pop();\n    return result;\n}\nfunction isNumber(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n}\nfunction almostWhole(x, epsilon) {\n    const rounded = Math.round(x);\n    return rounded - epsilon <= x && rounded + epsilon >= x;\n}\n/**\n * @private\n */ function _setMinAndMaxByKey(array, target, property) {\n    let i, ilen, value;\n    for(i = 0, ilen = array.length; i < ilen; i++){\n        value = array[i][property];\n        if (!isNaN(value)) {\n            target.min = Math.min(target.min, value);\n            target.max = Math.max(target.max, value);\n        }\n    }\n}\nfunction toRadians(degrees) {\n    return degrees * (PI / 180);\n}\nfunction toDegrees(radians) {\n    return radians * (180 / PI);\n}\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */ function _decimalPlaces(x) {\n    if (!isNumberFinite(x)) {\n        return;\n    }\n    let e = 1;\n    let p = 0;\n    while(Math.round(x * e) / e !== x){\n        e *= 10;\n        p++;\n    }\n    return p;\n}\n// Gets the angle from vertical upright to the point about a centre.\nfunction getAngleFromPoint(centrePoint, anglePoint) {\n    const distanceFromXCenter = anglePoint.x - centrePoint.x;\n    const distanceFromYCenter = anglePoint.y - centrePoint.y;\n    const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n    let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n    if (angle < -0.5 * PI) {\n        angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n    }\n    return {\n        angle,\n        distance: radialDistanceFromCenter\n    };\n}\nfunction distanceBetweenPoints(pt1, pt2) {\n    return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */ function _angleDiff(a, b) {\n    return (a - b + PITAU) % TAU - PI;\n}\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */ function _normalizeAngle(a) {\n    return (a % TAU + TAU) % TAU;\n}\n/**\n * @private\n */ function _angleBetween(angle, start, end, sameAngleIsFullCircle) {\n    const a = _normalizeAngle(angle);\n    const s = _normalizeAngle(start);\n    const e = _normalizeAngle(end);\n    const angleToStart = _normalizeAngle(s - a);\n    const angleToEnd = _normalizeAngle(e - a);\n    const startToAngle = _normalizeAngle(a - s);\n    const endToAngle = _normalizeAngle(a - e);\n    return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;\n}\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */ function _limitValue(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/**\n * @param {number} value\n * @private\n */ function _int16Range(value) {\n    return _limitValue(value, -32768, 32767);\n}\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */ function _isBetween(value, start, end, epsilon = 1e-6) {\n    return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n\nfunction _lookup(table, value, cmp) {\n    cmp = cmp || ((index)=>table[index] < value);\n    let hi = table.length - 1;\n    let lo = 0;\n    let mid;\n    while(hi - lo > 1){\n        mid = lo + hi >> 1;\n        if (cmp(mid)) {\n            lo = mid;\n        } else {\n            hi = mid;\n        }\n    }\n    return {\n        lo,\n        hi\n    };\n}\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */ const _lookupByKey = (table, key, value, last)=>_lookup(table, value, last ? (index)=>{\n        const ti = table[index][key];\n        return ti < value || ti === value && table[index + 1][key] === value;\n    } : (index)=>table[index][key] < value);\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */ const _rlookupByKey = (table, key, value)=>_lookup(table, value, (index)=>table[index][key] >= value);\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */ function _filterBetween(values, min, max) {\n    let start = 0;\n    let end = values.length;\n    while(start < end && values[start] < min){\n        start++;\n    }\n    while(end > start && values[end - 1] > max){\n        end--;\n    }\n    return start > 0 || end < values.length ? values.slice(start, end) : values;\n}\nconst arrayEvents = [\n    'push',\n    'pop',\n    'shift',\n    'splice',\n    'unshift'\n];\nfunction listenArrayEvents(array, listener) {\n    if (array._chartjs) {\n        array._chartjs.listeners.push(listener);\n        return;\n    }\n    Object.defineProperty(array, '_chartjs', {\n        configurable: true,\n        enumerable: false,\n        value: {\n            listeners: [\n                listener\n            ]\n        }\n    });\n    arrayEvents.forEach((key)=>{\n        const method = '_onData' + _capitalize(key);\n        const base = array[key];\n        Object.defineProperty(array, key, {\n            configurable: true,\n            enumerable: false,\n            value (...args) {\n                const res = base.apply(this, args);\n                array._chartjs.listeners.forEach((object)=>{\n                    if (typeof object[method] === 'function') {\n                        object[method](...args);\n                    }\n                });\n                return res;\n            }\n        });\n    });\n}\nfunction unlistenArrayEvents(array, listener) {\n    const stub = array._chartjs;\n    if (!stub) {\n        return;\n    }\n    const listeners = stub.listeners;\n    const index = listeners.indexOf(listener);\n    if (index !== -1) {\n        listeners.splice(index, 1);\n    }\n    if (listeners.length > 0) {\n        return;\n    }\n    arrayEvents.forEach((key)=>{\n        delete array[key];\n    });\n    delete array._chartjs;\n}\n/**\n * @param items\n */ function _arrayUnique(items) {\n    const set = new Set();\n    let i, ilen;\n    for(i = 0, ilen = items.length; i < ilen; ++i){\n        set.add(items[i]);\n    }\n    if (set.size === ilen) {\n        return items;\n    }\n    return Array.from(set);\n}\n\nfunction fontString(pixelSize, fontStyle, fontFamily) {\n    return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n/**\n* Request animation polyfill\n*/ const requestAnimFrame = function() {\n    if (typeof window === 'undefined') {\n        return function(callback) {\n            return callback();\n        };\n    }\n    return window.requestAnimationFrame;\n}();\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */ function throttled(fn, thisArg) {\n    let ticking = false;\n    return function(...args) {\n        if (!ticking) {\n            ticking = true;\n            requestAnimFrame.call(window, ()=>{\n                ticking = false;\n                fn.apply(thisArg, args);\n            });\n        }\n    };\n}\n/**\n * Debounces calling `fn` for `delay` ms\n */ function debounce(fn, delay) {\n    let timeout;\n    return function(...args) {\n        if (delay) {\n            clearTimeout(timeout);\n            timeout = setTimeout(fn, delay, args);\n        } else {\n            fn.apply(this, args);\n        }\n        return delay;\n    };\n}\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */ const _toLeftRightCenter = (align)=>align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */ const _alignStartEnd = (align, start, end)=>align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */ const _textX = (align, left, right, rtl)=>{\n    const check = rtl ? 'left' : 'right';\n    return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n/**\n * Return start and count of visible points.\n * @private\n */ function _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\n    const pointCount = points.length;\n    let start = 0;\n    let count = pointCount;\n    if (meta._sorted) {\n        const { iScale , _parsed  } = meta;\n        const axis = iScale.axis;\n        const { min , max , minDefined , maxDefined  } = iScale.getUserBounds();\n        if (minDefined) {\n            start = _limitValue(Math.min(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, iScale.axis, min).lo, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo), 0, pointCount - 1);\n        }\n        if (maxDefined) {\n            count = _limitValue(Math.max(// @ts-expect-error Need to type _parsed\n            _lookupByKey(_parsed, iScale.axis, max, true).hi + 1, // @ts-expect-error Need to fix types on _lookupByKey\n            animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1), start, pointCount) - start;\n        } else {\n            count = pointCount - start;\n        }\n    }\n    return {\n        start,\n        count\n    };\n}\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */ function _scaleRangesChanged(meta) {\n    const { xScale , yScale , _scaleRanges  } = meta;\n    const newRanges = {\n        xmin: xScale.min,\n        xmax: xScale.max,\n        ymin: yScale.min,\n        ymax: yScale.max\n    };\n    if (!_scaleRanges) {\n        meta._scaleRanges = newRanges;\n        return true;\n    }\n    const changed = _scaleRanges.xmin !== xScale.min || _scaleRanges.xmax !== xScale.max || _scaleRanges.ymin !== yScale.min || _scaleRanges.ymax !== yScale.max;\n    Object.assign(_scaleRanges, newRanges);\n    return changed;\n}\n\nconst atEdge = (t)=>t === 0 || t === 1;\nconst elasticIn = (t, s, p)=>-(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t, s, p)=>Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */ const effects = {\n    linear: (t)=>t,\n    easeInQuad: (t)=>t * t,\n    easeOutQuad: (t)=>-t * (t - 2),\n    easeInOutQuad: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1),\n    easeInCubic: (t)=>t * t * t,\n    easeOutCubic: (t)=>(t -= 1) * t * t + 1,\n    easeInOutCubic: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2),\n    easeInQuart: (t)=>t * t * t * t,\n    easeOutQuart: (t)=>-((t -= 1) * t * t * t - 1),\n    easeInOutQuart: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2),\n    easeInQuint: (t)=>t * t * t * t * t,\n    easeOutQuint: (t)=>(t -= 1) * t * t * t * t + 1,\n    easeInOutQuint: (t)=>(t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2),\n    easeInSine: (t)=>-Math.cos(t * HALF_PI) + 1,\n    easeOutSine: (t)=>Math.sin(t * HALF_PI),\n    easeInOutSine: (t)=>-0.5 * (Math.cos(PI * t) - 1),\n    easeInExpo: (t)=>t === 0 ? 0 : Math.pow(2, 10 * (t - 1)),\n    easeOutExpo: (t)=>t === 1 ? 1 : -Math.pow(2, -10 * t) + 1,\n    easeInOutExpo: (t)=>atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n    easeInCirc: (t)=>t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1),\n    easeOutCirc: (t)=>Math.sqrt(1 - (t -= 1) * t),\n    easeInOutCirc: (t)=>(t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n    easeInElastic: (t)=>atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n    easeOutElastic: (t)=>atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n    easeInOutElastic (t) {\n        const s = 0.1125;\n        const p = 0.45;\n        return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n    },\n    easeInBack (t) {\n        const s = 1.70158;\n        return t * t * ((s + 1) * t - s);\n    },\n    easeOutBack (t) {\n        const s = 1.70158;\n        return (t -= 1) * t * ((s + 1) * t + s) + 1;\n    },\n    easeInOutBack (t) {\n        let s = 1.70158;\n        if ((t /= 0.5) < 1) {\n            return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n        }\n        return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n    },\n    easeInBounce: (t)=>1 - effects.easeOutBounce(1 - t),\n    easeOutBounce (t) {\n        const m = 7.5625;\n        const d = 2.75;\n        if (t < 1 / d) {\n            return m * t * t;\n        }\n        if (t < 2 / d) {\n            return m * (t -= 1.5 / d) * t + 0.75;\n        }\n        if (t < 2.5 / d) {\n            return m * (t -= 2.25 / d) * t + 0.9375;\n        }\n        return m * (t -= 2.625 / d) * t + 0.984375;\n    },\n    easeInOutBounce: (t)=>t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5\n};\nvar effects$1 = effects;\n\n/*!\n * @kurkle/color v0.2.1\n * https://github.com/kurkle/color#readme\n * (c) 2022 Jukka Kurkela\n * Released under the MIT License\n */\nfunction round(v) {\n  return v + 0.5 | 0;\n}\nconst lim = (v, l, h) => Math.max(Math.min(v, h), l);\nfunction p2b(v) {\n  return lim(round(v * 2.55), 0, 255);\n}\nfunction n2b(v) {\n  return lim(round(v * 255), 0, 255);\n}\nfunction b2n(v) {\n  return lim(round(v / 2.55) / 100, 0, 1);\n}\nfunction n2p(v) {\n  return lim(round(v * 100), 0, 100);\n}\nconst map$1 = {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, A: 10, B: 11, C: 12, D: 13, E: 14, F: 15, a: 10, b: 11, c: 12, d: 13, e: 14, f: 15};\nconst hex = [...'0123456789ABCDEF'];\nconst h1 = b => hex[b & 0xF];\nconst h2 = b => hex[(b & 0xF0) >> 4] + hex[b & 0xF];\nconst eq = b => ((b & 0xF0) >> 4) === (b & 0xF);\nconst isShort = v => eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);\nfunction hexParse(str) {\n  var len = str.length;\n  var ret;\n  if (str[0] === '#') {\n    if (len === 4 || len === 5) {\n      ret = {\n        r: 255 & map$1[str[1]] * 17,\n        g: 255 & map$1[str[2]] * 17,\n        b: 255 & map$1[str[3]] * 17,\n        a: len === 5 ? map$1[str[4]] * 17 : 255\n      };\n    } else if (len === 7 || len === 9) {\n      ret = {\n        r: map$1[str[1]] << 4 | map$1[str[2]],\n        g: map$1[str[3]] << 4 | map$1[str[4]],\n        b: map$1[str[5]] << 4 | map$1[str[6]],\n        a: len === 9 ? (map$1[str[7]] << 4 | map$1[str[8]]) : 255\n      };\n    }\n  }\n  return ret;\n}\nconst alpha = (a, f) => a < 255 ? f(a) : '';\nfunction hexString(v) {\n  var f = isShort(v) ? h1 : h2;\n  return v\n    ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f)\n    : undefined;\n}\nconst HUE_RE = /^(hsla?|hwb|hsv)\\(\\s*([-+.e\\d]+)(?:deg)?[\\s,]+([-+.e\\d]+)%[\\s,]+([-+.e\\d]+)%(?:[\\s,]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction hsl2rgbn(h, s, l) {\n  const a = s * Math.min(l, 1 - l);\n  const f = (n, k = (n + h / 30) % 12) => l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  return [f(0), f(8), f(4)];\n}\nfunction hsv2rgbn(h, s, v) {\n  const f = (n, k = (n + h / 60) % 6) => v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);\n  return [f(5), f(3), f(1)];\n}\nfunction hwb2rgbn(h, w, b) {\n  const rgb = hsl2rgbn(h, 1, 0.5);\n  let i;\n  if (w + b > 1) {\n    i = 1 / (w + b);\n    w *= i;\n    b *= i;\n  }\n  for (i = 0; i < 3; i++) {\n    rgb[i] *= 1 - w - b;\n    rgb[i] += w;\n  }\n  return rgb;\n}\nfunction hueValue(r, g, b, d, max) {\n  if (r === max) {\n    return ((g - b) / d) + (g < b ? 6 : 0);\n  }\n  if (g === max) {\n    return (b - r) / d + 2;\n  }\n  return (r - g) / d + 4;\n}\nfunction rgb2hsl(v) {\n  const range = 255;\n  const r = v.r / range;\n  const g = v.g / range;\n  const b = v.b / range;\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  const l = (max + min) / 2;\n  let h, s, d;\n  if (max !== min) {\n    d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    h = hueValue(r, g, b, d, max);\n    h = h * 60 + 0.5;\n  }\n  return [h | 0, s || 0, l];\n}\nfunction calln(f, a, b, c) {\n  return (\n    Array.isArray(a)\n      ? f(a[0], a[1], a[2])\n      : f(a, b, c)\n  ).map(n2b);\n}\nfunction hsl2rgb(h, s, l) {\n  return calln(hsl2rgbn, h, s, l);\n}\nfunction hwb2rgb(h, w, b) {\n  return calln(hwb2rgbn, h, w, b);\n}\nfunction hsv2rgb(h, s, v) {\n  return calln(hsv2rgbn, h, s, v);\n}\nfunction hue(h) {\n  return (h % 360 + 360) % 360;\n}\nfunction hueParse(str) {\n  const m = HUE_RE.exec(str);\n  let a = 255;\n  let v;\n  if (!m) {\n    return;\n  }\n  if (m[5] !== v) {\n    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);\n  }\n  const h = hue(+m[2]);\n  const p1 = +m[3] / 100;\n  const p2 = +m[4] / 100;\n  if (m[1] === 'hwb') {\n    v = hwb2rgb(h, p1, p2);\n  } else if (m[1] === 'hsv') {\n    v = hsv2rgb(h, p1, p2);\n  } else {\n    v = hsl2rgb(h, p1, p2);\n  }\n  return {\n    r: v[0],\n    g: v[1],\n    b: v[2],\n    a: a\n  };\n}\nfunction rotate(v, deg) {\n  var h = rgb2hsl(v);\n  h[0] = hue(h[0] + deg);\n  h = hsl2rgb(h);\n  v.r = h[0];\n  v.g = h[1];\n  v.b = h[2];\n}\nfunction hslString(v) {\n  if (!v) {\n    return;\n  }\n  const a = rgb2hsl(v);\n  const h = a[0];\n  const s = n2p(a[1]);\n  const l = n2p(a[2]);\n  return v.a < 255\n    ? `hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\nconst map = {\n  x: 'dark',\n  Z: 'light',\n  Y: 're',\n  X: 'blu',\n  W: 'gr',\n  V: 'medium',\n  U: 'slate',\n  A: 'ee',\n  T: 'ol',\n  S: 'or',\n  B: 'ra',\n  C: 'lateg',\n  D: 'ights',\n  R: 'in',\n  Q: 'turquois',\n  E: 'hi',\n  P: 'ro',\n  O: 'al',\n  N: 'le',\n  M: 'de',\n  L: 'yello',\n  F: 'en',\n  K: 'ch',\n  G: 'arks',\n  H: 'ea',\n  I: 'ightg',\n  J: 'wh'\n};\nconst names$1 = {\n  OiceXe: 'f0f8ff',\n  antiquewEte: 'faebd7',\n  aqua: 'ffff',\n  aquamarRe: '7fffd4',\n  azuY: 'f0ffff',\n  beige: 'f5f5dc',\n  bisque: 'ffe4c4',\n  black: '0',\n  blanKedOmond: 'ffebcd',\n  Xe: 'ff',\n  XeviTet: '8a2be2',\n  bPwn: 'a52a2a',\n  burlywood: 'deb887',\n  caMtXe: '5f9ea0',\n  KartYuse: '7fff00',\n  KocTate: 'd2691e',\n  cSO: 'ff7f50',\n  cSnflowerXe: '6495ed',\n  cSnsilk: 'fff8dc',\n  crimson: 'dc143c',\n  cyan: 'ffff',\n  xXe: '8b',\n  xcyan: '8b8b',\n  xgTMnPd: 'b8860b',\n  xWay: 'a9a9a9',\n  xgYF: '6400',\n  xgYy: 'a9a9a9',\n  xkhaki: 'bdb76b',\n  xmagFta: '8b008b',\n  xTivegYF: '556b2f',\n  xSange: 'ff8c00',\n  xScEd: '9932cc',\n  xYd: '8b0000',\n  xsOmon: 'e9967a',\n  xsHgYF: '8fbc8f',\n  xUXe: '483d8b',\n  xUWay: '2f4f4f',\n  xUgYy: '2f4f4f',\n  xQe: 'ced1',\n  xviTet: '9400d3',\n  dAppRk: 'ff1493',\n  dApskyXe: 'bfff',\n  dimWay: '696969',\n  dimgYy: '696969',\n  dodgerXe: '1e90ff',\n  fiYbrick: 'b22222',\n  flSOwEte: 'fffaf0',\n  foYstWAn: '228b22',\n  fuKsia: 'ff00ff',\n  gaRsbSo: 'dcdcdc',\n  ghostwEte: 'f8f8ff',\n  gTd: 'ffd700',\n  gTMnPd: 'daa520',\n  Way: '808080',\n  gYF: '8000',\n  gYFLw: 'adff2f',\n  gYy: '808080',\n  honeyMw: 'f0fff0',\n  hotpRk: 'ff69b4',\n  RdianYd: 'cd5c5c',\n  Rdigo: '4b0082',\n  ivSy: 'fffff0',\n  khaki: 'f0e68c',\n  lavFMr: 'e6e6fa',\n  lavFMrXsh: 'fff0f5',\n  lawngYF: '7cfc00',\n  NmoncEffon: 'fffacd',\n  ZXe: 'add8e6',\n  ZcSO: 'f08080',\n  Zcyan: 'e0ffff',\n  ZgTMnPdLw: 'fafad2',\n  ZWay: 'd3d3d3',\n  ZgYF: '90ee90',\n  ZgYy: 'd3d3d3',\n  ZpRk: 'ffb6c1',\n  ZsOmon: 'ffa07a',\n  ZsHgYF: '20b2aa',\n  ZskyXe: '87cefa',\n  ZUWay: '778899',\n  ZUgYy: '778899',\n  ZstAlXe: 'b0c4de',\n  ZLw: 'ffffe0',\n  lime: 'ff00',\n  limegYF: '32cd32',\n  lRF: 'faf0e6',\n  magFta: 'ff00ff',\n  maPon: '800000',\n  VaquamarRe: '66cdaa',\n  VXe: 'cd',\n  VScEd: 'ba55d3',\n  VpurpN: '9370db',\n  VsHgYF: '3cb371',\n  VUXe: '7b68ee',\n  VsprRggYF: 'fa9a',\n  VQe: '48d1cc',\n  VviTetYd: 'c71585',\n  midnightXe: '191970',\n  mRtcYam: 'f5fffa',\n  mistyPse: 'ffe4e1',\n  moccasR: 'ffe4b5',\n  navajowEte: 'ffdead',\n  navy: '80',\n  Tdlace: 'fdf5e6',\n  Tive: '808000',\n  TivedBb: '6b8e23',\n  Sange: 'ffa500',\n  SangeYd: 'ff4500',\n  ScEd: 'da70d6',\n  pOegTMnPd: 'eee8aa',\n  pOegYF: '98fb98',\n  pOeQe: 'afeeee',\n  pOeviTetYd: 'db7093',\n  papayawEp: 'ffefd5',\n  pHKpuff: 'ffdab9',\n  peru: 'cd853f',\n  pRk: 'ffc0cb',\n  plum: 'dda0dd',\n  powMrXe: 'b0e0e6',\n  purpN: '800080',\n  YbeccapurpN: '663399',\n  Yd: 'ff0000',\n  Psybrown: 'bc8f8f',\n  PyOXe: '4169e1',\n  saddNbPwn: '8b4513',\n  sOmon: 'fa8072',\n  sandybPwn: 'f4a460',\n  sHgYF: '2e8b57',\n  sHshell: 'fff5ee',\n  siFna: 'a0522d',\n  silver: 'c0c0c0',\n  skyXe: '87ceeb',\n  UXe: '6a5acd',\n  UWay: '708090',\n  UgYy: '708090',\n  snow: 'fffafa',\n  sprRggYF: 'ff7f',\n  stAlXe: '4682b4',\n  tan: 'd2b48c',\n  teO: '8080',\n  tEstN: 'd8bfd8',\n  tomato: 'ff6347',\n  Qe: '40e0d0',\n  viTet: 'ee82ee',\n  JHt: 'f5deb3',\n  wEte: 'ffffff',\n  wEtesmoke: 'f5f5f5',\n  Lw: 'ffff00',\n  LwgYF: '9acd32'\n};\nfunction unpack() {\n  const unpacked = {};\n  const keys = Object.keys(names$1);\n  const tkeys = Object.keys(map);\n  let i, j, k, ok, nk;\n  for (i = 0; i < keys.length; i++) {\n    ok = nk = keys[i];\n    for (j = 0; j < tkeys.length; j++) {\n      k = tkeys[j];\n      nk = nk.replace(k, map[k]);\n    }\n    k = parseInt(names$1[ok], 16);\n    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];\n  }\n  return unpacked;\n}\nlet names;\nfunction nameParse(str) {\n  if (!names) {\n    names = unpack();\n    names.transparent = [0, 0, 0, 0];\n  }\n  const a = names[str.toLowerCase()];\n  return a && {\n    r: a[0],\n    g: a[1],\n    b: a[2],\n    a: a.length === 4 ? a[3] : 255\n  };\n}\nconst RGB_RE = /^rgba?\\(\\s*([-+.\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?[\\s,]+([-+.e\\d]+)(%)?(?:[\\s,/]+([-+.e\\d]+)(%)?)?\\s*\\)$/;\nfunction rgbParse(str) {\n  const m = RGB_RE.exec(str);\n  let a = 255;\n  let r, g, b;\n  if (!m) {\n    return;\n  }\n  if (m[7] !== r) {\n    const v = +m[7];\n    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);\n  }\n  r = +m[1];\n  g = +m[3];\n  b = +m[5];\n  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));\n  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));\n  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));\n  return {\n    r: r,\n    g: g,\n    b: b,\n    a: a\n  };\n}\nfunction rgbString(v) {\n  return v && (\n    v.a < 255\n      ? `rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`\n      : `rgb(${v.r}, ${v.g}, ${v.b})`\n  );\n}\nconst to = v => v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;\nconst from = v => v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);\nfunction interpolate(rgb1, rgb2, t) {\n  const r = from(b2n(rgb1.r));\n  const g = from(b2n(rgb1.g));\n  const b = from(b2n(rgb1.b));\n  return {\n    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),\n    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),\n    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),\n    a: rgb1.a + t * (rgb2.a - rgb1.a)\n  };\n}\nfunction modHSL(v, i, ratio) {\n  if (v) {\n    let tmp = rgb2hsl(v);\n    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));\n    tmp = hsl2rgb(tmp);\n    v.r = tmp[0];\n    v.g = tmp[1];\n    v.b = tmp[2];\n  }\n}\nfunction clone(v, proto) {\n  return v ? Object.assign(proto || {}, v) : v;\n}\nfunction fromObject(input) {\n  var v = {r: 0, g: 0, b: 0, a: 255};\n  if (Array.isArray(input)) {\n    if (input.length >= 3) {\n      v = {r: input[0], g: input[1], b: input[2], a: 255};\n      if (input.length > 3) {\n        v.a = n2b(input[3]);\n      }\n    }\n  } else {\n    v = clone(input, {r: 0, g: 0, b: 0, a: 1});\n    v.a = n2b(v.a);\n  }\n  return v;\n}\nfunction functionParse(str) {\n  if (str.charAt(0) === 'r') {\n    return rgbParse(str);\n  }\n  return hueParse(str);\n}\nclass Color {\n  constructor(input) {\n    if (input instanceof Color) {\n      return input;\n    }\n    const type = typeof input;\n    let v;\n    if (type === 'object') {\n      v = fromObject(input);\n    } else if (type === 'string') {\n      v = hexParse(input) || nameParse(input) || functionParse(input);\n    }\n    this._rgb = v;\n    this._valid = !!v;\n  }\n  get valid() {\n    return this._valid;\n  }\n  get rgb() {\n    var v = clone(this._rgb);\n    if (v) {\n      v.a = b2n(v.a);\n    }\n    return v;\n  }\n  set rgb(obj) {\n    this._rgb = fromObject(obj);\n  }\n  rgbString() {\n    return this._valid ? rgbString(this._rgb) : undefined;\n  }\n  hexString() {\n    return this._valid ? hexString(this._rgb) : undefined;\n  }\n  hslString() {\n    return this._valid ? hslString(this._rgb) : undefined;\n  }\n  mix(color, weight) {\n    if (color) {\n      const c1 = this.rgb;\n      const c2 = color.rgb;\n      let w2;\n      const p = weight === w2 ? 0.5 : weight;\n      const w = 2 * p - 1;\n      const a = c1.a - c2.a;\n      const w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n      w2 = 1 - w1;\n      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;\n      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;\n      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;\n      c1.a = p * c1.a + (1 - p) * c2.a;\n      this.rgb = c1;\n    }\n    return this;\n  }\n  interpolate(color, t) {\n    if (color) {\n      this._rgb = interpolate(this._rgb, color._rgb, t);\n    }\n    return this;\n  }\n  clone() {\n    return new Color(this.rgb);\n  }\n  alpha(a) {\n    this._rgb.a = n2b(a);\n    return this;\n  }\n  clearer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 - ratio;\n    return this;\n  }\n  greyscale() {\n    const rgb = this._rgb;\n    const val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);\n    rgb.r = rgb.g = rgb.b = val;\n    return this;\n  }\n  opaquer(ratio) {\n    const rgb = this._rgb;\n    rgb.a *= 1 + ratio;\n    return this;\n  }\n  negate() {\n    const v = this._rgb;\n    v.r = 255 - v.r;\n    v.g = 255 - v.g;\n    v.b = 255 - v.b;\n    return this;\n  }\n  lighten(ratio) {\n    modHSL(this._rgb, 2, ratio);\n    return this;\n  }\n  darken(ratio) {\n    modHSL(this._rgb, 2, -ratio);\n    return this;\n  }\n  saturate(ratio) {\n    modHSL(this._rgb, 1, ratio);\n    return this;\n  }\n  desaturate(ratio) {\n    modHSL(this._rgb, 1, -ratio);\n    return this;\n  }\n  rotate(deg) {\n    rotate(this._rgb, deg);\n    return this;\n  }\n}\nfunction index_esm(input) {\n  return new Color(input);\n}\n\nfunction isPatternOrGradient(value) {\n    if (value && typeof value === 'object') {\n        const type = value.toString();\n        return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n    }\n    return false;\n}\nfunction color(value) {\n    return isPatternOrGradient(value) ? value : index_esm(value);\n}\nfunction getHoverColor(value) {\n    return isPatternOrGradient(value) ? value : index_esm(value).saturate(0.5).darken(0.1).hexString();\n}\n\nconst numbers = [\n    'x',\n    'y',\n    'borderWidth',\n    'radius',\n    'tension'\n];\nconst colors = [\n    'color',\n    'borderColor',\n    'backgroundColor'\n];\nfunction applyAnimationsDefaults(defaults) {\n    defaults.set('animation', {\n        delay: undefined,\n        duration: 1000,\n        easing: 'easeOutQuart',\n        fn: undefined,\n        from: undefined,\n        loop: undefined,\n        to: undefined,\n        type: undefined\n    });\n    defaults.describe('animation', {\n        _fallback: false,\n        _indexable: false,\n        _scriptable: (name)=>name !== 'onProgress' && name !== 'onComplete' && name !== 'fn'\n    });\n    defaults.set('animations', {\n        colors: {\n            type: 'color',\n            properties: colors\n        },\n        numbers: {\n            type: 'number',\n            properties: numbers\n        }\n    });\n    defaults.describe('animations', {\n        _fallback: 'animation'\n    });\n    defaults.set('transitions', {\n        active: {\n            animation: {\n                duration: 400\n            }\n        },\n        resize: {\n            animation: {\n                duration: 0\n            }\n        },\n        show: {\n            animations: {\n                colors: {\n                    from: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    duration: 0\n                }\n            }\n        },\n        hide: {\n            animations: {\n                colors: {\n                    to: 'transparent'\n                },\n                visible: {\n                    type: 'boolean',\n                    easing: 'linear',\n                    fn: (v)=>v | 0\n                }\n            }\n        }\n    });\n}\n\nfunction applyLayoutsDefaults(defaults) {\n    defaults.set('layout', {\n        autoPadding: true,\n        padding: {\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0\n        }\n    });\n}\n\nconst intlCache = new Map();\nfunction getNumberFormat(locale, options) {\n    options = options || {};\n    const cacheKey = locale + JSON.stringify(options);\n    let formatter = intlCache.get(cacheKey);\n    if (!formatter) {\n        formatter = new Intl.NumberFormat(locale, options);\n        intlCache.set(cacheKey, formatter);\n    }\n    return formatter;\n}\nfunction formatNumber(num, locale, options) {\n    return getNumberFormat(locale, options).format(num);\n}\n\nconst formatters = {\n values (value) {\n        return isArray(value) ?  (value) : '' + value;\n    },\n numeric (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const locale = this.chart.options.locale;\n        let notation;\n        let delta = tickValue;\n        if (ticks.length > 1) {\n            const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n            if (maxTick < 1e-4 || maxTick > 1e+15) {\n                notation = 'scientific';\n            }\n            delta = calculateDelta(tickValue, ticks);\n        }\n        const logDelta = log10(Math.abs(delta));\n        const numDecimal = Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n        const options = {\n            notation,\n            minimumFractionDigits: numDecimal,\n            maximumFractionDigits: numDecimal\n        };\n        Object.assign(options, this.options.ticks.format);\n        return formatNumber(tickValue, locale, options);\n    },\n logarithmic (tickValue, index, ticks) {\n        if (tickValue === 0) {\n            return '0';\n        }\n        const remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));\n        if ([\n            1,\n            2,\n            3,\n            5,\n            10,\n            15\n        ].includes(remain) || index > 0.8 * ticks.length) {\n            return formatters.numeric.call(this, tickValue, index, ticks);\n        }\n        return '';\n    }\n};\nfunction calculateDelta(tickValue, ticks) {\n    let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n    if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n        delta = tickValue - Math.floor(tickValue);\n    }\n    return delta;\n}\n var Ticks = {\n    formatters\n};\n\nfunction applyScaleDefaults(defaults) {\n    defaults.set('scale', {\n        display: true,\n        offset: false,\n        reverse: false,\n        beginAtZero: false,\n bounds: 'ticks',\n grace: 0,\n        grid: {\n            display: true,\n            lineWidth: 1,\n            drawOnChartArea: true,\n            drawTicks: true,\n            tickLength: 8,\n            tickWidth: (_ctx, options)=>options.lineWidth,\n            tickColor: (_ctx, options)=>options.color,\n            offset: false\n        },\n        border: {\n            display: true,\n            dash: [],\n            dashOffset: 0.0,\n            width: 1\n        },\n        title: {\n            display: false,\n            text: '',\n            padding: {\n                top: 4,\n                bottom: 4\n            }\n        },\n        ticks: {\n            minRotation: 0,\n            maxRotation: 50,\n            mirror: false,\n            textStrokeWidth: 0,\n            textStrokeColor: '',\n            padding: 3,\n            display: true,\n            autoSkip: true,\n            autoSkipPadding: 3,\n            labelOffset: 0,\n            callback: Ticks.formatters.values,\n            minor: {},\n            major: {},\n            align: 'center',\n            crossAlign: 'near',\n            showLabelBackdrop: false,\n            backdropColor: 'rgba(255, 255, 255, 0.75)',\n            backdropPadding: 2\n        }\n    });\n    defaults.route('scale.ticks', 'color', '', 'color');\n    defaults.route('scale.grid', 'color', '', 'borderColor');\n    defaults.route('scale.border', 'color', '', 'borderColor');\n    defaults.route('scale.title', 'color', '', 'color');\n    defaults.describe('scale', {\n        _fallback: false,\n        _scriptable: (name)=>!name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n        _indexable: (name)=>name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash'\n    });\n    defaults.describe('scales', {\n        _fallback: 'scale'\n    });\n    defaults.describe('scale.ticks', {\n        _scriptable: (name)=>name !== 'backdropPadding' && name !== 'callback',\n        _indexable: (name)=>name !== 'backdropPadding'\n    });\n}\n\nconst overrides = Object.create(null);\nconst descriptors = Object.create(null);\n function getScope$1(node, key) {\n    if (!key) {\n        return node;\n    }\n    const keys = key.split('.');\n    for(let i = 0, n = keys.length; i < n; ++i){\n        const k = keys[i];\n        node = node[k] || (node[k] = Object.create(null));\n    }\n    return node;\n}\nfunction set(root, scope, values) {\n    if (typeof scope === 'string') {\n        return merge(getScope$1(root, scope), values);\n    }\n    return merge(getScope$1(root, ''), scope);\n}\n class Defaults {\n    constructor(_descriptors, _appliers){\n        this.animation = undefined;\n        this.backgroundColor = 'rgba(0,0,0,0.1)';\n        this.borderColor = 'rgba(0,0,0,0.1)';\n        this.color = '#666';\n        this.datasets = {};\n        this.devicePixelRatio = (context)=>context.chart.platform.getDevicePixelRatio();\n        this.elements = {};\n        this.events = [\n            'mousemove',\n            'mouseout',\n            'click',\n            'touchstart',\n            'touchmove'\n        ];\n        this.font = {\n            family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n            size: 12,\n            style: 'normal',\n            lineHeight: 1.2,\n            weight: null\n        };\n        this.hover = {};\n        this.hoverBackgroundColor = (ctx, options)=>getHoverColor(options.backgroundColor);\n        this.hoverBorderColor = (ctx, options)=>getHoverColor(options.borderColor);\n        this.hoverColor = (ctx, options)=>getHoverColor(options.color);\n        this.indexAxis = 'x';\n        this.interaction = {\n            mode: 'nearest',\n            intersect: true,\n            includeInvisible: false\n        };\n        this.maintainAspectRatio = true;\n        this.onHover = null;\n        this.onClick = null;\n        this.parsing = true;\n        this.plugins = {};\n        this.responsive = true;\n        this.scale = undefined;\n        this.scales = {};\n        this.showLine = true;\n        this.drawActiveElementsOnTop = true;\n        this.describe(_descriptors);\n        this.apply(_appliers);\n    }\n set(scope, values) {\n        return set(this, scope, values);\n    }\n get(scope) {\n        return getScope$1(this, scope);\n    }\n describe(scope, values) {\n        return set(descriptors, scope, values);\n    }\n    override(scope, values) {\n        return set(overrides, scope, values);\n    }\n route(scope, name, targetScope, targetName) {\n        const scopeObject = getScope$1(this, scope);\n        const targetScopeObject = getScope$1(this, targetScope);\n        const privateName = '_' + name;\n        Object.defineProperties(scopeObject, {\n            [privateName]: {\n                value: scopeObject[name],\n                writable: true\n            },\n            [name]: {\n                enumerable: true,\n                get () {\n                    const local = this[privateName];\n                    const target = targetScopeObject[targetName];\n                    if (isObject(local)) {\n                        return Object.assign({}, target, local);\n                    }\n                    return valueOrDefault(local, target);\n                },\n                set (value) {\n                    this[privateName] = value;\n                }\n            }\n        });\n    }\n    apply(appliers) {\n        appliers.forEach((apply)=>apply(this));\n    }\n}\nvar defaults = /* #__PURE__ */ new Defaults({\n    _scriptable: (name)=>!name.startsWith('on'),\n    _indexable: (name)=>name !== 'events',\n    hover: {\n        _fallback: 'interaction'\n    },\n    interaction: {\n        _scriptable: false,\n        _indexable: false\n    }\n}, [\n    applyAnimationsDefaults,\n    applyLayoutsDefaults,\n    applyScaleDefaults\n]);\n\nfunction toFontString(font) {\n    if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n        return null;\n    }\n    return (font.style ? font.style + ' ' : '') + (font.weight ? font.weight + ' ' : '') + font.size + 'px ' + font.family;\n}\n function _measureText(ctx, data, gc, longest, string) {\n    let textWidth = data[string];\n    if (!textWidth) {\n        textWidth = data[string] = ctx.measureText(string).width;\n        gc.push(string);\n    }\n    if (textWidth > longest) {\n        longest = textWidth;\n    }\n    return longest;\n}\n function _longestText(ctx, font, arrayOfThings, cache) {\n    cache = cache || {};\n    let data = cache.data = cache.data || {};\n    let gc = cache.garbageCollect = cache.garbageCollect || [];\n    if (cache.font !== font) {\n        data = cache.data = {};\n        gc = cache.garbageCollect = [];\n        cache.font = font;\n    }\n    ctx.save();\n    ctx.font = font;\n    let longest = 0;\n    const ilen = arrayOfThings.length;\n    let i, j, jlen, thing, nestedThing;\n    for(i = 0; i < ilen; i++){\n        thing = arrayOfThings[i];\n        if (thing !== undefined && thing !== null && isArray(thing) !== true) {\n            longest = _measureText(ctx, data, gc, longest, thing);\n        } else if (isArray(thing)) {\n            for(j = 0, jlen = thing.length; j < jlen; j++){\n                nestedThing = thing[j];\n                if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n                    longest = _measureText(ctx, data, gc, longest, nestedThing);\n                }\n            }\n        }\n    }\n    ctx.restore();\n    const gcLen = gc.length / 2;\n    if (gcLen > arrayOfThings.length) {\n        for(i = 0; i < gcLen; i++){\n            delete data[gc[i]];\n        }\n        gc.splice(0, gcLen);\n    }\n    return longest;\n}\n function _alignPixel(chart, pixel, width) {\n    const devicePixelRatio = chart.currentDevicePixelRatio;\n    const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n    return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n function clearCanvas(canvas, ctx) {\n    ctx = ctx || canvas.getContext('2d');\n    ctx.save();\n    ctx.resetTransform();\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.restore();\n}\nfunction drawPoint(ctx, options, x, y) {\n    drawPointLegend(ctx, options, x, y, null);\n}\nfunction drawPointLegend(ctx, options, x, y, w) {\n    let type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n    const style = options.pointStyle;\n    const rotation = options.rotation;\n    const radius = options.radius;\n    let rad = (rotation || 0) * RAD_PER_DEG;\n    if (style && typeof style === 'object') {\n        type = style.toString();\n        if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n            ctx.save();\n            ctx.translate(x, y);\n            ctx.rotate(rad);\n            ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n            ctx.restore();\n            return;\n        }\n    }\n    if (isNaN(radius) || radius <= 0) {\n        return;\n    }\n    ctx.beginPath();\n    switch(style){\n        default:\n            if (w) {\n                ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n            } else {\n                ctx.arc(x, y, radius, 0, TAU);\n            }\n            ctx.closePath();\n            break;\n        case 'triangle':\n            width = w ? w / 2 : radius;\n            ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            rad += TWO_THIRDS_PI;\n            ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n            ctx.closePath();\n            break;\n        case 'rectRounded':\n            cornerRadius = radius * 0.516;\n            size = radius - cornerRadius;\n            xOffset = Math.cos(rad + QUARTER_PI) * size;\n            xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            yOffset = Math.sin(rad + QUARTER_PI) * size;\n            yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n            ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n            ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n            ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n            ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n            ctx.closePath();\n            break;\n        case 'rect':\n            if (!rotation) {\n                size = Math.SQRT1_2 * radius;\n                width = w ? w / 2 : size;\n                ctx.rect(x - width, y - size, 2 * width, 2 * size);\n                break;\n            }\n            rad += QUARTER_PI;\n         case 'rectRot':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            ctx.closePath();\n            break;\n        case 'crossRot':\n            rad += QUARTER_PI;\n         case 'cross':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'star':\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            rad += QUARTER_PI;\n            xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n            xOffset = Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n            ctx.moveTo(x - xOffsetW, y - yOffset);\n            ctx.lineTo(x + xOffsetW, y + yOffset);\n            ctx.moveTo(x + yOffsetW, y - xOffset);\n            ctx.lineTo(x - yOffsetW, y + xOffset);\n            break;\n        case 'line':\n            xOffset = w ? w / 2 : Math.cos(rad) * radius;\n            yOffset = Math.sin(rad) * radius;\n            ctx.moveTo(x - xOffset, y - yOffset);\n            ctx.lineTo(x + xOffset, y + yOffset);\n            break;\n        case 'dash':\n            ctx.moveTo(x, y);\n            ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n            break;\n    }\n    ctx.fill();\n    if (options.borderWidth > 0) {\n        ctx.stroke();\n    }\n}\n function _isPointInArea(point, area, margin) {\n    margin = margin || 0.5;\n    return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;\n}\nfunction clipArea(ctx, area) {\n    ctx.save();\n    ctx.beginPath();\n    ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n    ctx.clip();\n}\nfunction unclipArea(ctx) {\n    ctx.restore();\n}\n function _steppedLineTo(ctx, previous, target, flip, mode) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    if (mode === 'middle') {\n        const midpoint = (previous.x + target.x) / 2.0;\n        ctx.lineTo(midpoint, previous.y);\n        ctx.lineTo(midpoint, target.y);\n    } else if (mode === 'after' !== !!flip) {\n        ctx.lineTo(previous.x, target.y);\n    } else {\n        ctx.lineTo(target.x, previous.y);\n    }\n    ctx.lineTo(target.x, target.y);\n}\n function _bezierCurveTo(ctx, previous, target, flip) {\n    if (!previous) {\n        return ctx.lineTo(target.x, target.y);\n    }\n    ctx.bezierCurveTo(flip ? previous.cp1x : previous.cp2x, flip ? previous.cp1y : previous.cp2y, flip ? target.cp2x : target.cp1x, flip ? target.cp2y : target.cp1y, target.x, target.y);\n}\n function renderText(ctx, text, x, y, font, opts = {}) {\n    const lines = isArray(text) ? text : [\n        text\n    ];\n    const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n    let i, line;\n    ctx.save();\n    ctx.font = font.string;\n    setRenderOpts(ctx, opts);\n    for(i = 0; i < lines.length; ++i){\n        line = lines[i];\n        if (opts.backdrop) {\n            drawBackdrop(ctx, opts.backdrop);\n        }\n        if (stroke) {\n            if (opts.strokeColor) {\n                ctx.strokeStyle = opts.strokeColor;\n            }\n            if (!isNullOrUndef(opts.strokeWidth)) {\n                ctx.lineWidth = opts.strokeWidth;\n            }\n            ctx.strokeText(line, x, y, opts.maxWidth);\n        }\n        ctx.fillText(line, x, y, opts.maxWidth);\n        decorateText(ctx, x, y, line, opts);\n        y += font.lineHeight;\n    }\n    ctx.restore();\n}\nfunction setRenderOpts(ctx, opts) {\n    if (opts.translation) {\n        ctx.translate(opts.translation[0], opts.translation[1]);\n    }\n    if (!isNullOrUndef(opts.rotation)) {\n        ctx.rotate(opts.rotation);\n    }\n    if (opts.color) {\n        ctx.fillStyle = opts.color;\n    }\n    if (opts.textAlign) {\n        ctx.textAlign = opts.textAlign;\n    }\n    if (opts.textBaseline) {\n        ctx.textBaseline = opts.textBaseline;\n    }\n}\nfunction decorateText(ctx, x, y, line, opts) {\n    if (opts.strikethrough || opts.underline) {\n const metrics = ctx.measureText(line);\n        const left = x - metrics.actualBoundingBoxLeft;\n        const right = x + metrics.actualBoundingBoxRight;\n        const top = y - metrics.actualBoundingBoxAscent;\n        const bottom = y + metrics.actualBoundingBoxDescent;\n        const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n        ctx.strokeStyle = ctx.fillStyle;\n        ctx.beginPath();\n        ctx.lineWidth = opts.decorationWidth || 2;\n        ctx.moveTo(left, yDecoration);\n        ctx.lineTo(right, yDecoration);\n        ctx.stroke();\n    }\n}\nfunction drawBackdrop(ctx, opts) {\n    const oldColor = ctx.fillStyle;\n    ctx.fillStyle = opts.color;\n    ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n    ctx.fillStyle = oldColor;\n}\n function addRoundedRectPath(ctx, rect) {\n    const { x , y , w , h , radius  } = rect;\n    ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, -HALF_PI, PI, true);\n    ctx.lineTo(x, y + h - radius.bottomLeft);\n    ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n    ctx.lineTo(x + w - radius.bottomRight, y + h);\n    ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n    ctx.lineTo(x + w, y + radius.topRight);\n    ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n    ctx.lineTo(x + radius.topLeft, y);\n}\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n/**\n * @alias Chart.helpers.options\n * @namespace\n */ /**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */ function toLineHeight(value, size) {\n    const matches = ('' + value).match(LINE_HEIGHT);\n    if (!matches || matches[1] === 'normal') {\n        return size * 1.2;\n    }\n    value = +matches[2];\n    switch(matches[3]){\n        case 'px':\n            return value;\n        case '%':\n            value /= 100;\n            break;\n    }\n    return size * value;\n}\nconst numberOrZero = (v)=>+v || 0;\nfunction _readValueToProps(value, props) {\n    const ret = {};\n    const objProps = isObject(props);\n    const keys = objProps ? Object.keys(props) : props;\n    const read = isObject(value) ? objProps ? (prop)=>valueOrDefault(value[prop], value[props[prop]]) : (prop)=>value[prop] : ()=>value;\n    for (const prop of keys){\n        ret[prop] = numberOrZero(read(prop));\n    }\n    return ret;\n}\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */ function toTRBL(value) {\n    return _readValueToProps(value, {\n        top: 'y',\n        right: 'x',\n        bottom: 'y',\n        left: 'x'\n    });\n}\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */ function toTRBLCorners(value) {\n    return _readValueToProps(value, [\n        'topLeft',\n        'topRight',\n        'bottomLeft',\n        'bottomRight'\n    ]);\n}\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */ function toPadding(value) {\n    const obj = toTRBL(value);\n    obj.width = obj.left + obj.right;\n    obj.height = obj.top + obj.bottom;\n    return obj;\n}\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */ function toFont(options, fallback) {\n    options = options || {};\n    fallback = fallback || defaults.font;\n    let size = valueOrDefault(options.size, fallback.size);\n    if (typeof size === 'string') {\n        size = parseInt(size, 10);\n    }\n    let style = valueOrDefault(options.style, fallback.style);\n    if (style && !('' + style).match(FONT_STYLE)) {\n        console.warn('Invalid font style specified: \"' + style + '\"');\n        style = undefined;\n    }\n    const font = {\n        family: valueOrDefault(options.family, fallback.family),\n        lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n        size,\n        style,\n        weight: valueOrDefault(options.weight, fallback.weight),\n        string: ''\n    };\n    font.string = toFontString(font);\n    return font;\n}\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */ function resolve(inputs, context, index, info) {\n    let cacheable = true;\n    let i, ilen, value;\n    for(i = 0, ilen = inputs.length; i < ilen; ++i){\n        value = inputs[i];\n        if (value === undefined) {\n            continue;\n        }\n        if (context !== undefined && typeof value === 'function') {\n            value = value(context);\n            cacheable = false;\n        }\n        if (index !== undefined && isArray(value)) {\n            value = value[index % value.length];\n            cacheable = false;\n        }\n        if (value !== undefined) {\n            if (info && !cacheable) {\n                info.cacheable = false;\n            }\n            return value;\n        }\n    }\n}\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */ function _addGrace(minmax, grace, beginAtZero) {\n    const { min , max  } = minmax;\n    const change = toDimension(grace, (max - min) / 2);\n    const keepZero = (value, add)=>beginAtZero && value === 0 ? 0 : value + add;\n    return {\n        min: keepZero(min, -Math.abs(change)),\n        max: keepZero(max, change)\n    };\n}\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */ function createContext(parentContext, context) {\n    return Object.assign(Object.create(parentContext), context);\n}\n\nfunction _createResolver(scopes, prefixes = [\n    ''\n], rootScopes = scopes, fallback, getTarget = ()=>scopes[0]) {\n    if (!defined(fallback)) {\n        fallback = _resolve('_fallback', scopes);\n    }\n    const cache = {\n        [Symbol.toStringTag]: 'Object',\n        _cacheable: true,\n        _scopes: scopes,\n        _rootScopes: rootScopes,\n        _fallback: fallback,\n        _getTarget: getTarget,\n        override: (scope)=>_createResolver([\n                scope,\n                ...scopes\n            ], prefixes, rootScopes, fallback)\n    };\n    return new Proxy(cache, {\n deleteProperty (target, prop) {\n            delete target[prop];\n            delete target._keys;\n            delete scopes[0][prop];\n            return true;\n        },\n get (target, prop) {\n            return _cached(target, prop, ()=>_resolveWithPrefixes(prop, prefixes, scopes, target));\n        },\n getOwnPropertyDescriptor (target, prop) {\n            return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n        },\n getPrototypeOf () {\n            return Reflect.getPrototypeOf(scopes[0]);\n        },\n has (target, prop) {\n            return getKeysFromAllScopes(target).includes(prop);\n        },\n ownKeys (target) {\n            return getKeysFromAllScopes(target);\n        },\n set (target, prop, value) {\n            const storage = target._storage || (target._storage = getTarget());\n            target[prop] = storage[prop] = value;\n            delete target._keys;\n            return true;\n        }\n    });\n}\n function _attachContext(proxy, context, subProxy, descriptorDefaults) {\n    const cache = {\n        _cacheable: false,\n        _proxy: proxy,\n        _context: context,\n        _subProxy: subProxy,\n        _stack: new Set(),\n        _descriptors: _descriptors(proxy, descriptorDefaults),\n        setContext: (ctx)=>_attachContext(proxy, ctx, subProxy, descriptorDefaults),\n        override: (scope)=>_attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n    };\n    return new Proxy(cache, {\n deleteProperty (target, prop) {\n            delete target[prop];\n            delete proxy[prop];\n            return true;\n        },\n get (target, prop, receiver) {\n            return _cached(target, prop, ()=>_resolveWithContext(target, prop, receiver));\n        },\n getOwnPropertyDescriptor (target, prop) {\n            return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {\n                enumerable: true,\n                configurable: true\n            } : undefined : Reflect.getOwnPropertyDescriptor(proxy, prop);\n        },\n getPrototypeOf () {\n            return Reflect.getPrototypeOf(proxy);\n        },\n has (target, prop) {\n            return Reflect.has(proxy, prop);\n        },\n ownKeys () {\n            return Reflect.ownKeys(proxy);\n        },\n set (target, prop, value) {\n            proxy[prop] = value;\n            delete target[prop];\n            return true;\n        }\n    });\n}\n function _descriptors(proxy, defaults = {\n    scriptable: true,\n    indexable: true\n}) {\n    const { _scriptable =defaults.scriptable , _indexable =defaults.indexable , _allKeys =defaults.allKeys  } = proxy;\n    return {\n        allKeys: _allKeys,\n        scriptable: _scriptable,\n        indexable: _indexable,\n        isScriptable: isFunction(_scriptable) ? _scriptable : ()=>_scriptable,\n        isIndexable: isFunction(_indexable) ? _indexable : ()=>_indexable\n    };\n}\nconst readKey = (prefix, name)=>prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop, value)=>isObject(value) && prop !== 'adapters' && (Object.getPrototypeOf(value) === null || value.constructor === Object);\nfunction _cached(target, prop, resolve) {\n    if (Object.prototype.hasOwnProperty.call(target, prop)) {\n        return target[prop];\n    }\n    const value = resolve();\n    target[prop] = value;\n    return value;\n}\nfunction _resolveWithContext(target, prop, receiver) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    let value = _proxy[prop];\n    if (isFunction(value) && descriptors.isScriptable(prop)) {\n        value = _resolveScriptable(prop, value, target, receiver);\n    }\n    if (isArray(value) && value.length) {\n        value = _resolveArray(prop, value, target, descriptors.isIndexable);\n    }\n    if (needsSubResolver(prop, value)) {\n        value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n    }\n    return value;\n}\nfunction _resolveScriptable(prop, value, target, receiver) {\n    const { _proxy , _context , _subProxy , _stack  } = target;\n    if (_stack.has(prop)) {\n        throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n    }\n    _stack.add(prop);\n    value = value(_context, _subProxy || receiver);\n    _stack.delete(prop);\n    if (needsSubResolver(prop, value)) {\n        value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n    }\n    return value;\n}\nfunction _resolveArray(prop, value, target, isIndexable) {\n    const { _proxy , _context , _subProxy , _descriptors: descriptors  } = target;\n    if (defined(_context.index) && isIndexable(prop)) {\n        value = value[_context.index % value.length];\n    } else if (isObject(value[0])) {\n        const arr = value;\n        const scopes = _proxy._scopes.filter((s)=>s !== arr);\n        value = [];\n        for (const item of arr){\n            const resolver = createSubResolver(scopes, _proxy, prop, item);\n            value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n        }\n    }\n    return value;\n}\nfunction resolveFallback(fallback, prop, value) {\n    return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\nconst getScope = (key, parent)=>key === true ? parent : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n    for (const parent of parentScopes){\n        const scope = getScope(key, parent);\n        if (scope) {\n            set.add(scope);\n            const fallback = resolveFallback(scope._fallback, key, value);\n            if (defined(fallback) && fallback !== key && fallback !== parentFallback) {\n                return fallback;\n            }\n        } else if (scope === false && defined(parentFallback) && key !== parentFallback) {\n            return null;\n        }\n    }\n    return false;\n}\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n    const rootScopes = resolver._rootScopes;\n    const fallback = resolveFallback(resolver._fallback, prop, value);\n    const allScopes = [\n        ...parentScopes,\n        ...rootScopes\n    ];\n    const set = new Set();\n    set.add(value);\n    let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n    if (key === null) {\n        return false;\n    }\n    if (defined(fallback) && fallback !== prop) {\n        key = addScopesFromKey(set, allScopes, fallback, key, value);\n        if (key === null) {\n            return false;\n        }\n    }\n    return _createResolver(Array.from(set), [\n        ''\n    ], rootScopes, fallback, ()=>subGetTarget(resolver, prop, value));\n}\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n    while(key){\n        key = addScopes(set, allScopes, key, fallback, item);\n    }\n    return key;\n}\nfunction subGetTarget(resolver, prop, value) {\n    const parent = resolver._getTarget();\n    if (!(prop in parent)) {\n        parent[prop] = {};\n    }\n    const target = parent[prop];\n    if (isArray(target) && isObject(value)) {\n        return value;\n    }\n    return target || {};\n}\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n    let value;\n    for (const prefix of prefixes){\n        value = _resolve(readKey(prefix, prop), scopes);\n        if (defined(value)) {\n            return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;\n        }\n    }\n}\nfunction _resolve(key, scopes) {\n    for (const scope of scopes){\n        if (!scope) {\n            continue;\n        }\n        const value = scope[key];\n        if (defined(value)) {\n            return value;\n        }\n    }\n}\nfunction getKeysFromAllScopes(target) {\n    let keys = target._keys;\n    if (!keys) {\n        keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n    }\n    return keys;\n}\nfunction resolveKeysFromAllScopes(scopes) {\n    const set = new Set();\n    for (const scope of scopes){\n        for (const key of Object.keys(scope).filter((k)=>!k.startsWith('_'))){\n            set.add(key);\n        }\n    }\n    return Array.from(set);\n}\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\n    const { iScale  } = meta;\n    const { key ='r'  } = this._parsing;\n    const parsed = new Array(count);\n    let i, ilen, index, item;\n    for(i = 0, ilen = count; i < ilen; ++i){\n        index = i + start;\n        item = data[index];\n        parsed[i] = {\n            r: iScale.parse(resolveObjectKey(item, key), index)\n        };\n    }\n    return parsed;\n}\n\nconst EPSILON = Number.EPSILON || 1e-14;\nconst getPoint = (points, i)=>i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis)=>indexAxis === 'x' ? 'y' : 'x';\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\n    // Props to Rob Spencer at scaled innovation for his post on splining between points\n    // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n    // This function must also respect \"skipped\" points\n    const previous = firstPoint.skip ? middlePoint : firstPoint;\n    const current = middlePoint;\n    const next = afterPoint.skip ? middlePoint : afterPoint;\n    const d01 = distanceBetweenPoints(current, previous);\n    const d12 = distanceBetweenPoints(next, current);\n    let s01 = d01 / (d01 + d12);\n    let s12 = d12 / (d01 + d12);\n    // If all points are the same, s01 & s02 will be inf\n    s01 = isNaN(s01) ? 0 : s01;\n    s12 = isNaN(s12) ? 0 : s12;\n    const fa = t * s01; // scaling factor for triangle Ta\n    const fb = t * s12;\n    return {\n        previous: {\n            x: current.x - fa * (next.x - previous.x),\n            y: current.y - fa * (next.y - previous.y)\n        },\n        next: {\n            x: current.x + fb * (next.x - previous.x),\n            y: current.y + fb * (next.y - previous.y)\n        }\n    };\n}\n/**\n * Adjust tangents to ensure monotonic properties\n */ function monotoneAdjust(points, deltaK, mK) {\n    const pointsLen = points.length;\n    let alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen - 1; ++i){\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent || !pointAfter) {\n            continue;\n        }\n        if (almostEquals(deltaK[i], 0, EPSILON)) {\n            mK[i] = mK[i + 1] = 0;\n            continue;\n        }\n        alphaK = mK[i] / deltaK[i];\n        betaK = mK[i + 1] / deltaK[i];\n        squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n        if (squaredMagnitude <= 9) {\n            continue;\n        }\n        tauK = 3 / Math.sqrt(squaredMagnitude);\n        mK[i] = alphaK * tauK * deltaK[i];\n        mK[i + 1] = betaK * tauK * deltaK[i];\n    }\n}\nfunction monotoneCompute(points, mK, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    let delta, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(let i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        const iPixel = pointCurrent[indexAxis];\n        const vPixel = pointCurrent[valueAxis];\n        if (pointBefore) {\n            delta = (iPixel - pointBefore[indexAxis]) / 3;\n            pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n            pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n        }\n        if (pointAfter) {\n            delta = (pointAfter[indexAxis] - iPixel) / 3;\n            pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n            pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n        }\n    }\n}\n/**\n * This function calculates Bzier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */ function splineCurveMonotone(points, indexAxis = 'x') {\n    const valueAxis = getValueAxis(indexAxis);\n    const pointsLen = points.length;\n    const deltaK = Array(pointsLen).fill(0);\n    const mK = Array(pointsLen);\n    // Calculate slopes (deltaK) and initialize tangents (mK)\n    let i, pointBefore, pointCurrent;\n    let pointAfter = getPoint(points, 0);\n    for(i = 0; i < pointsLen; ++i){\n        pointBefore = pointCurrent;\n        pointCurrent = pointAfter;\n        pointAfter = getPoint(points, i + 1);\n        if (!pointCurrent) {\n            continue;\n        }\n        if (pointAfter) {\n            const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n            // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n            deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n        }\n        mK[i] = !pointBefore ? deltaK[i] : !pointAfter ? deltaK[i - 1] : sign(deltaK[i - 1]) !== sign(deltaK[i]) ? 0 : (deltaK[i - 1] + deltaK[i]) / 2;\n    }\n    monotoneAdjust(points, deltaK, mK);\n    monotoneCompute(points, mK, indexAxis);\n}\nfunction capControlPoint(pt, min, max) {\n    return Math.max(Math.min(pt, max), min);\n}\nfunction capBezierPoints(points, area) {\n    let i, ilen, point, inArea, inAreaPrev;\n    let inAreaNext = _isPointInArea(points[0], area);\n    for(i = 0, ilen = points.length; i < ilen; ++i){\n        inAreaPrev = inArea;\n        inArea = inAreaNext;\n        inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n        if (!inArea) {\n            continue;\n        }\n        point = points[i];\n        if (inAreaPrev) {\n            point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n            point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n        }\n        if (inAreaNext) {\n            point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n            point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n        }\n    }\n}\n/**\n * @private\n */ function _updateBezierControlPoints(points, options, area, loop, indexAxis) {\n    let i, ilen, point, controlPoints;\n    // Only consider points that are drawn in case the spanGaps option is used\n    if (options.spanGaps) {\n        points = points.filter((pt)=>!pt.skip);\n    }\n    if (options.cubicInterpolationMode === 'monotone') {\n        splineCurveMonotone(points, indexAxis);\n    } else {\n        let prev = loop ? points[points.length - 1] : points[0];\n        for(i = 0, ilen = points.length; i < ilen; ++i){\n            point = points[i];\n            controlPoints = splineCurve(prev, point, points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen], options.tension);\n            point.cp1x = controlPoints.previous.x;\n            point.cp1y = controlPoints.previous.y;\n            point.cp2x = controlPoints.next.x;\n            point.cp2y = controlPoints.next.y;\n            prev = point;\n        }\n    }\n    if (options.capBezierPoints) {\n        capBezierPoints(points, area);\n    }\n}\n\n/**\n * Note: typedefs are auto-exported, so use a made-up `dom` namespace where\n * necessary to avoid duplicates with `export * from './helpers`; see\n * https://github.com/microsoft/TypeScript/issues/46011\n * @typedef { import(\"../core/core.controller\").default } dom.Chart\n * @typedef { import('../../types').ChartEvent } ChartEvent\n */ /**\n * @private\n */ function _isDomSupported() {\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n/**\n * @private\n */ function _getParentNode(domNode) {\n    let parent = domNode.parentNode;\n    if (parent && parent.toString() === '[object ShadowRoot]') {\n        parent = parent.host;\n    }\n    return parent;\n}\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */ function parseMaxStyle(styleValue, node, parentProperty) {\n    let valueInPixels;\n    if (typeof styleValue === 'string') {\n        valueInPixels = parseInt(styleValue, 10);\n        if (styleValue.indexOf('%') !== -1) {\n            // percentage * size in dimension\n            valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n        }\n    } else {\n        valueInPixels = styleValue;\n    }\n    return valueInPixels;\n}\nconst getComputedStyle = (element)=>element.ownerDocument.defaultView.getComputedStyle(element, null);\nfunction getStyle(el, property) {\n    return getComputedStyle(el).getPropertyValue(property);\n}\nconst positions = [\n    'top',\n    'right',\n    'bottom',\n    'left'\n];\nfunction getPositionedStyle(styles, style, suffix) {\n    const result = {};\n    suffix = suffix ? '-' + suffix : '';\n    for(let i = 0; i < 4; i++){\n        const pos = positions[i];\n        result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n    }\n    result.width = result.left + result.right;\n    result.height = result.top + result.bottom;\n    return result;\n}\nconst useOffsetPos = (x, y, target)=>(x > 0 || y > 0) && (!target || !target.shadowRoot);\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */ function getCanvasPosition(e, canvas) {\n    const touches = e.touches;\n    const source = touches && touches.length ? touches[0] : e;\n    const { offsetX , offsetY  } = source;\n    let box = false;\n    let x, y;\n    if (useOffsetPos(offsetX, offsetY, e.target)) {\n        x = offsetX;\n        y = offsetY;\n    } else {\n        const rect = canvas.getBoundingClientRect();\n        x = source.clientX - rect.left;\n        y = source.clientY - rect.top;\n        box = true;\n    }\n    return {\n        x,\n        y,\n        box\n    };\n}\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */ function getRelativePosition(event, chart) {\n    if ('native' in event) {\n        return event;\n    }\n    const { canvas , currentDevicePixelRatio  } = chart;\n    const style = getComputedStyle(canvas);\n    const borderBox = style.boxSizing === 'border-box';\n    const paddings = getPositionedStyle(style, 'padding');\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const { x , y , box  } = getCanvasPosition(event, canvas);\n    const xOffset = paddings.left + (box && borders.left);\n    const yOffset = paddings.top + (box && borders.top);\n    let { width , height  } = chart;\n    if (borderBox) {\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    return {\n        x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n        y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n    };\n}\nfunction getContainerSize(canvas, width, height) {\n    let maxWidth, maxHeight;\n    if (width === undefined || height === undefined) {\n        const container = _getParentNode(canvas);\n        if (!container) {\n            width = canvas.clientWidth;\n            height = canvas.clientHeight;\n        } else {\n            const rect = container.getBoundingClientRect(); // this is the border box of the container\n            const containerStyle = getComputedStyle(container);\n            const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n            const containerPadding = getPositionedStyle(containerStyle, 'padding');\n            width = rect.width - containerPadding.width - containerBorder.width;\n            height = rect.height - containerPadding.height - containerBorder.height;\n            maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n            maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n        }\n    }\n    return {\n        width,\n        height,\n        maxWidth: maxWidth || INFINITY,\n        maxHeight: maxHeight || INFINITY\n    };\n}\nconst round1 = (v)=>Math.round(v * 10) / 10;\n// eslint-disable-next-line complexity\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\n    const style = getComputedStyle(canvas);\n    const margins = getPositionedStyle(style, 'margin');\n    const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n    const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n    const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n    let { width , height  } = containerSize;\n    if (style.boxSizing === 'content-box') {\n        const borders = getPositionedStyle(style, 'border', 'width');\n        const paddings = getPositionedStyle(style, 'padding');\n        width -= paddings.width + borders.width;\n        height -= paddings.height + borders.height;\n    }\n    width = Math.max(0, width - margins.width);\n    height = Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height - margins.height);\n    width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n    height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n    if (width && !height) {\n        // https://github.com/chartjs/Chart.js/issues/4659\n        // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n        height = round1(width / 2);\n    }\n    const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n    if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n        height = containerSize.height;\n        width = round1(Math.floor(height * aspectRatio));\n    }\n    return {\n        width,\n        height\n    };\n}\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */ function retinaScale(chart, forceRatio, forceStyle) {\n    const pixelRatio = forceRatio || 1;\n    const deviceHeight = Math.floor(chart.height * pixelRatio);\n    const deviceWidth = Math.floor(chart.width * pixelRatio);\n    chart.height = deviceHeight / pixelRatio;\n    chart.width = deviceWidth / pixelRatio;\n    const canvas = chart.canvas;\n    // If no style has been set on the canvas, the render size is used as display size,\n    // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n    // See https://github.com/chartjs/Chart.js/issues/3575\n    if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {\n        canvas.style.height = `${chart.height}px`;\n        canvas.style.width = `${chart.width}px`;\n    }\n    if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {\n        chart.currentDevicePixelRatio = pixelRatio;\n        canvas.height = deviceHeight;\n        canvas.width = deviceWidth;\n        chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n        return true;\n    }\n    return false;\n}\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */ const supportsEventListenerOptions = function() {\n    let passiveSupported = false;\n    try {\n        const options = {\n            get passive () {\n                passiveSupported = true;\n                return false;\n            }\n        };\n        window.addEventListener('test', null, options);\n        window.removeEventListener('test', null, options);\n    } catch (e) {\n    // continue regardless of error\n    }\n    return passiveSupported;\n}();\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */ function readUsedSize(element, property) {\n    const value = getStyle(element, property);\n    const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n    return matches ? +matches[1] : undefined;\n}\n\n/**\n * @private\n */ function _pointInLine(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: p1.y + t * (p2.y - p1.y)\n    };\n}\n/**\n * @private\n */ function _steppedInterpolation(p1, p2, t, mode) {\n    return {\n        x: p1.x + t * (p2.x - p1.x),\n        y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y : mode === 'after' ? t < 1 ? p1.y : p2.y : t > 0 ? p2.y : p1.y\n    };\n}\n/**\n * @private\n */ function _bezierInterpolation(p1, p2, t, mode) {\n    const cp1 = {\n        x: p1.cp2x,\n        y: p1.cp2y\n    };\n    const cp2 = {\n        x: p2.cp1x,\n        y: p2.cp1y\n    };\n    const a = _pointInLine(p1, cp1, t);\n    const b = _pointInLine(cp1, cp2, t);\n    const c = _pointInLine(cp2, p2, t);\n    const d = _pointInLine(a, b, t);\n    const e = _pointInLine(b, c, t);\n    return _pointInLine(d, e, t);\n}\n\nconst getRightToLeftAdapter = function(rectX, width) {\n    return {\n        x (x) {\n            return rectX + rectX + width - x;\n        },\n        setWidth (w) {\n            width = w;\n        },\n        textAlign (align) {\n            if (align === 'center') {\n                return align;\n            }\n            return align === 'right' ? 'left' : 'right';\n        },\n        xPlus (x, value) {\n            return x - value;\n        },\n        leftForLtr (x, itemWidth) {\n            return x - itemWidth;\n        }\n    };\n};\nconst getLeftToRightAdapter = function() {\n    return {\n        x (x) {\n            return x;\n        },\n        setWidth (w) {},\n        textAlign (align) {\n            return align;\n        },\n        xPlus (x, value) {\n            return x + value;\n        },\n        leftForLtr (x, _itemWidth) {\n            return x;\n        }\n    };\n};\nfunction getRtlAdapter(rtl, rectX, width) {\n    return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\nfunction overrideTextDirection(ctx, direction) {\n    let style, original;\n    if (direction === 'ltr' || direction === 'rtl') {\n        style = ctx.canvas.style;\n        original = [\n            style.getPropertyValue('direction'),\n            style.getPropertyPriority('direction'), \n        ];\n        style.setProperty('direction', direction, 'important');\n        ctx.prevTextDirection = original;\n    }\n}\nfunction restoreTextDirection(ctx, original) {\n    if (original !== undefined) {\n        delete ctx.prevTextDirection;\n        ctx.canvas.style.setProperty('direction', original[0], original[1]);\n    }\n}\n\nfunction propertyFn(property) {\n    if (property === 'angle') {\n        return {\n            between: _angleBetween,\n            compare: _angleDiff,\n            normalize: _normalizeAngle\n        };\n    }\n    return {\n        between: _isBetween,\n        compare: (a, b)=>a - b,\n        normalize: (x)=>x\n    };\n}\nfunction normalizeSegment({ start , end , count , loop , style  }) {\n    return {\n        start: start % count,\n        end: end % count,\n        loop: loop && (end - start + 1) % count === 0,\n        style\n    };\n}\nfunction getSegment(segment, points, bounds) {\n    const { property , start: startBound , end: endBound  } = bounds;\n    const { between , normalize  } = propertyFn(property);\n    const count = points.length;\n    let { start , end , loop  } = segment;\n    let i, ilen;\n    if (loop) {\n        start += count;\n        end += count;\n        for(i = 0, ilen = count; i < ilen; ++i){\n            if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n                break;\n            }\n            start--;\n            end--;\n        }\n        start %= count;\n        end %= count;\n    }\n    if (end < start) {\n        end += count;\n    }\n    return {\n        start,\n        end,\n        loop,\n        style: segment.style\n    };\n}\n function _boundSegment(segment, points, bounds) {\n    if (!bounds) {\n        return [\n            segment\n        ];\n    }\n    const { property , start: startBound , end: endBound  } = bounds;\n    const count = points.length;\n    const { compare , between , normalize  } = propertyFn(property);\n    const { start , end , loop , style  } = getSegment(segment, points, bounds);\n    const result = [];\n    let inside = false;\n    let subStart = null;\n    let value, point, prevValue;\n    const startIsBefore = ()=>between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n    const endIsBefore = ()=>compare(endBound, value) === 0 || between(endBound, prevValue, value);\n    const shouldStart = ()=>inside || startIsBefore();\n    const shouldStop = ()=>!inside || endIsBefore();\n    for(let i = start, prev = start; i <= end; ++i){\n        point = points[i % count];\n        if (point.skip) {\n            continue;\n        }\n        value = normalize(point[property]);\n        if (value === prevValue) {\n            continue;\n        }\n        inside = between(value, startBound, endBound);\n        if (subStart === null && shouldStart()) {\n            subStart = compare(value, startBound) === 0 ? i : prev;\n        }\n        if (subStart !== null && shouldStop()) {\n            result.push(normalizeSegment({\n                start: subStart,\n                end: i,\n                loop,\n                count,\n                style\n            }));\n            subStart = null;\n        }\n        prev = i;\n        prevValue = value;\n    }\n    if (subStart !== null) {\n        result.push(normalizeSegment({\n            start: subStart,\n            end,\n            loop,\n            count,\n            style\n        }));\n    }\n    return result;\n}\n function _boundSegments(line, bounds) {\n    const result = [];\n    const segments = line.segments;\n    for(let i = 0; i < segments.length; i++){\n        const sub = _boundSegment(segments[i], line.points, bounds);\n        if (sub.length) {\n            result.push(...sub);\n        }\n    }\n    return result;\n}\n function findStartAndEnd(points, count, loop, spanGaps) {\n    let start = 0;\n    let end = count - 1;\n    if (loop && !spanGaps) {\n        while(start < count && !points[start].skip){\n            start++;\n        }\n    }\n    while(start < count && points[start].skip){\n        start++;\n    }\n    start %= count;\n    if (loop) {\n        end += start;\n    }\n    while(end > start && points[end % count].skip){\n        end--;\n    }\n    end %= count;\n    return {\n        start,\n        end\n    };\n}\n function solidSegments(points, start, max, loop) {\n    const count = points.length;\n    const result = [];\n    let last = start;\n    let prev = points[start];\n    let end;\n    for(end = start + 1; end <= max; ++end){\n        const cur = points[end % count];\n        if (cur.skip || cur.stop) {\n            if (!prev.skip) {\n                loop = false;\n                result.push({\n                    start: start % count,\n                    end: (end - 1) % count,\n                    loop\n                });\n                start = last = cur.stop ? end : null;\n            }\n        } else {\n            last = end;\n            if (prev.skip) {\n                start = end;\n            }\n        }\n        prev = cur;\n    }\n    if (last !== null) {\n        result.push({\n            start: start % count,\n            end: last % count,\n            loop\n        });\n    }\n    return result;\n}\n function _computeSegments(line, segmentOptions) {\n    const points = line.points;\n    const spanGaps = line.options.spanGaps;\n    const count = points.length;\n    if (!count) {\n        return [];\n    }\n    const loop = !!line._loop;\n    const { start , end  } = findStartAndEnd(points, count, loop, spanGaps);\n    if (spanGaps === true) {\n        return splitByStyles(line, [\n            {\n                start,\n                end,\n                loop\n            }\n        ], points, segmentOptions);\n    }\n    const max = end < start ? end + count : end;\n    const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n    return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n function splitByStyles(line, segments, points, segmentOptions) {\n    if (!segmentOptions || !segmentOptions.setContext || !points) {\n        return segments;\n    }\n    return doSplitByStyles(line, segments, points, segmentOptions);\n}\n function doSplitByStyles(line, segments, points, segmentOptions) {\n    const chartContext = line._chart.getContext();\n    const baseStyle = readStyle(line.options);\n    const { _datasetIndex: datasetIndex , options: { spanGaps  }  } = line;\n    const count = points.length;\n    const result = [];\n    let prevStyle = baseStyle;\n    let start = segments[0].start;\n    let i = start;\n    function addStyle(s, e, l, st) {\n        const dir = spanGaps ? -1 : 1;\n        if (s === e) {\n            return;\n        }\n        s += count;\n        while(points[s % count].skip){\n            s -= dir;\n        }\n        while(points[e % count].skip){\n            e += dir;\n        }\n        if (s % count !== e % count) {\n            result.push({\n                start: s % count,\n                end: e % count,\n                loop: l,\n                style: st\n            });\n            prevStyle = st;\n            start = e % count;\n        }\n    }\n    for (const segment of segments){\n        start = spanGaps ? start : segment.start;\n        let prev = points[start % count];\n        let style;\n        for(i = start + 1; i <= segment.end; i++){\n            const pt = points[i % count];\n            style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n                type: 'segment',\n                p0: prev,\n                p1: pt,\n                p0DataIndex: (i - 1) % count,\n                p1DataIndex: i % count,\n                datasetIndex\n            })));\n            if (styleChanged(style, prevStyle)) {\n                addStyle(start, i - 1, segment.loop, prevStyle);\n            }\n            prev = pt;\n            prevStyle = style;\n        }\n        if (start < i - 1) {\n            addStyle(start, i - 1, segment.loop, prevStyle);\n        }\n    }\n    return result;\n}\nfunction readStyle(options) {\n    return {\n        backgroundColor: options.backgroundColor,\n        borderCapStyle: options.borderCapStyle,\n        borderDash: options.borderDash,\n        borderDashOffset: options.borderDashOffset,\n        borderJoinStyle: options.borderJoinStyle,\n        borderWidth: options.borderWidth,\n        borderColor: options.borderColor\n    };\n}\nfunction styleChanged(style, prevStyle) {\n    return prevStyle && JSON.stringify(style) !== JSON.stringify(prevStyle);\n}\n\nexport { unclipArea as $, _rlookupByKey as A, _lookupByKey as B, _isPointInArea as C, getAngleFromPoint as D, toPadding as E, each as F, getMaximumSize as G, HALF_PI as H, _getParentNode as I, readUsedSize as J, supportsEventListenerOptions as K, throttled as L, _isDomSupported as M, _factorize as N, finiteOrDefault as O, PI as P, callback as Q, _addGrace as R, _limitValue as S, TAU as T, toDegrees as U, _measureText as V, _int16Range as W, _alignPixel as X, clipArea as Y, renderText as Z, _arrayUnique as _, resolve as a, fontString as a$, toFont as a0, _toLeftRightCenter as a1, _alignStartEnd as a2, overrides as a3, merge as a4, _capitalize as a5, descriptors as a6, isFunction as a7, _attachContext as a8, _createResolver as a9, overrideTextDirection as aA, _textX as aB, restoreTextDirection as aC, drawPointLegend as aD, distanceBetweenPoints as aE, noop as aF, _setMinAndMaxByKey as aG, niceNum as aH, almostWhole as aI, almostEquals as aJ, _decimalPlaces as aK, Ticks as aL, log10 as aM, _longestText as aN, _filterBetween as aO, _lookup as aP, isPatternOrGradient as aQ, getHoverColor as aR, clone$1 as aS, _merger as aT, _mergerIf as aU, _deprecated as aV, _splitKey as aW, toFontString as aX, splineCurve as aY, splineCurveMonotone as aZ, getStyle as a_, _descriptors as aa, mergeIf as ab, uid as ac, debounce as ad, retinaScale as ae, clearCanvas as af, setsEqual as ag, _elementsEqual as ah, _isClickEvent as ai, _isBetween as aj, _readValueToProps as ak, _updateBezierControlPoints as al, _computeSegments as am, _boundSegments as an, _steppedInterpolation as ao, _bezierInterpolation as ap, _pointInLine as aq, _steppedLineTo as ar, _bezierCurveTo as as, drawPoint as at, addRoundedRectPath as au, toTRBL as av, toTRBLCorners as aw, _boundSegment as ax, _normalizeAngle as ay, getRtlAdapter as az, isArray as b, toLineHeight as b0, PITAU as b1, INFINITY as b2, RAD_PER_DEG as b3, QUARTER_PI as b4, TWO_THIRDS_PI as b5, _angleDiff as b6, color as c, defaults as d, effects$1 as e, resolveObjectKey as f, isNumberFinite as g, defined as h, isObject as i, createContext as j, isNullOrUndef as k, listenArrayEvents as l, toPercentage as m, toDimension as n, formatNumber as o, _angleBetween as p, _getStartAndCountOfVisiblePoints as q, requestAnimFrame as r, sign as s, toRadians as t, unlistenArrayEvents as u, valueOrDefault as v, _scaleRangesChanged as w, isNumber as x, _parseObjectDataRadialScale as y, getRelativePosition as z };\n//# sourceMappingURL=helpers.segment.js.map\n","/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.2, Wed Apr 27 2022\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nconst _global = typeof globalThis !== 'undefined' ? globalThis :\n    typeof self !== 'undefined' ? self :\n        typeof window !== 'undefined' ? window :\n            global;\n\nconst keys = Object.keys;\nconst isArray = Array.isArray;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nconst getProto = Object.getPrototypeOf;\nconst _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(key => {\n        setProp(proto, key, extension[key]);\n    });\n}\nconst defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    const pd = getOwnPropertyDescriptor(obj, prop);\n    let proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nconst _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap$1(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\nfunction arrayToObject(array, extractor) {\n    return array.reduce((result, item, i) => {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj || !hasOwn(obj, currentKeyPath))\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nconst concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nconst intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(num => [\"Int\", \"Uint\", \"Float\"].map(t => t + num + \"Array\")))).filter(t => _global[t]);\nconst intrinsicTypes = intrinsicTypeNames.map(t => _global[t]);\narrayToObject(intrinsicTypeNames, x => [x, true]);\nlet circularRefs = null;\nfunction deepClone(any) {\n    circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n    const rv = innerDeepClone(any);\n    circularRefs = null;\n    return rv;\n}\nfunction innerDeepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    let rv = circularRefs && circularRefs.get(any);\n    if (rv)\n        return rv;\n    if (isArray(any)) {\n        rv = [];\n        circularRefs && circularRefs.set(any, rv);\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(innerDeepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        const proto = getProto(any);\n        rv = proto === Object.prototype ? {} : Object.create(proto);\n        circularRefs && circularRefs.set(any, rv);\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = innerDeepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nconst { toString } = {};\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nconst iteratorSymbol = typeof Symbol !== 'undefined' ?\n    Symbol.iterator :\n    '@@iterator';\nconst getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nconst NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while ((x = it.next()), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nconst isAsyncFunction = typeof Symbol !== 'undefined'\n    ? (fn) => fn[Symbol.toStringTag] === 'AsyncFunction'\n    : () => false;\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = () => true;\nconst NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            getErrorWithStack.arguments;\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(frame => \"\\n\" + frame)\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\",\n    MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(key => failures[key].toString())\n        .filter((v, i, s) => s.indexOf(v) === i)\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = Object.keys(failures).map(pos => failures[pos]);\n    this.failuresByPos = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce((obj, name) => (obj[name] = name + \"Error\", obj), {});\nconst BaseException = DexieError;\nvar exceptions = errorList.reduce((obj, name) => {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = `${msgOrInner}${!inner ? '' : '\\n ' + inner}`;\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = `${msgOrInner.name} ${msgOrInner.message}`;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce((obj, name) => {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce((obj, name) => {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nconst LONG_STACKS_CLIP_LIMIT = 100,\nMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, [resolvedNativePromise, nativePromiseProto, resolvedGlobalPromise] = typeof Promise === 'undefined' ?\n    [] :\n    (() => {\n        let globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, getProto(globalP), globalP];\n        const nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            getProto(nativeP),\n            globalP\n        ];\n    })(), nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nconst NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nconst patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    () => { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                () => {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(() => {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                () => { setTimeout(physicalTick, 0); };\nvar asap = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true,\nneedsNewPhysicalTick = true,\nunhandledErrors = [],\nrejectingErrors = [],\ncurrentFulfiller = null, rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(uh => {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nconst thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            const cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise((resolve, reject) => {\n                propagateToListener(this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, err =>\n        err instanceof type ? handler(err) : PromiseReject(err))\n            : this.then(null, err =>\n            err && err.name === type ? handler(err) : PromiseReject(err));\n    },\n    finally: function (onFinally) {\n        return this.then(value => {\n            onFinally();\n            return value;\n        }, err => {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        return ms < Infinity ?\n            new DexiePromise((resolve, reject) => {\n                var handle = setTimeout(() => reject(new exceptions.Timeout(msg)), ms);\n                this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach((a, i) => DexiePromise.resolve(a).then(x => {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject));\n        });\n    },\n    resolve: value => {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise((resolve, reject) => {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise((resolve, reject) => {\n            values.map(value => DexiePromise.resolve(value).then(resolve, reject));\n        });\n    },\n    PSD: {\n        get: () => PSD,\n        set: value => PSD = value\n    },\n    totalEchoes: { get: () => totalEchoes },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: () => asap,\n        set: value => { asap = value; }\n    },\n    rejectionMapper: {\n        get: () => rejectionMapper,\n        set: value => { rejectionMapper = value; }\n    },\n    follow: (fn, zoneProps) => {\n        return new DexiePromise((resolve, reject) => {\n            return newScope((resolve, reject) => {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    run_at_end_of_this_or_next_physical_tick(() => {\n                        this.unhandleds.length === 0 ? resolve() : reject(this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(resolve => {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                let remaining = possiblePromises.length;\n                const results = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => results[i] = { status: \"fulfilled\", value }, reason => results[i] = { status: \"rejected\", reason })\n                    .then(() => --remaining || resolve(results)));\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise((resolve, reject) => {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                let remaining = possiblePromises.length;\n                const failures = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => resolve(value), failure => {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }));\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(value => {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, (resolve, reject) => {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(() => {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: () => stack_being_generated ?\n                origProp && (origProp.get ?\n                    origProp.get.apply(reason) :\n                    origProp.value) :\n                promise.stack\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap(() => {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(p => {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap(() => {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(p => p._value === promise._value))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nconst task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props)\n        extend(psd, props);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(x => {\n            decrementExpectedAwaits();\n            return x;\n        }, e => {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise.all = targetEnv.all;\n            GlobalPromise.race = targetEnv.race;\n            GlobalPromise.resolve = targetEnv.resolve;\n            GlobalPromise.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nconst UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(`Unhandled rejection: ${err.stack || err}`);\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n        if (db._state.openComplete) {\n            return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n        }\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(() => tempTransaction(db, mode, storeNames, fn));\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n            db._state.PR1398_maxLoop = 3;\n        }\n        catch (ex) {\n            if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                console.warn('Dexie: Need to reopen db');\n                db._close();\n                return db.open().then(() => tempTransaction(db, mode, storeNames, fn));\n            }\n            return rejection(ex);\n        }\n        return trans._promise(mode, (resolve, reject) => {\n            return newScope(() => {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(result => {\n            return trans._completion.then(() => result);\n        });\n    }\n}\n\nconst DEXIE_VERSION = '3.2.2';\nconst maxString = String.fromCharCode(65535);\nconst minKey = -Infinity;\nconst INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nconst STRING_EXPECTED = \"String expected.\";\nconst connections = [];\nconst isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nconst hasIEDeleteObjectStoreBug = isIEOrEdge;\nconst hangsOnDeleteLargeKeyRange = isIEOrEdge;\nconst dexieStackFrameFilter = frame => !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\nconst DBNAMES_DB = '__dbnames';\nconst READONLY = 'readonly';\nconst READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nconst AnyRange = {\n    type: 3 ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n        ? (obj) => {\n            if (obj[keyPath] === undefined && (keyPath in obj)) {\n                obj = deepClone(obj);\n                delete obj[keyPath];\n            }\n            return obj;\n        }\n        : (obj) => obj;\n}\n\nclass Table {\n    _trans(mode, fn, writeLocked) {\n        const trans = this._tx || PSD.trans;\n        const tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        const wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(() => trans._promise(mode, checkTableInTransaction, writeLocked), { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    }\n    get(keyOrCrit, cb) {\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', (trans) => {\n            return this.core.get({ trans, key: keyOrCrit })\n                .then(res => this.hook.reading.fire(res));\n        }).then(cb);\n    }\n    where(indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, `[${indexOrCrit.join('+')}]`);\n        const keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        const compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(ix => ix.compound &&\n            keyPaths.every(keyPath => ix.keyPath.indexOf(keyPath) >= 0) &&\n            ix.keyPath.every(keyPath => keyPaths.indexOf(keyPath) >= 0))[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(kp => indexOrCrit[kp]));\n        if (!compoundIndex && debug)\n            console.warn(`The query ${JSON.stringify(indexOrCrit)} on ${this.name} would benefit of a ` +\n                `compound index [${keyPaths.join('+')}]`);\n        const { idxByName } = this.schema;\n        const idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        const [idx, filterFunction] = keyPaths.reduce(([prevIndex, prevFilterFn], keyPath) => {\n            const index = idxByName[keyPath];\n            const value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        x => {\n                            const prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(item => equals(value, item));\n                        } : x => equals(value, getByKeyPath(x, keyPath)))\n                    : prevFilterFn\n            ];\n        }, [null, null]);\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    }\n    filter(filterFunction) {\n        return this.toCollection().and(filterFunction);\n    }\n    count(thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    }\n    offset(offset) {\n        return this.toCollection().offset(offset);\n    }\n    limit(numRows) {\n        return this.toCollection().limit(numRows);\n    }\n    each(callback) {\n        return this.toCollection().each(callback);\n    }\n    toArray(thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    }\n    toCollection() {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    }\n    orderBy(index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            `[${index.join('+')}]` :\n            index));\n    }\n    reverse() {\n        return this.toCollection().reverse();\n    }\n    mapToClass(constructor) {\n        this.schema.mappedClass = constructor;\n        const readHook = obj => {\n            if (!obj)\n                return obj;\n            const res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    }\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return this.mapToClass(Class);\n    }\n    add(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    update(keyOrObject, modifications) {\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            const key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            try {\n                if (typeof modifications !== \"function\") {\n                    keys(modifications).forEach(keyPath => {\n                        setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                    });\n                }\n                else {\n                    modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                }\n            }\n            catch (_a) {\n            }\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    }\n    put(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    delete(key) {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'delete', keys: [key] }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    clear() {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'deleteRange', range: AnyRange }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    bulkGet(keys) {\n        return this._trans('readonly', trans => {\n            return this.core.getMany({\n                keys,\n                trans\n            }).then(result => result.map(res => this.hook.reading.fire(res)));\n        });\n    }\n    bulkAdd(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'add', keys: keys, values: objectsToAdd, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkAdd(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkPut(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'put', keys: keys, values: objectsToPut, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkPut(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkDelete(keys) {\n        const numKeys = keys.length;\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'delete', keys: keys });\n        }).then(({ numFailures, lastResult, failures }) => {\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(`${this.name}.bulkDelete(): ${numFailures} of ${numKeys} operations failed`, failures);\n        });\n    }\n}\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap$1(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? () => combine(curr(), factory()) : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    const index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    const index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    const filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        const set = {};\n        const union = (item, cursor, advance) => {\n            if (!filter || filter(cursor, advance, result => cursor.stop(result), err => cursor.fail(err))) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set, key)) {\n                    set[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? (x, c, a) => fn(valueMapper(x), c, a) : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(cursor => {\n        if (cursor) {\n            return cursor.start(() => {\n                var c = () => cursor.continue();\n                if (!filter || filter(cursor, advancer => c = advancer, val => { cursor.stop(val); c = nop; }, e => { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, advancer => c = advancer);\n                c();\n            });\n        }\n    });\n}\n\nfunction cmp(a, b) {\n    try {\n        const ta = type(a);\n        const tb = type(b);\n        if (ta !== tb) {\n            if (ta === 'Array')\n                return 1;\n            if (tb === 'Array')\n                return -1;\n            if (ta === 'binary')\n                return 1;\n            if (tb === 'binary')\n                return -1;\n            if (ta === 'string')\n                return 1;\n            if (tb === 'string')\n                return -1;\n            if (ta === 'Date')\n                return 1;\n            if (tb !== 'Date')\n                return NaN;\n            return -1;\n        }\n        switch (ta) {\n            case 'number':\n            case 'Date':\n            case 'string':\n                return a > b ? 1 : a < b ? -1 : 0;\n            case 'binary': {\n                return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n            }\n            case 'Array':\n                return compareArrays(a, b);\n        }\n    }\n    catch (_a) { }\n    return NaN;\n}\nfunction compareArrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        const res = cmp(a[i], b[i]);\n        if (res !== 0)\n            return res;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction compareUint8Arrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction type(x) {\n    const t = typeof x;\n    if (t !== 'object')\n        return t;\n    if (ArrayBuffer.isView(x))\n        return 'binary';\n    const tsTag = toStringTag(x);\n    return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n}\nfunction getUint8Array(a) {\n    if (a instanceof Uint8Array)\n        return a;\n    if (ArrayBuffer.isView(a))\n        return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n    return new Uint8Array(a);\n}\n\nclass Collection {\n    _read(fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    }\n    _write(fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    }\n    _addAlgorithm(fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    }\n    _iterate(fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    }\n    clone(props) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props)\n            extend(ctx, props);\n        rv._ctx = ctx;\n        return rv;\n    }\n    raw() {\n        this._ctx.valueMapper = null;\n        return this;\n    }\n    each(fn) {\n        var ctx = this._ctx;\n        return this._read(trans => iter(ctx, fn, trans, ctx.table.core));\n    }\n    count(cb) {\n        return this._read(trans => {\n            const ctx = this._ctx;\n            const coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(count => Math.min(count, ctx.limit));\n            }\n            else {\n                var count = 0;\n                return iter(ctx, () => { ++count; return false; }, trans, coreTable)\n                    .then(() => count);\n            }\n        }).then(cb);\n    }\n    sortBy(keyPath, cb) {\n        const parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    }\n    toArray(cb) {\n        return this._read(trans => {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                const { valueMapper } = ctx;\n                const index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                }).then(({ result }) => valueMapper ? result.map(valueMapper) : result);\n            }\n            else {\n                const a = [];\n                return iter(ctx, item => a.push(item), trans, ctx.table.core).then(() => a);\n            }\n        }, cb);\n    }\n    offset(offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return (cursor, advance) => {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(() => {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return () => (--offsetLeft < 0);\n            });\n        }\n        return this;\n    }\n    limit(numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, () => {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    }\n    until(filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    }\n    first(cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    }\n    last(cb) {\n        return this.reverse().first(cb);\n    }\n    filter(filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    }\n    and(filter) {\n        return this.filter(filter);\n    }\n    or(indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    }\n    reverse() {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    }\n    desc() {\n        return this.reverse();\n    }\n    eachKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    }\n    eachUniqueKey(cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    }\n    eachPrimaryKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    }\n    keys(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    primaryKeys(cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(trans => {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                });\n            }).then(({ result }) => result).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    uniqueKeys(cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    }\n    firstKey(cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    }\n    lastKey(cb) {\n        return this.reverse().firstKey(cb);\n    }\n    distinct() {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    }\n    modify(changes) {\n        var ctx = this._ctx;\n        return this._write(trans => {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            const coreTable = ctx.table.core;\n            const { outbound, extractKey } = coreTable.schema.primaryKey;\n            const limit = this.db._options.modifyChunkSize || 200;\n            const totalFailures = [];\n            let successCount = 0;\n            const failedKeys = [];\n            const applyMutateResult = (expectedCount, res) => {\n                const { failures, numFailures } = res;\n                successCount += expectedCount - numFailures;\n                for (let pos of keys(failures)) {\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return this.clone().primaryKeys().then(keys => {\n                const nextChunk = (offset) => {\n                    const count = Math.min(limit, keys.length - offset);\n                    return coreTable.getMany({\n                        trans,\n                        keys: keys.slice(offset, offset + count),\n                        cache: \"immutable\"\n                    }).then(values => {\n                        const addValues = [];\n                        const putValues = [];\n                        const putKeys = outbound ? [] : null;\n                        const deleteKeys = [];\n                        for (let i = 0; i < count; ++i) {\n                            const origValue = values[i];\n                            const ctx = {\n                                value: deepClone(origValue),\n                                primKey: keys[offset + i]\n                            };\n                            if (modifyer.call(ctx, ctx.value, ctx) !== false) {\n                                if (ctx.value == null) {\n                                    deleteKeys.push(keys[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx.value)) !== 0) {\n                                    deleteKeys.push(keys[offset + i]);\n                                    addValues.push(ctx.value);\n                                }\n                                else {\n                                    putValues.push(ctx.value);\n                                    if (outbound)\n                                        putKeys.push(keys[offset + i]);\n                                }\n                            }\n                        }\n                        const criteria = isPlainKeyRange(ctx) &&\n                            ctx.limit === Infinity &&\n                            (typeof changes !== 'function' || changes === deleteCallback) && {\n                            index: ctx.index,\n                            range: ctx.range\n                        };\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans, type: 'add', values: addValues })\n                                .then(res => {\n                                for (let pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(() => (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'put',\n                                keys: putKeys,\n                                values: putValues,\n                                criteria,\n                                changeSpec: typeof changes !== 'function'\n                                    && changes\n                            }).then(res => applyMutateResult(putValues.length, res))).then(() => (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'delete',\n                                keys: deleteKeys,\n                                criteria\n                            }).then(res => applyMutateResult(deleteKeys.length, res))).then(() => {\n                            return keys.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(() => {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys.length;\n                });\n            });\n        });\n    }\n    delete() {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n         {\n            return this._write(trans => {\n                const { primaryKey } = ctx.table.core.schema;\n                const coreRange = range;\n                return ctx.table.core.count({ trans, query: { index: primaryKey, range: coreRange } }).then(count => {\n                    return ctx.table.core.mutate({ trans, type: 'deleteRange', range: coreRange })\n                        .then(({ failures, lastResult, results, numFailures }) => {\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(pos => failures[pos]), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(deleteCallback);\n    }\n}\nconst deleteCallback = (value, ctx) => ctx.value = null;\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n        this.db = db;\n        let keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        const whereCtx = whereClause._ctx;\n        const table = whereCtx.table;\n        const readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, () => rangeEqual(\"\")).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toUpperCase() :\n        (s) => s.toLowerCase();\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toLowerCase() :\n        (s) => s.toUpperCase();\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(s => typeof s === 'string')) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, () => createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix));\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2 ,\n        lower,\n        upper,\n        lowerOpen,\n        upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1 ,\n        lower: value,\n        upper: value\n    };\n}\n\nclass WhereClause {\n    get Collection() {\n        return this._ctx.table.db.Collection;\n    }\n    between(lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, () => createRange(lower, upper, !includeLower, !includeUpper));\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    }\n    equals(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => rangeEqual(value));\n    }\n    above(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, true));\n    }\n    aboveOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, false));\n    }\n    below(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value, false, true));\n    }\n    belowOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value));\n    }\n    startsWith(str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    }\n    startsWithIgnoreCase(str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, (x, a) => x.indexOf(a[0]) === 0, [str], maxString);\n    }\n    equalsIgnoreCase(str) {\n        return addIgnoreCaseAlgorithm(this, (x, a) => x === a[0], [str], \"\");\n    }\n    anyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.indexOf(x) !== -1, set, \"\");\n    }\n    startsWithAnyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.some(n => x.indexOf(n) === 0), set, maxString);\n    }\n    anyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        let compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        const c = new this.Collection(this, () => createRange(set[0], set[set.length - 1]));\n        c._ondirectionchange = direction => {\n            compare = (direction === \"next\" ?\n                this._ascending :\n                this._descending);\n            set.sort(compare);\n        };\n        let i = 0;\n        c._addAlgorithm((cursor, advance, resolve) => {\n            const key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(() => { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    }\n    notEqual(value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    }\n    noneOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        const ranges = set.reduce((res, val) => res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]], null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    }\n    inAnyRange(ranges, options) {\n        const cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(range => range[0] !== undefined &&\n            range[1] !== undefined &&\n            ascending(range[0], range[1]) <= 0)) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        const includeLowers = !options || options.includeLowers !== false;\n        const includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            let i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                const range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        let sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        let set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        let rangePos = 0;\n        const keyIsBeyondCurrentEntry = includeUppers ?\n            key => ascending(key, set[rangePos][1]) > 0 :\n            key => ascending(key, set[rangePos][1]) >= 0;\n        const keyIsBeforeCurrentEntry = includeLowers ?\n            key => descending(key, set[rangePos][0]) > 0 :\n            key => descending(key, set[rangePos][0]) >= 0;\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        let checkKey = keyIsBeyondCurrentEntry;\n        const c = new this.Collection(this, () => createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers));\n        c._ondirectionchange = direction => {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm((cursor, advance, resolve) => {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (this._cmp(key, set[rangePos][1]) === 0 || this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(() => {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    }\n    startsWithAnyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(s => typeof s === 'string')) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map((str) => [str, str + maxString]));\n    }\n}\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        const indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI();\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = (a, b) => indexedDB.cmp(b, a);\n        this._max = (a, b) => indexedDB.cmp(a, b) > 0 ? a : b;\n        this._min = (a, b) => indexedDB.cmp(a, b) < 0 ? a : b;\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nconst DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\nconst STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\nconst globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\nclass Transaction {\n    _lock() {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    }\n    _unlock() {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    }\n    _locked() {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    }\n    create(idbtrans) {\n        if (!this.mode)\n            return this;\n        const idbdb = this.db.idbdb;\n        const dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans ||\n            (this.db.core\n                ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n        idbtrans.onerror = wrap(ev => {\n            preventDefault(ev);\n            this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(ev => {\n            preventDefault(ev);\n            this.active && this._reject(new exceptions.Abort(idbtrans.error));\n            this.active = false;\n            this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(() => {\n            this.active = false;\n            this._resolve();\n            if ('mutatedParts' in idbtrans) {\n                globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n            }\n        });\n        return this;\n    }\n    _promise(mode, fn, bWriteLock) {\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise((resolve, reject) => {\n                this._blockedFuncs.push([() => {\n                        this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(() => {\n                var p = new DexiePromise((resolve, reject) => {\n                    this._lock();\n                    const rv = fn(resolve, reject, this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(() => this._unlock());\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise((resolve, reject) => {\n                var rv = fn(resolve, reject, this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    }\n    _root() {\n        return this.parent ? this.parent._root() : this;\n    }\n    waitFor(promiseLike) {\n        var root = this._root();\n        const promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(() => promise);\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise((resolve, reject) => {\n            promise.then(res => root._waitingQueue.push(wrap(resolve.bind(null, res))), err => root._waitingQueue.push(wrap(reject.bind(null, err)))).finally(() => {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    }\n    abort() {\n        if (this.active) {\n            this.active = false;\n            if (this.idbtrans)\n                this.idbtrans.abort();\n            this._reject(new exceptions.Abort());\n        }\n    }\n    table(tableName) {\n        const memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        const tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        const transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    }\n}\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.chromeTransactionDurability = chromeTransactionDurability;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        this._completion.then(() => {\n            this.active = false;\n            this.on.complete.fire();\n        }, e => {\n            var wasActive = this.active;\n            this.active = false;\n            this.on.error.fire(e);\n            this.parent ?\n                this.parent._reject(e) :\n                wasActive && this.idbtrans && this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name,\n        keyPath,\n        unique,\n        multi,\n        auto,\n        compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name,\n        primKey,\n        indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, index => [index.name, index])\n    };\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\nlet getMaxKey = (IdbKeyRange) => {\n    try {\n        IdbKeyRange.only([[]]);\n        getMaxKey = () => [[]];\n        return [[]];\n    }\n    catch (e) {\n        getMaxKey = () => maxString;\n        return maxString;\n    }\n};\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return () => undefined;\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    const split = keyPath.split('.');\n    if (split.length === 1) {\n        return obj => obj[keyPath];\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\nlet _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            `[${keyPath.join('+')}]`;\n}\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\n    function extractSchema(db, trans) {\n        const tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(table => trans.objectStore(table)).map(store => {\n                    const { keyPath, autoIncrement } = store;\n                    const compound = isArray(keyPath);\n                    const outbound = keyPath == null;\n                    const indexByKeyPath = {};\n                    const result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound,\n                            compound,\n                            keyPath,\n                            autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(indexName => store.index(indexName))\n                            .map(index => {\n                            const { name, unique, multiEntry, keyPath } = index;\n                            const compound = isArray(keyPath);\n                            const result = {\n                                name,\n                                compound,\n                                keyPath,\n                                unique,\n                                multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: (keyPath) => indexByKeyPath[getKeyPathAlias(keyPath)]\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3 )\n            return null;\n        if (range.type === 4 )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        const { lower, upper, lowerOpen, upperOpen } = range;\n        const idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        const tableName = tableSchema.name;\n        function mutate({ trans, type, keys, values, range }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const store = trans.objectStore(tableName);\n                const outbound = store.keyPath == null;\n                const isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                const { length } = keys || values || { length: 1 };\n                if (keys && values && keys.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                let req;\n                const reqs = [];\n                const failures = [];\n                let numFailures = 0;\n                const errorHandler = event => {\n                    ++numFailures;\n                    preventDefault(event);\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4 )\n                        return resolve({ numFailures, failures, results: [], lastResult: undefined });\n                    if (range.type === 3 )\n                        reqs.push(req = store.clear());\n                    else\n                        reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                }\n                else {\n                    const [args1, args2] = isAddOrPut ?\n                        outbound ?\n                            [values, keys] :\n                            [values, null] :\n                        [keys, null];\n                    if (isAddOrPut) {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i])));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = store[type](args1[i]));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                const done = event => {\n                    const lastResult = event.target.result;\n                    reqs.forEach((req, i) => req.error != null && (failures[i] = req.error));\n                    resolve({\n                        numFailures,\n                        failures,\n                        results: type === \"delete\" ? keys : reqs.map(req => req.result),\n                        lastResult\n                    });\n                };\n                req.onerror = event => {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor({ trans, values, query, reverse, unique }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const { index, range } = query;\n                const store = trans.objectStore(tableName);\n                const source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                const direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                const req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(ev => {\n                    const cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    const _cursorContinue = cursor.continue.bind(cursor);\n                    let _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    const _cursorAdvance = cursor.advance.bind(cursor);\n                    const doThrowCursorIsNotStarted = () => { throw new Error(\"Cursor not started\"); };\n                    const doThrowCursorIsStopped = () => { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        let gotOne = 1;\n                        return this.start(() => gotOne-- ? this.continue() : this.stop()).then(() => this);\n                    };\n                    cursor.start = (callback) => {\n                        const iterationPromise = new Promise((resolveIteration, rejectIteration) => {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = value => {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        const guardedCallback = () => {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = () => { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(ev => {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return (request) => {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const { trans, values, limit, query } = request;\n                    const nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    const { index, range } = query;\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        const req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = event => resolve({ result: event.target.result });\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        let count = 0;\n                        const req = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        const result = [];\n                        req.onsuccess = event => {\n                            const cursor = req.result;\n                            if (!cursor)\n                                return resolve({ result });\n                            result.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count === limit)\n                                return resolve({ result });\n                            cursor.continue();\n                        };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate,\n            getMany({ trans, keys }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const length = keys.length;\n                    const result = new Array(length);\n                    let keyCount = 0;\n                    let callbackCount = 0;\n                    let req;\n                    const successHandler = event => {\n                        const req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    const errorHandler = eventRejectHandler(reject);\n                    for (let i = 0; i < length; ++i) {\n                        const key = keys[i];\n                        if (key != null) {\n                            req = store.get(keys[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get({ trans, key }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const req = store.get(key);\n                    req.onsuccess = event => resolve(event.target.result);\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor,\n            count({ query, trans }) {\n                const { index, range } = query;\n                return new Promise((resolve, reject) => {\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    const req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(ev => resolve(ev.target.result));\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    const { schema, hasGetAll } = extractSchema(db, tmpTrans);\n    const tables = schema.tables.map(tableSchema => createDbCoreTable(tableSchema));\n    const tableMap = {};\n    tables.forEach(table => tableMap[table.name] = table);\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table(name) {\n            const result = tableMap[name];\n            if (!result)\n                throw new Error(`Table '${name}' not found`);\n            return tableMap[name];\n        },\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce((down, { create }) => ({ ...down, ...create(down) }), stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, { IDBKeyRange, indexedDB }, tmpTrans) {\n    const dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore\n    };\n}\nfunction generateMiddlewareStacks({ _novip: db }, tmpTrans) {\n    const idbdb = tmpTrans.db;\n    const stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(table => {\n        const tableName = table.name;\n        if (db.core.schema.tables.some(tbl => tbl.name === tableName)) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace({ _novip: db }, objs, tableNames, dbschema) {\n    tableNames.forEach(tableName => {\n        const schema = dbschema[tableName];\n        objs.forEach(obj => {\n            const propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get() { return this.table(tableName); },\n                        set(value) {\n                            defineProperty(this, tableName, { value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi({ _novip: db }, objs) {\n    objs.forEach(obj => {\n        for (let key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    const globalSchema = db._dbSchema;\n    const trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    const rejectTransaction = trans._reject.bind(trans);\n    const transless = PSD.transless || PSD;\n    newScope(() => {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(tableName => {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(() => db.on.populate.fire(trans)).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes({ _novip: db }, oldVersion, trans, idbUpgradeTrans) {\n    const queue = [];\n    const versions = db._versions;\n    let globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    let anyContentUpgraderHasRun = false;\n    const versToRun = versions.filter(v => v._cfg.version >= oldVersion);\n    versToRun.forEach(version => {\n        queue.push(() => {\n            const oldSchema = globalSchema;\n            const newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            const diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(tuple => {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(change => {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    const store = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(idx => addIndex(store, idx));\n                    change.change.forEach(idx => {\n                        store.deleteIndex(idx.name);\n                        addIndex(store, idx);\n                    });\n                    change.del.forEach(idxName => store.deleteIndex(idxName));\n                }\n            });\n            const contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                let upgradeSchema = shallowClone(newSchema);\n                diff.del.forEach(table => {\n                    upgradeSchema[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\n                trans.schema = upgradeSchema;\n                const contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                let returnValue;\n                const promiseFollowed = DexiePromise.follow(() => {\n                    returnValue = contentUpgrade(trans);\n                    if (returnValue) {\n                        if (contentUpgradeIsAsync) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue && typeof returnValue.then === 'function' ?\n                    DexiePromise.resolve(returnValue) : promiseFollowed.then(() => returnValue));\n            }\n        });\n        queue.push(idbtrans => {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                const newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(() => {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    const diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    let table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        const oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            const change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                const oldIndexes = oldDef.idxByName;\n                const newIndexes = newDef.idxByName;\n                let idxName;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    const oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    const store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(idx => addIndex(store, idx));\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(tableName => {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    [].slice.call(idbtrans.db.objectStoreNames).forEach(storeName => newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName));\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    const globalSchema = {};\n    const dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(storeName => {\n        const store = tmpTrans.objectStore(storeName);\n        let keyPath = store.keyPath;\n        const primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        const indexes = [];\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema({ _novip: db }, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    const globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    const installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    const diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(ch => ch.add.length || ch.change.length));\n}\nfunction adjustToExistingIndexNames({ _novip: db }, schema, idbtrans) {\n    const storeNames = idbtrans.db.objectStoreNames;\n    for (let i = 0; i < storeNames.length; ++i) {\n        const storeName = storeNames[i];\n        const store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const indexName = store.indexNames[j];\n            const keyPath = store.index(indexName).keyPath;\n            const dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                const indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map((index, indexNum) => {\n        index = index.trim();\n        const name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        const keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nclass Version {\n    _parseStoresSpec(stores, outSchema) {\n        keys(stores).forEach(tableName => {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(idx => {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    }\n    stores(stores) {\n        const db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        const versions = db._versions;\n        const storesSpec = {};\n        let dbschema = {};\n        versions.forEach(version => {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    }\n    upgrade(upgradeFunction) {\n        this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n        return this;\n    }\n}\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n    let dbNamesDB = indexedDB[\"_dbNamesDB\"];\n    if (!dbNamesDB) {\n        dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n            addons: [],\n            indexedDB,\n            IDBKeyRange,\n        });\n        dbNamesDB.version(1).stores({ dbnames: \"name\" });\n    }\n    return dbNamesDB.table(\"dbnames\");\n}\nfunction hasDatabasesNative(indexedDB) {\n    return indexedDB && typeof indexedDB.databases === \"function\";\n}\nfunction getDatabaseNames({ indexedDB, IDBKeyRange, }) {\n    return hasDatabasesNative(indexedDB)\n        ? Promise.resolve(indexedDB.databases()).then((infos) => infos\n            .map((info) => info.name)\n            .filter((name) => name !== DBNAMES_DB))\n        : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\nfunction _onDatabaseCreated({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).put({ name }).catch(nop);\n}\nfunction _onDatabaseDeleted({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction idbReady() {\n    var isSafari = !navigator.userAgentData &&\n        /Safari\\//.test(navigator.userAgent) &&\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\n    if (!isSafari || !indexedDB.databases)\n        return Promise.resolve();\n    var intervalId;\n    return new Promise(function (resolve) {\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n        intervalId = setInterval(tryIdb, 100);\n        tryIdb();\n    }).finally(function () { return clearInterval(intervalId); });\n}\n\nfunction dexieOpen(db) {\n    const state = db._state;\n    const { indexedDB } = db._deps;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(() => state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db);\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    const openCanceller = state.openCanceller;\n    function throwIfCancelled() {\n        if (state.openCanceller !== openCanceller)\n            throw new exceptions.DatabaseClosed('db.open() was cancelled');\n    }\n    let resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null, wasCreated = false;\n    return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(() => new DexiePromise((resolve, reject) => {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            const dbName = db.name;\n            const req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(e => {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    const delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(() => {\n                        reject(new exceptions.NoSuchDatabase(`Database ${dbName} doesnt exist`));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db._novip.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(() => {\n                upgradeTransaction = null;\n                const idbdb = db._novip.idbdb = req.result;\n                const objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        const tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`);\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(ev => {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(ev => {\n                    db.on(\"close\").fire(ev);\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }))]).then(() => {\n        throwIfCancelled();\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(() => db.on.ready.fire(db.vip))).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                let remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(() => remainders(db.vip))).then(fireRemainders);\n            }\n        });\n    }).finally(() => {\n        state.onReadyBeingFired = null;\n        state.isBeingOpened = false;\n    }).then(() => {\n        return db;\n    }).catch(err => {\n        state.dbOpenError = err;\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (_a) { }\n        if (openCanceller === state.openCanceller) {\n            db._close();\n        }\n        return rejection(err);\n    }).finally(() => {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = result => iterator.next(result), doThrow = error => iterator.throw(error), onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return (val) => {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(() => {\n        const transless = PSD.transless || PSD;\n        const trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        const zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            try {\n                trans.create();\n                db._state.PR1398_maxLoop = 3;\n            }\n            catch (ex) {\n                if (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n                    console.warn('Dexie: Need to reopen db');\n                    db._close();\n                    return db.open().then(() => enterTransactionScope(db, mode, storeNames, null, scopeFunc));\n                }\n                return rejection(ex);\n            }\n        }\n        const scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        let returnValue;\n        const promiseFollowed = DexiePromise.follow(() => {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(x => trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))\n            : promiseFollowed.then(() => returnValue)).then(x => {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(() => x);\n        }).catch(e => {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    const result = isArray(a) ? a.slice() : [a];\n    for (let i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return {\n        ...down,\n        table(tableName) {\n            const table = down.table(tableName);\n            const { schema } = table;\n            const indexLookup = {};\n            const allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                const keyPathAlias = getKeyPathAlias(keyPath);\n                const indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                const keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                const isVirtual = keyTail > 0;\n                const virtualIndex = {\n                    ...lowLevelIndex,\n                    isVirtual,\n                    keyTail,\n                    keyLength,\n                    extractKey: getKeyExtractor(keyPath),\n                    unique: !isVirtual && lowLevelIndex.unique\n                };\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    const virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort((a, b) => a.keyTail - b.keyTail);\n                return virtualIndex;\n            }\n            const primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (const index of schema.indexes) {\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                const result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1  ?\n                        2  :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                const index = req.query.index;\n                return index.isVirtual ? {\n                    ...req,\n                    query: {\n                        index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    }\n                } : req;\n            }\n            const result = {\n                ...table,\n                schema: {\n                    ...schema,\n                    primaryKey,\n                    indexes: allVirtualIndexes,\n                    getIndexByKeyPath: findBestIndex\n                },\n                count(req) {\n                    return table.count(translateRequest(req));\n                },\n                query(req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor(req) {\n                    const { keyTail, isVirtual, keyLength } = req.query.index;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(cursor.key.slice(0, keyLength)\n                                        .concat(req.reverse\n                                        ? down.MIN_KEY\n                                        : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        const virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value(key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            primaryKey: {\n                                get() {\n                                    return cursor.primaryKey;\n                                }\n                            },\n                            key: {\n                                get() {\n                                    const key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get() {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(cursor => cursor && createVirtualCursor(cursor));\n                }\n            };\n            return result;\n        }\n    };\n}\nconst virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach((prop) => {\n        if (!hasOwn(b, prop)) {\n            rv[prfx + prop] = undefined;\n        }\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                const apTypeName = toStringTag(ap);\n                const bpTypeName = toStringTag(bp);\n                if (apTypeName !== bpTypeName) {\n                    rv[prfx + prop] = b[prop];\n                }\n                else if (apTypeName === 'Object') {\n                    getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                }\n                else if (ap !== bp) {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach((prop) => {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\n\nconst hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: (downCore) => ({\n        ...downCore,\n        table(tableName) {\n            const downTable = downCore.table(tableName);\n            const { primaryKey } = downTable.schema;\n            const tableMiddleware = {\n                ...downTable,\n                mutate(req) {\n                    const dxTrans = PSD.trans;\n                    const { deleting, creating, updating } = dxTrans.table(tableName).hook;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => deleteRange(req), true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        const dxTrans = PSD.trans;\n                        const keys = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ?\n                            { ...req, keys } :\n                            { ...req };\n                        if (req.type !== 'delete')\n                            req.values = [...req.values];\n                        if (req.keys)\n                            req.keys = [...req.keys];\n                        return getExistingValues(downTable, req, keys).then(existingValues => {\n                            const contexts = keys.map((key, i) => {\n                                const existingValue = existingValues[i];\n                                const ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    const generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    const objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    const additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges) {\n                                        const requestedValue = req.values[i];\n                                        Object.keys(additionalChanges).forEach(keyPath => {\n                                            if (hasOwn(requestedValue, keyPath)) {\n                                                requestedValue[keyPath] = additionalChanges[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(({ failures, results, numFailures, lastResult }) => {\n                                for (let i = 0; i < keys.length; ++i) {\n                                    const primKey = results ? results[i] : keys[i];\n                                    const ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures, results, numFailures, lastResult };\n                            }).catch(error => {\n                                contexts.forEach(ctx => ctx.onerror && ctx.onerror(error));\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans, values: false, query: { index: primaryKey, range }, limit })\n                            .then(({ result }) => {\n                            return addPutOrDelete({ type: 'delete', keys: result, trans }).then(res => {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, { ...range, lower: result[result.length - 1], lowerOpen: true }, limit);\n                                }\n                            });\n                        });\n                    }\n                }\n            };\n            return tableMiddleware;\n        },\n    })\n};\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === \"add\"\n        ? Promise.resolve([])\n        : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n    try {\n        if (!cache)\n            return null;\n        if (cache.keys.length < keys.length)\n            return null;\n        const result = [];\n        for (let i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n            if (cmp(cache.keys[i], keys[j]) !== 0)\n                continue;\n            result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n            ++j;\n        }\n        return result.length === keys.length ? result : null;\n    }\n    catch (_a) {\n        return null;\n    }\n}\nconst cacheExistingValuesMiddleware = {\n    stack: \"dbcore\",\n    level: -1,\n    create: (core) => {\n        return {\n            table: (tableName) => {\n                const table = core.table(tableName);\n                return {\n                    ...table,\n                    getMany: (req) => {\n                        if (!req.cache) {\n                            return table.getMany(req);\n                        }\n                        const cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                        if (cachedResult) {\n                            return DexiePromise.resolve(cachedResult);\n                        }\n                        return table.getMany(req).then((res) => {\n                            req.trans[\"_cache\"] = {\n                                keys: req.keys,\n                                values: req.cache === \"clone\" ? deepClone(res) : res,\n                            };\n                            return res;\n                        });\n                    },\n                    mutate: (req) => {\n                        if (req.type !== \"add\")\n                            req.trans[\"_cache\"] = null;\n                        return table.mutate(req);\n                    },\n                };\n            },\n        };\n    },\n};\n\nfunction isEmptyRange(node) {\n    return !(\"from\" in node);\n}\nconst RangeSet = function (fromOrTree, to) {\n    if (this) {\n        extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n    }\n    else {\n        const rv = new RangeSet();\n        if (fromOrTree && (\"d\" in fromOrTree)) {\n            extend(rv, fromOrTree);\n        }\n        return rv;\n    }\n};\nprops(RangeSet.prototype, {\n    add(rangeSet) {\n        mergeRanges(this, rangeSet);\n        return this;\n    },\n    addKey(key) {\n        addRange(this, key, key);\n        return this;\n    },\n    addKeys(keys) {\n        keys.forEach(key => addRange(this, key, key));\n        return this;\n    },\n    [iteratorSymbol]() {\n        return getRangeSetIterator(this);\n    }\n});\nfunction addRange(target, from, to) {\n    const diff = cmp(from, to);\n    if (isNaN(diff))\n        return;\n    if (diff > 0)\n        throw RangeError();\n    if (isEmptyRange(target))\n        return extend(target, { from, to, d: 1 });\n    const left = target.l;\n    const right = target.r;\n    if (cmp(to, target.from) < 0) {\n        left\n            ? addRange(left, from, to)\n            : (target.l = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.to) > 0) {\n        right\n            ? addRange(right, from, to)\n            : (target.r = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.from) < 0) {\n        target.from = from;\n        target.l = null;\n        target.d = right ? right.d + 1 : 1;\n    }\n    if (cmp(to, target.to) > 0) {\n        target.to = to;\n        target.r = null;\n        target.d = target.l ? target.l.d + 1 : 1;\n    }\n    const rightWasCutOff = !target.r;\n    if (left && !target.l) {\n        mergeRanges(target, left);\n    }\n    if (right && rightWasCutOff) {\n        mergeRanges(target, right);\n    }\n}\nfunction mergeRanges(target, newSet) {\n    function _addRangeSet(target, { from, to, l, r }) {\n        addRange(target, from, to);\n        if (l)\n            _addRangeSet(target, l);\n        if (r)\n            _addRangeSet(target, r);\n    }\n    if (!isEmptyRange(newSet))\n        _addRangeSet(target, newSet);\n}\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n    const i1 = getRangeSetIterator(rangeSet2);\n    let nextResult1 = i1.next();\n    if (nextResult1.done)\n        return false;\n    let a = nextResult1.value;\n    const i2 = getRangeSetIterator(rangeSet1);\n    let nextResult2 = i2.next(a.from);\n    let b = nextResult2.value;\n    while (!nextResult1.done && !nextResult2.done) {\n        if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n            return true;\n        cmp(a.from, b.from) < 0\n            ? (a = (nextResult1 = i1.next(b.from)).value)\n            : (b = (nextResult2 = i2.next(a.from)).value);\n    }\n    return false;\n}\nfunction getRangeSetIterator(node) {\n    let state = isEmptyRange(node) ? null : { s: 0, n: node };\n    return {\n        next(key) {\n            const keyProvided = arguments.length > 0;\n            while (state) {\n                switch (state.s) {\n                    case 0:\n                        state.s = 1;\n                        if (keyProvided) {\n                            while (state.n.l && cmp(key, state.n.from) < 0)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                        else {\n                            while (state.n.l)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                    case 1:\n                        state.s = 2;\n                        if (!keyProvided || cmp(key, state.n.to) <= 0)\n                            return { value: state.n, done: false };\n                    case 2:\n                        if (state.n.r) {\n                            state.s = 3;\n                            state = { up: state, n: state.n.r, s: 0 };\n                            continue;\n                        }\n                    case 3:\n                        state = state.up;\n                }\n            }\n            return { done: true };\n        },\n    };\n}\nfunction rebalance(target) {\n    var _a, _b;\n    const diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n    const r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n    if (r) {\n        const l = r === \"r\" ? \"l\" : \"r\";\n        const rootClone = { ...target };\n        const oldRootRight = target[r];\n        target.from = oldRootRight.from;\n        target.to = oldRootRight.to;\n        target[r] = oldRootRight[r];\n        rootClone[r] = oldRootRight[l];\n        target[l] = rootClone;\n        rootClone.d = computeDepth(rootClone);\n    }\n    target.d = computeDepth(target);\n}\nfunction computeDepth({ r, l }) {\n    return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n}\n\nconst observabilityMiddleware = {\n    stack: \"dbcore\",\n    level: 0,\n    create: (core) => {\n        const dbName = core.schema.name;\n        const FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n        return {\n            ...core,\n            table: (tableName) => {\n                const table = core.table(tableName);\n                const { schema } = table;\n                const { primaryKey } = schema;\n                const { extractKey, outbound } = primaryKey;\n                const tableClone = {\n                    ...table,\n                    mutate: (req) => {\n                        const trans = req.trans;\n                        const mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                        const getRangeSet = (indexName) => {\n                            const part = `idb://${dbName}/${tableName}/${indexName}`;\n                            return (mutatedParts[part] ||\n                                (mutatedParts[part] = new RangeSet()));\n                        };\n                        const pkRangeSet = getRangeSet(\"\");\n                        const delsRangeSet = getRangeSet(\":dels\");\n                        const { type } = req;\n                        let [keys, newObjs] = req.type === \"deleteRange\"\n                            ? [req.range]\n                            : req.type === \"delete\"\n                                ? [req.keys]\n                                : req.values.length < 50\n                                    ? [[], req.values]\n                                    : [];\n                        const oldCache = req.trans[\"_cache\"];\n                        return table.mutate(req).then((res) => {\n                            if (isArray(keys)) {\n                                if (type !== \"delete\")\n                                    keys = res.results;\n                                pkRangeSet.addKeys(keys);\n                                const oldObjs = getFromTransactionCache(keys, oldCache);\n                                if (!oldObjs && type !== \"add\") {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                const range = { from: keys.lower, to: keys.upper };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(idx => getRangeSet(idx.name).add(FULL_RANGE));\n                            }\n                            return res;\n                        });\n                    },\n                };\n                const getRange = ({ query: { index, range }, }) => {\n                    var _a, _b;\n                    return [\n                        index,\n                        new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY),\n                    ];\n                };\n                const readSubscribers = {\n                    get: (req) => [primaryKey, new RangeSet(req.key)],\n                    getMany: (req) => [primaryKey, new RangeSet().addKeys(req.keys)],\n                    count: getRange,\n                    query: getRange,\n                    openCursor: getRange,\n                };\n                keys(readSubscribers).forEach(method => {\n                    tableClone[method] = function (req) {\n                        const { subscr } = PSD;\n                        if (subscr) {\n                            const getRangeSet = (indexName) => {\n                                const part = `idb://${dbName}/${tableName}/${indexName}`;\n                                return (subscr[part] ||\n                                    (subscr[part] = new RangeSet()));\n                            };\n                            const pkRangeSet = getRangeSet(\"\");\n                            const delsRangeSet = getRangeSet(\":dels\");\n                            const [queriedIndex, queriedRanges] = readSubscribers[method](req);\n                            getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                            if (!queriedIndex.isPrimaryKey) {\n                                if (method === \"count\") {\n                                    delsRangeSet.add(FULL_RANGE);\n                                }\n                                else {\n                                    const keysPromise = method === \"query\" &&\n                                        outbound &&\n                                        req.values &&\n                                        table.query({\n                                            ...req,\n                                            values: false,\n                                        });\n                                    return table[method].apply(this, arguments).then((res) => {\n                                        if (method === \"query\") {\n                                            if (outbound && req.values) {\n                                                return keysPromise.then(({ result: resultingKeys }) => {\n                                                    pkRangeSet.addKeys(resultingKeys);\n                                                    return res;\n                                                });\n                                            }\n                                            const pKeys = req.values\n                                                ? res.result.map(extractKey)\n                                                : res.result;\n                                            if (req.values) {\n                                                pkRangeSet.addKeys(pKeys);\n                                            }\n                                            else {\n                                                delsRangeSet.addKeys(pKeys);\n                                            }\n                                        }\n                                        else if (method === \"openCursor\") {\n                                            const cursor = res;\n                                            const wantValues = req.values;\n                                            return (cursor &&\n                                                Object.create(cursor, {\n                                                    key: {\n                                                        get() {\n                                                            delsRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.key;\n                                                        },\n                                                    },\n                                                    primaryKey: {\n                                                        get() {\n                                                            const pkey = cursor.primaryKey;\n                                                            delsRangeSet.addKey(pkey);\n                                                            return pkey;\n                                                        },\n                                                    },\n                                                    value: {\n                                                        get() {\n                                                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.value;\n                                                        },\n                                                    },\n                                                }));\n                                        }\n                                        return res;\n                                    });\n                                }\n                            }\n                        }\n                        return table[method].apply(this, arguments);\n                    };\n                });\n                return tableClone;\n            },\n        };\n    },\n};\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n    function addAffectedIndex(ix) {\n        const rangeSet = getRangeSet(ix.name || \"\");\n        function extractKey(obj) {\n            return obj != null ? ix.extractKey(obj) : null;\n        }\n        const addKeyOrKeys = (key) => ix.multiEntry && isArray(key)\n            ? key.forEach(key => rangeSet.addKey(key))\n            : rangeSet.addKey(key);\n        (oldObjs || newObjs).forEach((_, i) => {\n            const oldKey = oldObjs && extractKey(oldObjs[i]);\n            const newKey = newObjs && extractKey(newObjs[i]);\n            if (cmp(oldKey, newKey) !== 0) {\n                if (oldKey != null)\n                    addKeyOrKeys(oldKey);\n                if (newKey != null)\n                    addKeyOrKeys(newKey);\n            }\n        });\n    }\n    schema.indexes.forEach(addAffectedIndex);\n}\n\nclass Dexie$1 {\n    constructor(name, options) {\n        this._middlewares = {};\n        this.verno = 0;\n        const deps = Dexie$1.dependencies;\n        this._options = options = {\n            addons: Dexie$1.addons,\n            autoOpen: true,\n            indexedDB: deps.indexedDB,\n            IDBKeyRange: deps.IDBKeyRange,\n            ...options\n        };\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        const { addons, } = options;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        this._novip = this;\n        const state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true,\n            PR1398_maxLoop: 3\n        };\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, subscribe => {\n            return (subscriber, bSticky) => {\n                Dexie$1.vip(() => {\n                    const state = this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        const db = this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db.on.ready.unsubscribe(subscriber);\n                                db.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", ev => {\n            if (ev.newVersion > 0)\n                console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);\n            else\n                console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);\n            this.close();\n        });\n        this.on(\"blocked\", ev => {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(`Dexie.delete('${this.name}') was blocked`);\n            else\n                console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${ev.oldVersion / 10}`);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = (mode, storeNames, dbschema, parentTransaction) => new this.Transaction(mode, storeNames, dbschema, this._options.chromeTransactionDurability, parentTransaction);\n        this._fireOnBlocked = ev => {\n            this.on(\"blocked\").fire(ev);\n            connections\n                .filter(c => c.name === this.name && c !== this && !c._state.vcFired)\n                .map(c => c.on(\"versionchange\").fire(ev));\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        this.use(observabilityMiddleware);\n        this.use(cacheExistingValuesMiddleware);\n        this.vip = Object.create(this, { _vip: { value: true } });\n        addons.forEach(addon => addon(this));\n    }\n    version(versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(`Given version is not a positive number`);\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        const versions = this._versions;\n        var versionInstance = versions.filter(v => v._cfg.version === versionNumber)[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    }\n    _whenReady(fn) {\n        return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise((resolve, reject) => {\n            if (this._state.openComplete) {\n                return reject(new exceptions.DatabaseClosed(this._state.dbOpenError));\n            }\n            if (!this._state.isBeingOpened) {\n                if (!this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                this.open().catch(nop);\n            }\n            this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    }\n    use({ stack, create, level, name }) {\n        if (name)\n            this.unuse({ stack, name });\n        const middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack, create, level: level == null ? 10 : level, name });\n        middlewares.sort((a, b) => a.level - b.level);\n        return this;\n    }\n    unuse({ stack, name, create }) {\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(mw => create ? mw.create !== create :\n                name ? mw.name !== name :\n                    false);\n        }\n        return this;\n    }\n    open() {\n        return dexieOpen(this);\n    }\n    _close() {\n        const state = this._state;\n        const idx = connections.indexOf(this);\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this._novip.idbdb = null;\n        }\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n    }\n    close() {\n        this._close();\n        const state = this._state;\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n    }\n    delete() {\n        const hasArguments = arguments.length > 0;\n        const state = this._state;\n        return new DexiePromise((resolve, reject) => {\n            const doDelete = () => {\n                this.close();\n                var req = this._deps.indexedDB.deleteDatabase(this.name);\n                req.onsuccess = wrap(() => {\n                    _onDatabaseDeleted(this._deps, this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    }\n    backendDB() {\n        return this.idbdb;\n    }\n    isOpen() {\n        return this.idbdb !== null;\n    }\n    hasBeenClosed() {\n        const dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    }\n    hasFailed() {\n        return this._state.dbOpenError !== null;\n    }\n    dynamicallyOpened() {\n        return this._state.autoSchema;\n    }\n    get tables() {\n        return keys(this._allTables).map(name => this._allTables[name]);\n    }\n    transaction() {\n        const args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    }\n    _transaction(mode, tables, scopeFunc) {\n        let parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        const onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        let idbMode, storeNames;\n        try {\n            storeNames = tables.map(table => {\n                var storeName = table instanceof this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(storeName => {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, (_, reject) => { reject(e); }) :\n                rejection(e);\n        }\n        const enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, () => this._whenReady(enterTransaction)) :\n                this._whenReady(enterTransaction));\n    }\n    table(tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(`Table ${tableName} does not exist`);\n        }\n        return this._allTables[tableName];\n    }\n}\n\nconst symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n    ? Symbol.observable\n    : \"@@observable\";\nclass Observable {\n    constructor(subscribe) {\n        this._subscribe = subscribe;\n    }\n    subscribe(x, error, complete) {\n        return this._subscribe(!x || typeof x === \"function\" ? { next: x, error, complete } : x);\n    }\n    [symbolObservable]() {\n        return this;\n    }\n}\n\nfunction extendObservabilitySet(target, newSet) {\n    keys(newSet).forEach(part => {\n        const rangeSet = target[part] || (target[part] = new RangeSet());\n        mergeRanges(rangeSet, newSet[part]);\n    });\n    return target;\n}\n\nfunction liveQuery(querier) {\n    return new Observable((observer) => {\n        const scopeFuncIsAsync = isAsyncFunction(querier);\n        function execute(subscr) {\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            const exec = () => newScope(querier, { subscr, trans: null });\n            const rv = PSD.trans\n                ?\n                    usePSD(PSD.transless, exec)\n                : exec();\n            if (scopeFuncIsAsync) {\n                rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n            }\n            return rv;\n        }\n        let closed = false;\n        let accumMuts = {};\n        let currentObs = {};\n        const subscription = {\n            get closed() {\n                return closed;\n            },\n            unsubscribe: () => {\n                closed = true;\n                globalEvents.storagemutated.unsubscribe(mutationListener);\n            },\n        };\n        observer.start && observer.start(subscription);\n        let querying = false, startedListening = false;\n        function shouldNotify() {\n            return keys(currentObs).some((key) => accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]));\n        }\n        const mutationListener = (parts) => {\n            extendObservabilitySet(accumMuts, parts);\n            if (shouldNotify()) {\n                doQuery();\n            }\n        };\n        const doQuery = () => {\n            if (querying || closed)\n                return;\n            accumMuts = {};\n            const subscr = {};\n            const ret = execute(subscr);\n            if (!startedListening) {\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                startedListening = true;\n            }\n            querying = true;\n            Promise.resolve(ret).then((result) => {\n                querying = false;\n                if (closed)\n                    return;\n                if (shouldNotify()) {\n                    doQuery();\n                }\n                else {\n                    accumMuts = {};\n                    currentObs = subscr;\n                    observer.next && observer.next(result);\n                }\n            }, (err) => {\n                querying = false;\n                observer.error && observer.error(err);\n                subscription.unsubscribe();\n            });\n        };\n        doQuery();\n        return subscription;\n    });\n}\n\nlet domDeps;\ntry {\n    domDeps = {\n        indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n        IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n    };\n}\ncatch (e) {\n    domDeps = { indexedDB: null, IDBKeyRange: null };\n}\n\nconst Dexie = Dexie$1;\nprops(Dexie, {\n    ...fullNameExceptions,\n    delete(databaseName) {\n        const db = new Dexie(databaseName, { addons: [] });\n        return db.delete();\n    },\n    exists(name) {\n        return new Dexie(name, { addons: [] }).open().then(db => {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', () => false);\n    },\n    getDatabaseNames(cb) {\n        try {\n            return getDatabaseNames(Dexie.dependencies).then(cb);\n        }\n        catch (_a) {\n            return rejection(new exceptions.MissingAPI());\n        }\n    },\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction(scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip,\n    async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    },\n    spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: () => PSD.trans || null\n    },\n    waitFor: function (promiseOrFunction, optionalTimeout) {\n        const promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: () => debug,\n        set: value => {\n            setDebug(value, value === 'dexie' ? () => true : dexieStackFrameFilter);\n        }\n    },\n    derive: derive,\n    extend: extend,\n    props: props,\n    override: override,\n    Events: Events,\n    on: globalEvents,\n    liveQuery,\n    extendObservabilitySet,\n    getByKeyPath: getByKeyPath,\n    setByKeyPath: setByKeyPath,\n    delByKeyPath: delByKeyPath,\n    shallowClone: shallowClone,\n    deepClone: deepClone,\n    getObjectDiff: getObjectDiff,\n    cmp,\n    asap: asap$1,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: domDeps,\n    semVer: DEXIE_VERSION,\n    version: DEXIE_VERSION.split('.')\n        .map(n => parseInt(n))\n        .reduce((p, c, i) => p + (c / Math.pow(10, i * 2))),\n});\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, updatedParts => {\n        if (!propagatingLocally) {\n            let event;\n            if (isIEOrEdge) {\n                event = document.createEvent('CustomEvent');\n                event.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n            }\n            else {\n                event = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n            }\n            propagatingLocally = true;\n            dispatchEvent(event);\n            propagatingLocally = false;\n        }\n    });\n    addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, ({ detail }) => {\n        if (!propagatingLocally) {\n            propagateLocally(detail);\n        }\n    });\n}\nfunction propagateLocally(updateParts) {\n    let wasMe = propagatingLocally;\n    try {\n        propagatingLocally = true;\n        globalEvents.storagemutated.fire(updateParts);\n    }\n    finally {\n        propagatingLocally = wasMe;\n    }\n}\nlet propagatingLocally = false;\n\nif (typeof BroadcastChannel !== 'undefined') {\n    const bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        if (!propagatingLocally) {\n            bc.postMessage(changedParts);\n        }\n    });\n    bc.onmessage = (ev) => {\n        if (ev.data)\n            propagateLocally(ev.data);\n    };\n}\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        try {\n            if (!propagatingLocally) {\n                if (typeof localStorage !== 'undefined') {\n                    localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                        trig: Math.random(),\n                        changedParts,\n                    }));\n                }\n                if (typeof self['clients'] === 'object') {\n                    [...self['clients'].matchAll({ includeUncontrolled: true })].forEach((client) => client.postMessage({\n                        type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                        changedParts,\n                    }));\n                }\n            }\n        }\n        catch (_a) { }\n    });\n    if (typeof addEventListener !== 'undefined') {\n        addEventListener('storage', (ev) => {\n            if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n                const data = JSON.parse(ev.newValue);\n                if (data)\n                    propagateLocally(data.changedParts);\n            }\n        });\n    }\n    const swContainer = self.document && navigator.serviceWorker;\n    if (swContainer) {\n        swContainer.addEventListener('message', propagateMessageLocally);\n    }\n}\nfunction propagateMessageLocally({ data }) {\n    if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n        propagateLocally(data.changedParts);\n    }\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport { Dexie$1 as Dexie, RangeSet, Dexie$1 as default, liveQuery, mergeRanges, rangesOverlap };\n//# sourceMappingURL=dexie.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["FUND_EMOJI","cash","async","addAccount","account","passedInfo","name","MissingFieldError","initial_balance","FormattingError","validateNewAccount","source","emoji","type","Number","current_balance","getAllUserAccounts","then","results","toArray","getAllAccounts","filter","ValidationError","Error","constructor","message","super","this","property","InvalidAmountError","addRecord","amount","toFixed","validateNewRecord","result","source_account","destination_account","getAllRecords","records","Promise","all","map","record","exportRecords","donwloadCSV","getCashFlow","accounts","balance","acc","reduce","a","b","expense","r","income","getLatestRecords","Object","assign","created_at","Date","parse","sort","slice","toDateString","getExpenseByCategories","forEach","storeAccount","id","uuidv4","db","catch","e","StorageError","stack","updateAccount","getAccount","getAccountMulti","filters","EXPENSE","Food","Groceries","Alcohol","Shopping","Entertainment","Learning","Transport","Events","Investments","Housing","INCOME","Salary","Interest","Refunds","tx","entries","Dexie","version","stores","open","storeRecord","srcAccount","destAccount","updateRecord","prev","getRecord","getRecordsMulti","replace","c","crypto","getRandomValues","Uint8Array","toString","data","filename","formatRow","values","v","join","csvData","anchor","document","createElement","setAttribute","blob","Blob","url","URL","createObjectURL","click","revokeObjectURL","download","keys","object","RECORD_AMOUNT_COLOR_LOOKUP","transfer","recordCardComponent","recordCard","classList","innerHTML","note","currency","accountCardComponent","accountCard","recordModal","modal","role","add","getRecordModal","latestRecordCardComponent","COLORS","navBarQuickAdd","querySelector","addAccountModal","addAccountButton","accountModalCancelButton","accountModalAddButton","accountModalAddForm","accountList","cashflowCardBalance","cashflowCardExpense","cashflowCardIncome","cashflowChart","getElementById","latestRecordsList","donut","Chart","registerables","addEventListener","body","appendChild","addAccountCard","populateSummary","toggleAddAccountModalVisibility","toggle","toggleAddRecordModalVisibility","populateCashFlow","populateLatestRecords","populateExpenseByCategories","formData","FormData","formJson","pair","onkeyup","ctrlKey","key","prepend","cashflow","cashflowData","labels","datasets","label","backgroundColor","borderWidth","barThickness","options","scales","y","beginAtZero","answer","length","hoverOffset","responsive","recordList","addRecordButton","recordModalRecordType","dstAccountDropDown","srcAccountDropDown","recordModalCancelBtn","recordModalAddBtn","recordModalForm","exportRecordsBtn","expenseTypeChangeHandle","addRecordCard","target","value","populateDropDown","element","replaceChildren","accountDropDown","dropdown","recordType","node","innerText","getBalanceColor","getBalanceWithCurrency","currencySign","getCurrencySign","Math","abs","getAccountType","accountTypeString","currencyString","Animator","_request","_charts","Map","_running","_lastDate","undefined","_notify","chart","anims","date","callbacks","listeners","numSteps","duration","fn","initial","currentStep","min","start","_refresh","window","_update","now","remaining","running","items","item","i","draw","_active","_total","tick","pop","_getAnims","charts","get","complete","progress","set","listen","event","cb","push","has","cur","max","_duration","stop","cancel","remove","delete","animator","transparent","interpolators","boolean","from","to","factor","color","c0","c1","valid","mix","hexString","number","Animation","cfg","prop","currentValue","_fn","_easing","easing","_start","floor","delay","_loop","loop","_target","_prop","_from","_to","_promises","active","update","elapsed","remain","wait","promises","res","rej","resolved","method","Animations","config","_chart","_properties","configure","animationOptions","d","animatedProps","getOwnPropertyNames","option","properties","_animateOptions","newOptions","$shared","$animations","resolveTargetOptions","animations","_createAnimations","anim","awaitAll","props","charAt","animation","size","scaleClip","scale","allowedOverflow","opts","reverse","end","getSortedDatasetIndices","filterVisible","metasets","_getSortedDatasetMetas","ilen","index","applyStack","dsIndex","singleMode","mode","datasetIndex","otherValue","s","isStacked","meta","stacked","getOrCreateStack","stacks","stackKey","indexValue","subStack","getLastIndexInStack","vScale","positive","getMatchingVisibleMetas","updateStacks","controller","parsed","_cachedMeta","_stacks","iScale","iAxis","axis","vAxis","indexScale","valueScale","getStackKey","_top","_bottom","getFirstScaleId","shift","clearStacks","_parsed","isDirectUpdateMode","cloneIfNotShared","cached","shared","DatasetController","static","_ctx","ctx","_cachedDataOpts","getMeta","_type","_parsing","_data","_objectData","_sharedOptions","_drawStart","_drawCount","enableOptionSharing","supportsDecimation","$context","_syncList","datasetElementType","dataElementType","initialize","linkScales","_stacked","addElements","fill","isPluginEnabled","console","warn","updateIndex","dataset","getDataset","chooseId","x","xid","xAxisID","yid","yAxisID","rid","rAxisID","indexAxis","iid","iAxisID","vid","vAxisID","xScale","getScaleForId","yScale","rScale","getDatasetMeta","scaleID","_getOtherScale","reset","_destroy","u","_dataCheck","adata","Array","convertObjectDataToArray","isExtensible","l","buildOrUpdateElements","resetNewElements","stackChanged","oldStacked","_resyncElements","scopeKeys","datasetScopeKeys","scopes","getOptionScopes","createResolver","getContext","parsing","count","sorted","_sorted","parseArrayData","parseObjectData","parsePrimitiveData","isNotInOrderComparedToPrev","getLabels","singleScale","xAxisKey","yAxisKey","getParsed","getDataElement","updateRangeFromParsed","range","parsedValue","NaN","getMinMax","canStack","otherScale","hidden","createStack","POSITIVE_INFINITY","NEGATIVE_INFINITY","otherMin","otherMax","minDefined","maxDefined","getUserBounds","_skip","getAllParsedValues","getMaxOverflow","getLabelAndValue","getLabelForValue","_clip","t","top","right","bottom","left","disabled","toClip","clip","defaultClip","elements","area","chartArea","drawActiveElementsOnTop","getStyle","resolveDatasetElementOptions","resolveDataElementOptions","context","parent","dataIndex","raw","createDataContext","createDatasetContext","_resolveElementOptions","elementType","cache","cacheKey","sharing","datasetElementScopeKeys","prefixes","names","resolveNamedOptions","freeze","_resolveAnimations","transition","datasetAnimationScopeKeys","_cacheable","getSharedOptions","includeOptions","sharedOptions","_animationsDisabled","_getSharedOptions","firstOpts","previouslySharedOptions","updateSharedOptions","updateElement","_setStyle","removeHoverStyle","setHoverStyle","_removeDatasetHoverStyle","_setDatasetHoverStyle","arg1","arg2","numMeta","numData","_insertElements","_removeElements","move","arr","updateElements","removed","splice","_sync","args","_dataChanges","_onDataPush","arguments","_onDataPop","_onDataShift","_onDataSplice","newCount","_onDataUnshift","computeMinSampleSize","_cache","$bar","visibleMetas","concat","_","getAllScaleValues","curr","_length","updateMinAndPrev","getPixelForValue","ticks","getPixelForTick","parseValue","entry","startValue","endValue","barStart","barEnd","_custom","parseFloatBar","parseArrayOrPrimitive","isFloatBar","custom","setBorderSkipped","edge","borderSkipped","horizontal","base","borderProps","enableBorderRadius","parseEdge","orig","v1","v2","startEnd","setInflateAmount","inflateAmount","ratio","BarController","categoryPercentage","barPercentage","grouped","numbers","_index_","offset","grid","_value_","iAxisKey","vAxisKey","obj","bars","getBasePixel","isHorizontal","ruler","_getRuler","vpixels","head","_calculateBarValuePixels","ipixels","_calculateBarIndexPixels","center","height","width","_getStacks","last","skipNull","val","isNaN","indexOf","_getStackCount","_getStackIndex","pixels","_startPixel","_endPixel","stackCount","baseValue","minBarLength","actualBase","floating","getDataVisibility","barSign","startPixel","getPixelForDecimal","endPixel","halfGrid","getLineWidthForValue","maxBarThickness","Infinity","next","percent","chunk","computeFlexCategoryTraits","thickness","computeFitCategoryTraits","stackIndex","rects","BubbleController","radius","points","point","iPixel","vPixel","skip","DoughnutController","animateRotate","animateScale","cutout","rotation","circumference","spacing","_scriptable","_indexable","aspectRatio","plugins","legend","generateLabels","pointStyle","style","text","fillStyle","strokeStyle","borderColor","fontColor","lineWidth","onClick","legendItem","toggleDataVisibility","innerRadius","outerRadius","offsetX","offsetY","getter","_getRotation","_getCircumference","_getRotationExtents","T","isDatasetVisible","arcs","getMaxBorderWidth","getMaxOffset","maxSize","chartWeight","_getRingWeight","ratioX","ratioY","startAngle","endAngle","startX","cos","startY","sin","endX","endY","calcMax","angle","calcMin","maxX","maxY","H","minX","P","minY","getRatioAndOffset","maxWidth","maxHeight","maxRadius","radiusLength","_getVisibleDatasetWeightTotal","total","calculateTotal","_getRingWeightOffset","_circumference","calculateCircumference","animationOpts","centerX","centerY","arc","metaData","locale","borderAlign","hoverBorderWidth","ringWeightOffset","weight","LineController","showLine","spanGaps","line","_dataset","animationsDisabled","_datasetIndex","_decimated","segment","animated","maxGapLength","directUpdate","pointsCount","prevParsed","nullData","border","firstPoint","lastPoint","updateControlPoints","PolarAreaController","angleLines","display","circular","pointLabels","_updateRadius","minSize","cutoutPercentage","getVisibleDatasetCount","xCenter","yCenter","datasetStartAngle","getIndexAngle","defaultAngle","countVisibleElements","_computeAngle","getDistanceFromCenterForValue","PieController","RadarController","_fullLoop","pointPosition","getPointPositionForValue","ScatterController","interaction","registry","getElement","controllers","__proto__","abstract","DateAdapterBase","members","prototype","init","formats","format","diff","startOf","endOf","adapters","_date","binarySearch","metaset","intersect","lookupMethod","_reversePixels","el","getRange","lo","hi","evaluateInteractionItems","position","handler","getSortedVisibleDatasetMetas","j","getIntersectItems","useFinalPosition","includeInvisible","isPointInArea","inRange","getNearestCartesianItems","distanceMetric","useX","useY","pt1","pt2","deltaX","deltaY","sqrt","pow","getDistanceMetricForAxis","minDistance","getCenterPoint","distance","getNearestItems","getProps","getNearestRadialItems","getAxisItems","rangeMethod","intersectsItem","Interaction","modes","nearest","STATIC_POSITIONS","filterByPosition","array","pos","filterDynamicPositionByAxis","box","sortByWeight","v0","setLayoutDims","layouts","params","wrap","stackWeight","includes","_stack","placed","buildStacks","vBoxMaxWidth","hBoxMaxHeight","layout","fullSize","availableWidth","availableHeight","getCombinedMax","maxPadding","updateMaxPadding","boxPadding","updateDims","getPadding","newWidth","outerWidth","newHeight","outerHeight","widthChanged","w","heightChanged","h","same","other","getMargins","marginForPositions","positions","margin","fitBoxes","boxes","refitBoxes","refit","changed","setBoxDims","placeBoxes","userPadding","padding","height1","width1","addBox","_layers","z","removeBox","layoutItem","minPadding","layoutBoxes","wrapBoxes","centerHorizontal","centerVertical","leftAndTop","rightAndBottom","vertical","buildLayoutBoxes","verticalBoxes","horizontalBoxes","beforeLayout","visibleVerticalBoxCount","updatePos","change","handleMaxPadding","BasePlatform","acquireContext","canvas","releaseContext","listener","removeEventListener","getDevicePixelRatio","getMaximumSize","isAttached","updateConfig","BasicPlatform","EVENT_TYPES","touchstart","touchmove","touchend","pointerenter","pointerdown","pointermove","pointerup","pointerleave","pointerout","isNullOrEmpty","eventListenerOptions","passive","removeListener","nodeListContains","nodeList","contains","createAttachObserver","observer","MutationObserver","trigger","addedNodes","removedNodes","observe","childList","subtree","createDetachObserver","drpListeningCharts","oldDevicePixelRatio","onWindowResize","dpr","devicePixelRatio","resize","currentDevicePixelRatio","createResizeObserver","container","clientWidth","ResizeObserver","contentRect","listenDevicePixelRatioChanges","releaseObserver","disconnect","unlistenDevicePixelRatioChanges","createProxyAndListen","proxy","native","fromNativeEvent","addListener","DomPlatform","renderHeight","getAttribute","renderWidth","boxSizing","displayWidth","displayHeight","initCanvas","removeAttribute","proxies","$proxies","attach","detach","isConnected","_detectPlatform","OffscreenCanvas","Element","tooltipPosition","hasValue","final","ret","autoSkip","tickOpts","determinedMaxTicks","tickLength","_tickSize","maxScale","maxChart","_maxLength","determineMaxTicks","ticksLimit","maxTicksLimit","majorIndices","major","enabled","getMajorIndices","numMajorIndices","first","newTicks","ceil","skipMajors","evenMajorSpacing","len","getEvenSpacing","factors","calculateSpacing","avgMajorSpacing","round","majorStart","majorEnd","offsetFromEdge","sample","numItems","increment","getPixelForGridLine","offsetGridLines","validIndex","epsilon","lineValue","getTickMarkLength","drawTicks","getTitleHeight","fallback","font","lineHeight","titleAlign","align","reverseAlign","Scale","_margins","paddingTop","paddingBottom","paddingLeft","paddingRight","labelRotation","_range","_gridLineItems","_labelItems","_labelSizes","_longestTextCache","_userMax","_userMin","_suggestedMax","_suggestedMin","_ticksLength","_borderValue","_dataLimitsCached","setContext","suggestedMin","suggestedMax","metas","getTicks","xLabels","yLabels","beforeUpdate","margins","grace","sampleSize","beforeSetDimensions","setDimensions","afterSetDimensions","beforeDataLimits","determineDataLimits","afterDataLimits","beforeBuildTicks","buildTicks","afterBuildTicks","samplingEnabled","_convertTicksToLabels","beforeCalculateLabelRotation","calculateLabelRotation","afterCalculateLabelRotation","afterAutoSkip","beforeFit","fit","afterFit","afterUpdate","reversePixels","_alignToPixels","alignToPixels","_callHooks","notifyPlugins","beforeTickToLabelConversion","generateTickLabels","callback","afterTickToLabelConversion","numTicks","minRotation","maxRotation","tickWidth","maxLabelDiagonal","_isVisible","labelSizes","_getLabelSizes","maxLabelWidth","widest","maxLabelHeight","highest","title","asin","titleOpts","gridOpts","titleHeight","tickPadding","angleRadians","labelHeight","mirror","labelWidth","_calculatePadding","_handleMargins","isRotated","labelsBelowTicks","offsetLeft","offsetRight","isFullSize","_computeLabelSizes","caches","widths","heights","jlen","tickFont","fontString","nestedLabel","widestLabelSize","highestLabelSize","_resolveTickFontOptions","string","gc","gcLen","garbageCollect","valueAt","idx","getValueForPixel","pixel","decimal","getDecimalForPixel","getBaseValue","createTickContext","optionTicks","rot","autoSkipPadding","_computeGridLineItems","ticksLength","tl","borderOpts","axisWidth","axisHalfWidth","alignBorderValue","borderValue","alignedLineValue","tx1","ty1","tx2","ty2","x1","y1","x2","y2","positionAxisID","positionAxisID1","value1","limit","step","optsAtIndex","optsAtIndexBorder","lineColor","borderDash","dash","borderDashOffset","dashOffset","tickColor","tickBorderDash","tickBorderDashOffset","_computeLabelItems","crossAlign","tickAndPadding","hTickAndPadding","textAlign","lineCount","textOffset","textBaseline","_getXAxisLabelAlignment","_getYAxisLabelAlignment","ret1","labelOffset","halfCount","strokeColor","textStrokeColor","strokeWidth","textStrokeWidth","backdrop","tickTextAlign","showLabelBackdrop","labelPadding","backdropPadding","backdropColor","translation","_computeLabelArea","drawBackground","save","fillRect","restore","findIndex","drawGrid","drawLine","p1","p2","setLineDash","lineDashOffset","beginPath","moveTo","lineTo","stroke","drawOnChartArea","drawBorder","lastLineWidth","drawLabels","drawTitle","titleX","titleY","titleArgs","tz","gz","bz","axisID","_maxDigits","fontSize","TypedRegistry","scope","override","create","isForType","isPrototypeOf","call","register","proto","getPrototypeOf","parentScope","isIChartComponent","itemDefaults","defaults","defaultRoutes","routes","propertyParts","split","sourceName","sourceScope","parts","targetName","targetScope","routeDefaults","descriptors","registerDefaults","overrides","unregister","Registry","_typedRegistries","_each","addControllers","addPlugins","addScales","getController","_get","getPlugin","getScale","removeControllers","removeElements","removePlugins","removeScales","typedRegistry","arg","reg","_getRegistryForType","_exec","itemReg","component","camelMethod","PluginService","_init","notify","hook","_createDescriptors","_descriptors","descriptor","plugin","cancelable","invalidate","_oldCache","_notifyStateChanges","localIds","local","i1","allPlugins","getOpts","pluginOpts","createDescriptors","previousDescriptors","some","pluginScopeKeys","scriptable","indexable","allKeys","getIndexAxis","datasetDefaults","determineAxis","scaleOptions","toLowerCase","initOptions","chartDefaults","configScales","chartIndexAxis","scaleConf","error","_proxy","defaultId","getDefaultScaleIDFromAxis","defaultScaleOptions","defaultID","getAxisFromDefaultScaleID","mergeScaleConfig","initData","keyCache","keysCached","Set","cachedKeys","generate","addIfFound","Config","_config","initConfig","_scopeCache","_resolverCache","platform","clearCache","clear","datasetType","additionalOptionScopes","_cachedScopes","mainScope","resetCache","keyLists","chartOptionScopes","resolver","subPrefixes","getResolver","isScriptable","isIndexable","hasFunction","needContext","subResolver","descriptorDefaults","resolverCache","p","KNOWN_POSITIONS","positionIsHorizontal","compare2Level","l1","l2","onAnimationsComplete","onComplete","onAnimationProgress","onProgress","getCanvas","instances","getChart","moveNumericKeys","intKey","invalidatePlugins","userConfig","initialCanvas","existingChart","_options","_aspectRatio","_metasets","_lastEvent","_listeners","_responsiveListeners","_sortedMetasets","_plugins","_hiddenIndices","attached","_doResize","resizeDelay","_initialize","maintainAspectRatio","bindEvents","_resizeBeforeDraw","_resize","newSize","newRatio","onResize","render","ensureScalesHaveIDs","scalesOptions","axisOptions","buildOrUpdateScales","scaleOpts","updated","isRadial","dposition","dtype","scaleType","hasUpdated","_updateMetasets","_destroyDatasetMeta","_removeUnreferencedMetasets","buildOrUpdateControllers","newControllers","order","visible","ControllerClass","_resetElements","animsDisabled","_updateScales","_checkEventBindings","_updateHiddenIndices","_minPadding","autoPadding","_updateLayout","_updateDatasets","_eventHandler","_updateHoverStyles","existingEvents","newEvents","events","unbindEvents","changes","_getUniformDataChanges","datasetCount","makeSet","changeSet","noArea","_idx","ilen1","_updateDataset","layers","_drawDatasets","_drawDataset","useClip","getDatasetArea","getElementsAtEventForMode","setDatasetVisibility","_updateVisibility","hide","show","_stop","destroy","toBase64Image","toDataURL","bindUserEvents","bindResponsiveEvents","_add","_remove","detached","updateHoverStyle","prefix","getActiveElements","setActiveElements","activeElements","lastActive","pluginId","replay","hoverOptions","hover","deactivated","activated","inChartArea","eventFilter","_handleEvent","_getActiveElements","isClick","lastEvent","determineLastEvent","onHover","Chart$1","parseBorderRadius$1","angleDelta","o","borderRadius","halfThickness","innerLimit","computeOuterLimit","outerArcLimit","outerStart","outerEnd","innerStart","innerEnd","rThetaToXY","theta","pathArc","pixelMargin","innerR","spacingOffset","alpha","avNogSpacingRadius","angleOffset","outerStartAdjustedRadius","outerEndAdjustedRadius","outerStartAdjustedAngle","outerEndAdjustedAngle","innerStartAdjustedRadius","innerEndAdjustedRadius","innerStartAdjustedAngle","innerEndAdjustedAngle","outerMidAdjustedAngle","pCenter","p4","pCenter1","PI","innerMidAdjustedAngle","pCenter2","p8","pCenter3","outerStartX","outerStartY","outerEndX","outerEndY","closePath","fullCircles","borderJoinStyle","inner","lineJoin","angleMargin","clipArc","ArcElement","chartX","chartY","rAdjust","betweenAngles","withinRadius","halfAngle","halfRadius","translate","radiusOffset","drawArc","setStyle","lineCap","borderCapStyle","previous","pathVars","paramsStart","paramsEnd","segmentStart","segmentEnd","outside","pathSegment","lineMethod","stepped","tension","cubicInterpolationMode","getLineMethod","fastPathSegment","prevX","lastY","avgX","countX","pointIndex","drawX","truncX","_getSegmentMethod","usePath2D","Path2D","path","_path","strokePathWithCache","segments","segmentMethod","strokePathDirect","LineElement","capBezierPoints","_points","_segments","_pointsUpdated","interpolate","_interpolate","_getInterpolationMethod","interpolated","inRange$1","hitRadius","PointElement","hoverRadius","mouseX","mouseY","inXRange","inYRange","getBarBounds","bar","half","skipOrLimit","boundingRects","bounds","maxW","maxH","parseBorderWidth","maxR","enableBorder","topLeft","topRight","bottomLeft","bottomRight","parseBorderRadius","outer","skipX","skipY","addNormalRectPath","rect","inflateRect","refRect","BarElement","addRectPath","BORDER_COLORS","BACKGROUND_COLORS","getBorderColor","getBackgroundColor","getColorizer","createDoughnutDatasetColorizer","createPolarAreaDatasetColorizer","containsColorsDefinitions","k","plugin_colors","_args","colorizer","cleanDecimatedDataset","defineProperty","cleanDecimatedData","plugin_decimation","algorithm","beforeElementsUpdate","xAxis","pointCount","getStartAndCountOfVisiblePointsSimplified","threshold","decimated","configurable","enumerable","samples","bucketWidth","sampledIndex","endIndex","maxAreaPoint","maxArea","nextA","avgY","avgRangeStart","avgRangeEnd","avgRangeLength","rangeOffs","rangeTo","pointAx","pointAy","lttbDecimation","minIndex","maxIndex","startIndex","xMin","dx","lastIndex","intermediateIndex1","intermediateIndex2","minMaxDecimation","_getBounds","_findSegmentEnd","_getEdge","_createBoundaryLine","boundary","linePoints","_pointsFromSegments","_shouldApplyFill","_resolveTarget","sources","propagate","visited","_decodeFill","fillOption","parseFillOption","parseFloat","firstCh","decodeTargetIndex","addPointsBelow","sourcePoint","linesBelow","postponed","findPoint","unshift","pointValue","firstValue","lastValue","simpleArc","_getTarget","getLineByIndex","sourcePoints","below","getLinesBelow","_buildStackLine","_getTargetValue","computeCircularBoundary","_getTargetPixel","computeLinearBoundary","computeBoundary","_drawfill","lineOpts","above","clipVertical","doFill","clipY","lineLoop","tpoints","targetSegments","tgt","subBounds","fillSources","fillSource","src","notShape","clipBounds","interpolatedLineTo","targetLoop","interpolatedPoint","afterDatasetsUpdate","$filler","beforeDraw","drawTime","beforeDatasetsDraw","beforeDatasetDraw","getBoxSize","labelOpts","boxHeight","boxWidth","usePointStyle","pointStyleWidth","itemHeight","Legend","_added","legendHitBoxes","_hoveredItem","doughnutMode","legendItems","columnSizes","lineWidths","buildLabels","labelFont","_computeTitleHeight","_fitRows","_fitCols","hitboxes","totalHeight","row","itemWidth","measureText","_itemHeight","heightLimit","totalWidth","currentColWidth","currentColHeight","col","legendItemText","calculateItemWidth","fontLineHeight","calculateLegendItemHeight","calculateItemHeight","calculateItemSize","adjustHitBoxes","rtl","rtlHelper","hitbox","leftForLtr","hitbox1","_draw","defaultColor","halfFontSize","cursor","textDirection","textWidth","setWidth","lineDash","drawOptions","SQRT2","xPlus","yBoxTop","xBoxLeft","drawLegendBox","strikethrough","fillText","titleFont","titlePadding","topPaddingPlusHalfFontSize","_getLegendItemAt","hitBox","lh","handleEvent","onLeave","isListened","hoveredItem","sameItem","plugin_legend","_element","afterEvent","ci","useBorderRadius","startsWith","Title","_padding","textSize","_drawArgs","fontOpts","plugin_title","titleBlock","createTitle","WeakMap","plugin_subtitle","positioners","average","eventPosition","nearestElement","tp","pushOrConcat","toPush","apply","splitNewlines","str","String","createTooltipItem","formattedValue","getTooltipSize","tooltip","footer","bodyFont","footerFont","titleLineCount","footerLineCount","bodyLineItemCount","combinedBodyLength","bodyItem","before","lines","after","beforeBody","afterBody","titleSpacing","titleMarginBottom","displayColors","bodySpacing","footerMarginTop","footerSpacing","widthPadding","maxLineWidth","determineXAlign","yAlign","chartWidth","xAlign","caret","caretSize","caretPadding","doesNotFitWithAlign","determineAlignment","determineYAlign","getBackgroundPoint","alignment","cornerRadius","paddingAndSize","alignX","alignY","getAlignedX","getBeforeAfterBodyLines","overrideCallbacks","defaultCallbacks","beforeTitle","tooltipItems","labelCount","afterTitle","beforeLabel","tooltipItem","labelColor","labelTextColor","bodyColor","labelPointStyle","afterLabel","beforeFooter","afterFooter","invokeCallbackWithFallback","Tooltip","opacity","_eventPosition","_size","_cachedAnimations","_tooltipItems","dataPoints","caretX","caretY","labelColors","labelPointStyles","labelTextColors","getTitle","getBeforeBody","getBody","bodyItems","scoped","getAfterBody","getFooter","_createItems","itemSort","positionAndSize","backgroundPoint","external","drawCaret","tooltipPoint","caretPosition","getCaretPosition","x3","y3","ptX","ptY","pt","titleColor","_drawColorBox","colorX","rtlColorX","yOffSet","colorY","multiKeyBackground","outerX","innerX","strokeRect","drawBody","bodyAlign","bodyLineHeight","xLinePadding","fillLineOfText","bodyAlignForCalculation","textColor","drawFooter","footerAlign","footerColor","tooltipSize","quadraticCurveTo","_updateAnimationTarget","animX","animY","_willRender","hasTooltipContent","globalAlpha","positionChanged","_positionChanged","_ignoreReplayEvents","plugin_tooltip","afterInit","afterDraw","_fallback","Colors","Decimation","Filler","SubTitle","findOrAddLabel","addedLabels","addIfString","lastIndexOf","_getLabelForValue","CategoryScale","_startValue","_valueRange","_addedLabels","added","isFinite","relativeLabelSize","minSpacing","rad","LinearScaleBase","_endValue","handleTickRangeOptions","setMin","setMax","minSign","maxSign","getTickLimit","maxTicks","stepSize","computeTickLimit","generationOptions","dataRange","precision","maxDigits","includeBounds","unit","maxSpaces","rmin","rmax","countDefined","niceMin","niceMax","numSpaces","decimalPlaces","generateTicks$1","LinearScale","log10Floor","changeExponent","m","isMajor","tickVal","steps","rangeExp","rangeStep","generateTicks","minExp","exp","startExp","significand","lastTick","LogarithmicScale","_zero","getTickBackdropHeight","determineLimits","fitWithPointLabels","limits","valueCount","_pointLabels","pointLabelOpts","additionalAngle","centerPointLabels","getPointLabelContext","getPointPosition","drawingArea","plFont","updateLimits","setCenterPoint","_pointLabelItems","extra","outerDistance","pointLabelPosition","yForAngle","getTextAlignForAngle","leftForTextAlign","buildPointLabelItems","hLimits","vLimits","pathRadiusLine","RadialLinearScale","animate","leftMovement","rightMovement","topMovement","bottomMovement","angleMultiplier","scalingFactor","getValueForDistanceFromCenter","scaledDistance","pointLabel","createPointLabelContext","distanceFromCenter","getBasePosition","getPointLabelPosition","backdropLeft","backdropTop","backdropWidth","backdropHeight","drawPointLabels","gridLineOpts","drawRadiusLine","rotate","INTERVALS","millisecond","common","second","minute","hour","day","week","month","quarter","year","UNITS","sorter","input","adapter","_adapter","parser","isoWeekday","_parseOpts","determineUnitForAutoTicks","minUnit","capacity","interval","MAX_SAFE_INTEGER","addTick","time","timestamps","ticksFromTimestamps","majorUnit","setMajorTicks","TimeScale","displayFormats","_unit","_majorUnit","_offsets","_normalized","normalized","_applyBounds","_getLabelBounds","getLabelTimestamps","timeOpts","_generate","_getLabelCapacity","determineUnitForFormatting","determineMajorUnit","initOffsets","offsetAfterAutoskip","getDecimalForValue","minor","weekday","hasWeekday","getDataTimestamps","tooltipFormat","datetime","_tickFormatFunction","formatter","minorFormat","majorFormat","offsets","_getLabelSize","ticksOpts","tickLabelWidth","cosRotation","sinRotation","tickFontSize","exampleTime","exampleLabel","normalize","table","prevSource","nextSource","prevTarget","nextTarget","span","TimeSeriesScale$1","_table","_minPos","_tableRange","_getTimestampsForTable","buildLookupTable","TimeSeriesScale","noop","uid","isNullOrUndef","isArray","isObject","isNumberFinite","finiteOrDefault","defaultValue","valueOrDefault","toPercentage","dimension","endsWith","toDimension","thisArg","each","loopable","_elementsEqual","a0","a1","clone$1","klen","isValidKey","_merger","tval","sval","merge","merger","current","mergeIf","_mergerIf","hasOwnProperty","_deprecated","keyResolvers","_splitKey","tmp","part","resolveObjectKey","_getKeyResolver","_capitalize","toUpperCase","defined","isFunction","setsEqual","_isClickEvent","TAU","PITAU","INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","niceNum","roundedRange","niceRange","fraction","_factorize","isNumber","n","almostWhole","rounded","_setMinAndMaxByKey","toRadians","degrees","toDegrees","radians","_decimalPlaces","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","atan2","distanceBetweenPoints","_angleDiff","_normalizeAngle","_angleBetween","sameAngleIsFullCircle","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_int16Range","_isBetween","_lookup","cmp","mid","_lookupByKey","ti","_rlookupByKey","_filterBetween","arrayEvents","listenArrayEvents","_chartjs","unlistenArrayEvents","stub","_arrayUnique","pixelSize","fontStyle","fontFamily","requestAnimFrame","requestAnimationFrame","throttled","ticking","debounce","timeout","clearTimeout","setTimeout","_toLeftRightCenter","_alignStartEnd","_textX","_getStartAndCountOfVisiblePoints","_scaleRangesChanged","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","atEdge","elasticIn","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","effects$1","lim","p2b","n2b","b2n","n2p","map$1","A","B","C","D","E","F","f","hex","h1","h2","eq","g","isShort","HUE_RE","hsl2rgbn","hsv2rgbn","hwb2rgbn","rgb","rgb2hsl","hueValue","calln","hsl2rgb","hue","hueParse","exec","hwb2rgb","hsv2rgb","Z","Y","X","W","V","U","S","R","Q","O","N","M","L","K","G","I","J","names$1","OiceXe","antiquewEte","aqua","aquamarRe","azuY","beige","bisque","black","blanKedOmond","Xe","XeviTet","bPwn","burlywood","caMtXe","KartYuse","KocTate","cSO","cSnflowerXe","cSnsilk","crimson","cyan","xXe","xcyan","xgTMnPd","xWay","xgYF","xgYy","xkhaki","xmagFta","xTivegYF","xSange","xScEd","xYd","xsOmon","xsHgYF","xUXe","xUWay","xUgYy","xQe","xviTet","dAppRk","dApskyXe","dimWay","dimgYy","dodgerXe","fiYbrick","flSOwEte","foYstWAn","fuKsia","gaRsbSo","ghostwEte","gTd","gTMnPd","Way","gYF","gYFLw","gYy","honeyMw","hotpRk","RdianYd","Rdigo","ivSy","khaki","lavFMr","lavFMrXsh","lawngYF","NmoncEffon","ZXe","ZcSO","Zcyan","ZgTMnPdLw","ZWay","ZgYF","ZgYy","ZpRk","ZsOmon","ZsHgYF","ZskyXe","ZUWay","ZUgYy","ZstAlXe","ZLw","lime","limegYF","lRF","magFta","maPon","VaquamarRe","VXe","VScEd","VpurpN","VsHgYF","VUXe","VsprRggYF","VQe","VviTetYd","midnightXe","mRtcYam","mistyPse","moccasR","navajowEte","navy","Tdlace","Tive","TivedBb","Sange","SangeYd","ScEd","pOegTMnPd","pOegYF","pOeQe","pOeviTetYd","papayawEp","pHKpuff","peru","pRk","plum","powMrXe","purpN","YbeccapurpN","Yd","Psybrown","PyOXe","saddNbPwn","sOmon","sandybPwn","sHgYF","sHshell","siFna","silver","skyXe","UXe","UWay","UgYy","snow","sprRggYF","stAlXe","tan","teO","tEstN","tomato","Qe","viTet","JHt","wEte","wEtesmoke","Lw","LwgYF","nameParse","unpacked","tkeys","ok","nk","parseInt","unpack","RGB_RE","modHSL","clone","fromObject","functionParse","rgbParse","Color","_rgb","_valid","rgbString","hslString","c2","w2","w1","rgb1","rgb2","clearer","greyscale","opaquer","negate","lighten","darken","saturate","desaturate","deg","index_esm","isPatternOrGradient","getHoverColor","colors","intlCache","formatNumber","num","JSON","stringify","Intl","NumberFormat","getNumberFormat","formatters","numeric","tickValue","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","Ticks","getScope$1","root","Defaults","_appliers","family","hoverBackgroundColor","hoverBorderColor","hoverColor","describe","route","scopeObject","targetScopeObject","privateName","defineProperties","writable","appliers","toFontString","_measureText","longest","_longestText","arrayOfThings","thing","nestedThing","_alignPixel","halfWidth","clearCanvas","resetTransform","clearRect","drawPoint","drawPointLegend","xOffset","yOffset","xOffsetW","yOffsetW","drawImage","ellipse","SQRT1_2","_isPointInArea","clipArea","unclipArea","_steppedLineTo","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","renderText","setRenderOpts","drawBackdrop","strokeText","decorateText","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","decorationWidth","oldColor","addRoundedRectPath","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","match","_readValueToProps","objProps","read","toTRBL","toTRBLCorners","toPadding","toFont","resolve","inputs","info","cacheable","_addGrace","minmax","keepZero","createContext","parentContext","_createResolver","rootScopes","getTarget","_resolve","Symbol","toStringTag","_scopes","_rootScopes","Proxy","deleteProperty","_keys","_cached","readKey","needsSubResolver","createSubResolver","_resolveWithPrefixes","getOwnPropertyDescriptor","Reflect","getKeysFromAllScopes","ownKeys","storage","_storage","_attachContext","subProxy","_context","_subProxy","receiver","_resolveScriptable","_resolveArray","_resolveWithContext","_allKeys","resolveFallback","getScope","addScopes","parentScopes","parentFallback","allScopes","addScopesFromKey","subGetTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","EPSILON","getPoint","getValueAxis","splineCurve","middlePoint","afterPoint","d01","d12","s01","s12","fa","fb","splineCurveMonotone","valueAxis","pointsLen","deltaK","mK","pointBefore","pointCurrent","pointAfter","slopeDelta","alphaK","betaK","tauK","squaredMagnitude","monotoneAdjust","monotoneCompute","capControlPoint","_updateBezierControlPoints","controlPoints","inArea","inAreaPrev","inAreaNext","_isDomSupported","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","ownerDocument","defaultView","getPropertyValue","getPositionedStyle","styles","suffix","getRelativePosition","borderBox","paddings","borders","touches","shadowRoot","useOffsetPos","getBoundingClientRect","clientX","clientY","getCanvasPosition","round1","bbWidth","bbHeight","containerSize","containerStyle","containerBorder","containerPadding","clientHeight","getContainerSize","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","readUsedSize","_pointInLine","_steppedInterpolation","_bezierInterpolation","cp1","cp2","getRtlAdapter","rectX","getRightToLeftAdapter","_itemWidth","overrideTextDirection","direction","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","compare","normalizeSegment","_boundSegment","startBound","endBound","getSegment","prevValue","inside","subStart","shouldStart","shouldStop","_boundSegments","sub","_computeSegments","segmentOptions","findStartAndEnd","splitByStyles","solidSegments","chartContext","baseStyle","readStyle","prevStyle","addStyle","st","dir","p0","p0DataIndex","p1DataIndex","styleChanged","doSplitByStyles","_global","globalThis","self","global","extend","extension","getProto","_hasOwn","hasOwn","setProp","functionOrGetSet","derive","Child","Parent","bind","getPropertyDescriptor","_slice","origFunc","overridedFactory","assert","asap$1","setImmediate","arrayToObject","extractor","nameAndValue","getByKeyPath","keyPath","rv","period","innerObj","substr","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","shallowClone","flatten","intrinsicTypeNames","intrinsicTypes","circularRefs","deepClone","any","innerDeepClone","iteratorSymbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","done","isAsyncFunction","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","getErrorWithStack","prettyStack","exception","numIgnoredFrames","frame","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","ModifyError","successCount","failedKeys","BulkError","failuresByPos","errnames","BaseException","exceptions","fullName","msgOrInner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","fullNameExceptions","nop","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","thiz","INTERNAL","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","globalP","subtle","nativeP","digest","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","hiddenDiv","attributes","asap","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","tryCatch","origProp","addPossiblyUnhandledError","finalizePhysicalTick","callListener","markErrorAsHandled","getStack","errorName","failure","numPrev","wasRootExec","unhandledErrs","finalizers","PromiseReject","errorCatcher","outerScope","switchToZone","err","finally","onFinally","ms","handle","Timeout","snapShot","onPossibleParallellAsync","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","status","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a2","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise","targetEnv","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","defaultPrevented","tempTransaction","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","dbOpenError","isBeingOpened","autoOpen","dbReadyPromise","DEXIE_VERSION","maxString","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","core","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","idxByName","idb","_deps","indexedDB","filterFunction","prevIndex","prevFilterFn","multi","toCollection","and","thenShortcut","numRows","Collection","orderBy","mapToClass","mappedClass","readHook","unsubscribe","defineClass","content","auto","objToAdd","mutate","numFailures","lastResult","keyOrObject","modify","InvalidArgument","_a","put","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkDelete","numKeys","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","subscribers","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","unique","query","iter","coreTrans","union","advance","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","continue","advancer","ta","tb","al","bl","compareUint8Arrays","getUint8Array","compareArrays","ArrayBuffer","isView","tsTag","buffer","byteOffset","byteLength","_read","_write","_addAlgorithm","sortBy","lastPart","getval","aVal","bVal","rowsLeft","until","bIncludeStopEntry","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","addValues","putValues","putKeys","deleteKeys","origValue","criteria","deleteCallback","changeSpec","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","needles","upperNeedles","lowerNeedles","nextKeySuffix","needlesLen","initDirection","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","includeLower","includeUpper","_cmp","aboveOrEqual","belowOrEqual","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","eventRejectHandler","preventDefault","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","OpenFailed","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","nameFromKeyPath","createTableSchema","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","makeIDBKeyRange","upperBound","lowerBound","bound","hasGetAll","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","extractSchema","isAddOrPut","req","reqs","errorHandler","args1","args2","keyCount","callbackCount","successHandler","_pos","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","generateMiddlewareStacks","_novip","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","createMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","removeTablesApi","lowerVersionFirst","_cfg","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","runQueue","oldSchema","newSchema","adjustToExistingIndexNames","getSchemaDiff","tuple","recreate","Upgrade","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema","contentUpgradeIsAsync","returnValue","promiseFollowed","decrementor","storeName","deleteObjectStore","deleteRemovedTables","updateTablesAndIndexes","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","createIndex","idbindex","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","Version","_parseStoresSpec","outSchema","indexNum","trim","storesSource","storesSpec","_allTables","upgrade","upgradeFunction","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","vip","idbReady","intervalId","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","state","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onclose","_onDatabaseCreated","onReadyBeingFired","ready","fireRemainders","remainders","awaitIterator","callNext","onSuccess","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","virtualCursor","createVirtualCursor","getObjectDiff","prfx","ap","bp","apTypeName","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","getEffectiveKeys","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges","requestedValue","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","RangeSet","fromOrTree","addRange","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","getRangeSetIterator","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","addAffectedIndex","addKeyOrKeys","oldKey","newKey","trackAffectedIndexes","readSubscribers","subscr","queriedIndex","queriedRanges","keysPromise","resultingKeys","pKeys","wantValues","pkey","deps","dependencies","cancelOpen","bSticky","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","_onDatabaseDeleted","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","execute","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","propagateLocally","updateParts","wasMe","propagatingLocally","databaseName","exists","getDatabaseNames","infos","ignoreTransaction","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","delByKeyPath","semVer","maxKey","updatedParts","initCustomEvent","BroadcastChannel","bc","changedParts","postMessage","onmessage","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","newValue","swContainer","serviceWorker","domError","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","definition"],"sourceRoot":""}